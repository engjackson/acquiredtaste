(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,11458,e=>{"use strict";var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,r)};function r(e,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}var i=function(){return(i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function s(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>t.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r}function n(e,t,r,i){var s,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,i);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(a=(n<3?s(a):n>3?s(t,r,a):s(t,r))||a);return n>3&&a&&Object.defineProperty(t,r,a),a}function a(e,t){return function(r,i){t(r,i,e)}}function o(e,t,r,i,s,n){function a(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var o,l=i.kind,h="getter"===l?"get":"setter"===l?"set":"value",u=!t&&e?i.static?e:e.prototype:null,c=t||(u?Object.getOwnPropertyDescriptor(u,i.name):{}),d=!1,f=r.length-1;f>=0;f--){var p={};for(var m in i)p[m]="access"===m?{}:i[m];for(var m in i.access)p.access[m]=i.access[m];p.addInitializer=function(e){if(d)throw TypeError("Cannot add initializers after decoration has completed");n.push(a(e||null))};var g=(0,r[f])("accessor"===l?{get:c.get,set:c.set}:c[h],p);if("accessor"===l){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw TypeError("Object expected");(o=a(g.get))&&(c.get=o),(o=a(g.set))&&(c.set=o),(o=a(g.init))&&s.unshift(o)}else(o=a(g))&&("field"===l?s.unshift(o):c[h]=o)}u&&Object.defineProperty(u,i.name,c),d=!0}function l(e,t,r){for(var i=arguments.length>2,s=0;s<t.length;s++)r=i?t[s].call(e,r):t[s].call(e);return i?r:void 0}function h(e){return"symbol"==typeof e?e:"".concat(e)}function u(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function d(e,t,r,i){return new(r||(r=Promise))(function(s,n){function a(e){try{l(i.next(e))}catch(e){n(e)}}function o(e){try{l(i.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((i=i.apply(e,t||[])).next())})}function f(e,t){var r,i,s,n={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){var h=[o,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,h[0]&&(n=0)),n;)try{if(r=1,i&&(s=2&h[0]?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[2&h[0],s.value]),h[0]){case 0:case 1:s=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,i=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(!(s=(s=n.trys).length>0&&s[s.length-1])&&(6===h[0]||2===h[0])){n=0;continue}if(3===h[0]&&(!s||h[1]>s[0]&&h[1]<s[3])){n.label=h[1];break}if(6===h[0]&&n.label<s[1]){n.label=s[1],s=h;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(h);break}s[2]&&n.ops.pop(),n.trys.pop();continue}h=t.call(e,n)}catch(e){h=[6,e],i=0}finally{r=s=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}}var p=Object.create?function(e,t,r,i){void 0===i&&(i=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,s)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]};function m(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||p(t,e,r)}function g(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function y(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,s,n=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(e){s={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return a}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e}function w(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),s=0,t=0;t<r;t++)for(var n=arguments[t],a=0,o=n.length;a<o;a++,s++)i[s]=n[a];return i}function b(e,t,r){if(r||2==arguments.length)for(var i,s=0,n=t.length;s<n;s++)!i&&s in t||(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))}function _(e){return this instanceof _?(this.v=e,this):new _(e)}function x(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,s=r.apply(e,t||[]),n=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(e){return function(t){return Promise.resolve(t).then(e,h)}}),i[Symbol.asyncIterator]=function(){return this},i;function a(e,t){s[e]&&(i[e]=function(t){return new Promise(function(r,i){n.push([e,t,r,i])>1||o(e,t)})},t&&(i[e]=t(i[e])))}function o(e,t){try{var r;(r=s[e](t)).value instanceof _?Promise.resolve(r.value.v).then(l,h):u(n[0][2],r)}catch(e){u(n[0][3],e)}}function l(e){o("next",e)}function h(e){o("throw",e)}function u(e,t){e(t),n.shift(),n.length&&o(n[0][0],n[0][1])}}function S(e){var t,r;return t={},i("next"),i("throw",function(e){throw e}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,s){t[i]=e[i]?function(t){return(r=!r)?{value:_(e[i](t)),done:!1}:s?s(t):t}:s}}function T(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=g(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=e[r]&&function(t){return new Promise(function(i,s){var n,a,o;n=i,a=s,o=(t=e[r](t)).done,Promise.resolve(t.value).then(function(e){n({value:e,done:o})},a)})}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var k=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},A=function(e){return(A=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)};function P(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=A(e),i=0;i<r.length;i++)"default"!==r[i]&&p(t,e,r[i]);return k(t,e),t}function j(e){return e&&e.__esModule?e:{default:e}}function O(e,t,r,i){if("a"===r&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)}function C(e,t,r,i,s){if("m"===i)throw TypeError("Private method is not writable");if("a"===i&&!s)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?s.call(e,r):s?s.value=r:t.set(e,r),r}function R(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function I(e,t,r){if(null!=t){var i,s;if("object"!=typeof t&&"function"!=typeof t)throw TypeError("Object expected.");if(r){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(void 0===i){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose],r&&(s=i)}if("function"!=typeof i)throw TypeError("Object not disposable.");s&&(i=function(){try{s.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t}var $="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var i=Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};function D(e){function t(t){e.error=e.hasError?new $(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var r,i=0;return function s(){for(;r=e.stack.pop();)try{if(!r.async&&1===i)return i=0,e.stack.push(r),Promise.resolve().then(s);if(r.dispose){var n=r.dispose.call(r.value);if(r.async)return i|=2,Promise.resolve(n).then(s,function(e){return t(e),s()})}else i|=1}catch(e){t(e)}if(1===i)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function N(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,r,i,s,n){return r?t?".jsx":".js":!i||s&&n?i+s+"."+n.toLowerCase()+"js":e}):e}let M={__extends:r,__assign:i,__rest:s,__decorate:n,__param:a,__esDecorate:o,__runInitializers:l,__propKey:h,__setFunctionName:u,__metadata:c,__awaiter:d,__generator:f,__createBinding:p,__exportStar:m,__values:g,__read:y,__spread:v,__spreadArrays:w,__spreadArray:b,__await:_,__asyncGenerator:x,__asyncDelegator:S,__asyncValues:T,__makeTemplateObject:E,__importStar:P,__importDefault:j,__classPrivateFieldGet:O,__classPrivateFieldSet:C,__classPrivateFieldIn:R,__addDisposableResource:I,__disposeResources:D,__rewriteRelativeImportExtension:N};e.s(["__addDisposableResource",()=>I,"__assign",()=>i,"__asyncDelegator",()=>S,"__asyncGenerator",()=>x,"__asyncValues",()=>T,"__await",()=>_,"__awaiter",()=>d,"__classPrivateFieldGet",()=>O,"__classPrivateFieldIn",()=>R,"__classPrivateFieldSet",()=>C,"__createBinding",()=>p,"__decorate",()=>n,"__disposeResources",()=>D,"__esDecorate",()=>o,"__exportStar",()=>m,"__extends",()=>r,"__generator",()=>f,"__importDefault",()=>j,"__importStar",()=>P,"__makeTemplateObject",()=>E,"__metadata",()=>c,"__param",()=>a,"__propKey",()=>h,"__read",()=>y,"__rest",()=>s,"__rewriteRelativeImportExtension",()=>N,"__runInitializers",()=>l,"__setFunctionName",()=>u,"__spread",()=>v,"__spreadArray",()=>b,"__spreadArrays",()=>w,"__values",()=>g,"default",0,M])},94e3,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}},98575,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(11458),s=i.__importDefault(e.r(2699)),n=i.__importDefault(e.r(94e3));r.default=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!=(t=e.shouldThrowOnError)&&t,this.signal=e.signal,this.isMaybeSingle=null!=(r=e.isMaybeSingle)&&r,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=s.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,r,i,s;let a=null,o=null,l=null,h=e.status,u=e.statusText;if(e.ok){if("HEAD"!==this.method){let r=await e.text();""===r||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null==(t=this.headers.get("Accept"))?void 0:t.includes("application/vnd.pgrst.plan+text"))?r:JSON.parse(r))}let s=null==(r=this.headers.get("Prefer"))?void 0:r.match(/count=(exact|planned|estimated)/),n=null==(i=e.headers.get("content-range"))?void 0:i.split("/");s&&n&&n.length>1&&(l=parseInt(n[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(a={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,h=406,u="Not Acceptable"):o=1===o.length?o[0]:null)}else{let t=await e.text();try{a=JSON.parse(t),Array.isArray(a)&&404===e.status&&(o=[],a=null,h=200,u="OK")}catch(r){404===e.status&&""===t?(h=204,u="No Content"):a={message:t}}if(a&&this.isMaybeSingle&&(null==(s=null==a?void 0:a.details)?void 0:s.includes("0 rows"))&&(a=null,h=200,u="OK"),a&&this.shouldThrowOnError)throw new n.default(a)}return{error:a,data:o,count:l,status:h,statusText:u}});return this.shouldThrowOnError||(r=r.catch(e=>{var t,r,i;return{error:{message:`${null!=(t=null==e?void 0:e.name)?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!=(r=null==e?void 0:e.stack)?r:""}`,hint:"",code:`${null!=(i=null==e?void 0:e.code)?i:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}}},64811,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(11458).__importDefault(e.r(98575));class s extends i.default{select(e){let t=!1,r=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){let n=s?`${s}.order`:"order",a=this.url.searchParams.get(n);return this.url.searchParams.set(n,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){let i=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:i=r}={}){let s=void 0===i?"offset":`${i}.offset`,n=void 0===i?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(n,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:n="text"}={}){var a;let o=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=null!=(a=this.headers.get("Accept"))?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${n}; for="${l}"; options=${o};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}}r.default=s},89360,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(11458).__importDefault(e.r(64811)),s=RegExp("[,()]");class n extends i.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){let r=Array.from(new Set(t)).map(e=>"string"==typeof e&&s.test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let s="";"plain"===i?s="pl":"phrase"===i?s="ph":"websearch"===i&&(s="w");let n=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${n}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){let i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}r.default=n},19140,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(11458).__importDefault(e.r(89360));r.default=class{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=i}select(e,t){let{head:r=!1,count:s}=null!=t?t:{},n=!1,a=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!n?"":('"'===e&&(n=!n),e)).join("");return this.url.searchParams.set("select",a),s&&this.headers.append("Prefer",`count=${s}`),new i.default({method:r?"HEAD":"GET",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var s;if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){let t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){let e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!=(s=this.fetch)?s:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:n=!0}={}){var a;if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),void 0!==t&&this.url.searchParams.set("on_conflict",t),s&&this.headers.append("Prefer",`count=${s}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){let t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){let e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!=(a=this.fetch)?a:fetch})}update(e,{count:t}={}){var r;return t&&this.headers.append("Prefer",`count=${t}`),new i.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!=(r=this.fetch)?r:fetch})}delete({count:e}={}){var t;return e&&this.headers.append("Prefer",`count=${e}`),new i.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!=(t=this.fetch)?t:fetch})}}},39139,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(11458),s=i.__importDefault(e.r(19140)),n=i.__importDefault(e.r(89360));class a{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=i}from(e){let t=new URL(`${this.url}/${e}`);return new s.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new a(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:i=!1,count:s}={}){var a;let o,l,h=new URL(`${this.url}/rpc/${e}`);r||i?(o=r?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{h.searchParams.append(e,t)})):(o="POST",l=t);let u=new Headers(this.headers);return s&&u.set("Prefer",`count=${s}`),new n.default({method:o,url:h,headers:u,schema:this.schemaName,body:l,fetch:null!=(a=this.fetch)?a:fetch})}}r.default=a},97367,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PostgrestError=r.PostgrestBuilder=r.PostgrestTransformBuilder=r.PostgrestFilterBuilder=r.PostgrestQueryBuilder=r.PostgrestClient=void 0;let i=e.r(11458),s=i.__importDefault(e.r(39139));r.PostgrestClient=s.default;let n=i.__importDefault(e.r(19140));r.PostgrestQueryBuilder=n.default;let a=i.__importDefault(e.r(89360));r.PostgrestFilterBuilder=a.default;let o=i.__importDefault(e.r(64811));r.PostgrestTransformBuilder=o.default;let l=i.__importDefault(e.r(98575));r.PostgrestBuilder=l.default;let h=i.__importDefault(e.r(94e3));r.PostgrestError=h.default,r.default={PostgrestClient:s.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:h.default}},87122,(e,t,r)=>{var i={675:function(e,t){"use strict";t.byteLength=function(e){var t=l(e),r=t[0],i=t[1];return(r+i)*3/4-i},t.toByteArray=function(e){var t,r,n=l(e),a=n[0],o=n[1],h=new s((a+o)*3/4-o),u=0,c=o>0?a-4:a;for(r=0;r<c;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],h[u++]=t>>16&255,h[u++]=t>>8&255,h[u++]=255&t;return 2===o&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,h[u++]=255&t),1===o&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,h[u++]=t>>8&255,h[u++]=255&t),h},t.fromByteArray=function(e){for(var t,i=e.length,s=i%3,n=[],a=0,o=i-s;a<o;a+=16383)n.push(function(e,t,i){for(var s,n=[],a=t;a<i;a+=3)s=(e[a]<<16&0xff0000)+(e[a+1]<<8&65280)+(255&e[a+2]),n.push(r[s>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return n.join("")}(e,a,a+16383>o?o:a+16383));return 1===s?n.push(r[(t=e[i-1])>>2]+r[t<<4&63]+"=="):2===s&&n.push(r[(t=(e[i-2]<<8)+e[i-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),n.join("")};for(var r=[],i=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,o=n.length;a<o;++a)r[a]=n[a],i[n.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var i=r===t?0:4-r%4;return[r,i]}i[45]=62,i[95]=63},72:function(e,t,r){"use strict";var i=r(675),s=r(783),n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function a(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return u(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e){var i=e,s=t;if(("string"!=typeof s||""===s)&&(s="utf8"),!o.isEncoding(s))throw TypeError("Unknown encoding: "+s);var n=0|f(i,s),l=a(n),h=l.write(i,s);return h!==n&&(l=l.slice(0,h)),l}if(ArrayBuffer.isView(e))return c(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(j(e,ArrayBuffer)||e&&j(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(j(e,SharedArrayBuffer)||e&&j(e.buffer,SharedArrayBuffer)))return function(e,t,r){var i;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(i=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),o.prototype),i}(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var u=e.valueOf&&e.valueOf();if(null!=u&&u!==e)return o.from(u,t,r);var p=function(e){if(o.isBuffer(e)){var t=0|d(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?a(0):c(e):"Buffer"===e.type&&Array.isArray(e.data)?c(e.data):void 0}(e);if(p)return p;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function h(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return h(e),a(e<0?0:0|d(e))}function c(e){for(var t=e.length<0?0:0|d(e.length),r=a(t),i=0;i<t;i+=1)r[i]=255&e[i];return r}t.Buffer=o,t.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=0x7fffffff,o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,r){return(h(e),e<=0)?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)},o.allocUnsafe=function(e){return u(e)},o.allocUnsafeSlow=function(e){return u(e)};function d(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function f(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||j(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;for(var s=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return E(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return A(e).length;default:if(s)return i?-1:E(e).length;t=(""+t).toLowerCase(),s=!0}}function p(e,t,r){var s,n,a,o=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var s="",n=t;n<r;++n)s+=O[e[n]];return s}(this,t,r);case"utf8":case"utf-8":return v(this,t,r);case"ascii":return function(e,t,r){var i="";r=Math.min(e.length,r);for(var s=t;s<r;++s)i+=String.fromCharCode(127&e[s]);return i}(this,t,r);case"latin1":case"binary":return function(e,t,r){var i="";r=Math.min(e.length,r);for(var s=t;s<r;++s)i+=String.fromCharCode(e[s]);return i}(this,t,r);case"base64":return s=this,n=t,a=r,0===n&&a===s.length?i.fromByteArray(s):i.fromByteArray(s.slice(n,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var i=e.slice(t,r),s="",n=0;n<i.length;n+=2)s+=String.fromCharCode(i[n]+256*i[n+1]);return s}(this,t,r);default:if(o)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function m(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function g(e,t,r,i,s){var n;if(0===e.length)return -1;if("string"==typeof r?(i=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(n=r*=1)!=n&&(r=s?0:e.length-1),r<0&&(r=e.length+r),r>=e.length)if(s)return -1;else r=e.length-1;else if(r<0)if(!s)return -1;else r=0;if("string"==typeof t&&(t=o.from(t,i)),o.isBuffer(t))return 0===t.length?-1:y(e,t,r,i,s);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(s)return Uint8Array.prototype.indexOf.call(e,t,r);else return Uint8Array.prototype.lastIndexOf.call(e,t,r);return y(e,[t],r,i,s)}throw TypeError("val must be string, number or Buffer")}function y(e,t,r,i,s){var n,a=1,o=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return -1;a=2,o/=2,l/=2,r/=2}function h(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(s){var u=-1;for(n=r;n<o;n++)if(h(e,n)===h(t,-1===u?0:n-u)){if(-1===u&&(u=n),n-u+1===l)return u*a}else -1!==u&&(n-=n-u),u=-1}else for(r+l>o&&(r=o-l),n=r;n>=0;n--){for(var c=!0,d=0;d<l;d++)if(h(e,n+d)!==h(t,d)){c=!1;break}if(c)return n}return -1}o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(j(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),j(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,i=t.length,s=0,n=Math.min(r,i);s<n;++s)if(e[s]!==t[s]){r=e[s],i=t[s];break}return r<i?-1:+(i<r)},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;var r,i=o.allocUnsafe(t),s=0;for(r=0;r<e.length;++r){var n=e[r];if(j(n,Uint8Array)&&(n=o.from(n)),!o.isBuffer(n))throw TypeError('"list" argument must be an Array of Buffers');n.copy(i,s),s+=n.length}return i},o.byteLength=f,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},o.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?v(this,0,e):p.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(e,t,r,i,s){if(j(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===s&&(s=this.length),t<0||r>e.length||i<0||s>this.length)throw RangeError("out of range index");if(i>=s&&t>=r)return 0;if(i>=s)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,i>>>=0,s>>>=0,this===e)return 0;for(var n=s-i,a=r-t,l=Math.min(n,a),h=this.slice(i,s),u=e.slice(t,r),c=0;c<l;++c)if(h[c]!==u[c]){n=h[c],a=u[c];break}return n<a?-1:+(a<n)},o.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return g(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return g(this,e,t,r,!1)};function v(e,t,r){r=Math.min(e.length,r);for(var i=[],s=t;s<r;){var n,a,o,l,h=e[s],u=null,c=h>239?4:h>223?3:h>191?2:1;if(s+c<=r)switch(c){case 1:h<128&&(u=h);break;case 2:(192&(n=e[s+1]))==128&&(l=(31&h)<<6|63&n)>127&&(u=l);break;case 3:n=e[s+1],a=e[s+2],(192&n)==128&&(192&a)==128&&(l=(15&h)<<12|(63&n)<<6|63&a)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:n=e[s+1],a=e[s+2],o=e[s+3],(192&n)==128&&(192&a)==128&&(192&o)==128&&(l=(15&h)<<18|(63&n)<<12|(63&a)<<6|63&o)>65535&&l<1114112&&(u=l)}null===u?(u=65533,c=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),s+=c}var d=i,f=d.length;if(f<=4096)return String.fromCharCode.apply(String,d);for(var p="",m=0;m<f;)p+=String.fromCharCode.apply(String,d.slice(m,m+=4096));return p}function w(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function b(e,t,r,i,s,n){if(!o.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>s||t<n)throw RangeError('"value" argument is out of bounds');if(r+i>e.length)throw RangeError("Index out of range")}function _(e,t,r,i,s,n){if(r+i>e.length||r<0)throw RangeError("Index out of range")}function x(e,t,r,i,n){return t*=1,r>>>=0,n||_(e,t,r,4,34028234663852886e22,-34028234663852886e22),s.write(e,t,r,i,23,4),r+4}function S(e,t,r,i,n){return t*=1,r>>>=0,n||_(e,t,r,8,17976931348623157e292,-17976931348623157e292),s.write(e,t,r,i,52,8),r+8}o.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s,n,a,o,l,h,u,c,d=this.length-t;if((void 0===r||r>d)&&(r=d),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var f=!1;;)switch(i){case"hex":return function(e,t,r,i){r=Number(r)||0;var s=e.length-r;i?(i=Number(i))>s&&(i=s):i=s;var n=t.length;i>n/2&&(i=n/2);for(var a=0;a<i;++a){var o,l=parseInt(t.substr(2*a,2),16);if((o=l)!=o)break;e[r+a]=l}return a}(this,e,t,r);case"utf8":case"utf-8":return s=t,n=r,P(E(e,this.length-s),this,s,n);case"ascii":return a=t,o=r,P(k(e),this,a,o);case"latin1":case"binary":return function(e,t,r,i){return P(k(t),e,r,i)}(this,e,t,r);case"base64":return l=t,h=r,P(A(e),this,l,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u=t,c=r,P(function(e,t){for(var r,i,s=[],n=0;n<e.length&&!((t-=2)<0);++n)i=(r=e.charCodeAt(n))>>8,s.push(r%256),s.push(i);return s}(e,this.length-u),this,u,c);default:if(f)throw TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),f=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var i=this.subarray(e,t);return Object.setPrototypeOf(i,o.prototype),i},o.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);for(var i=this[e],s=1,n=0;++n<t&&(s*=256);)i+=this[e+n]*s;return i},o.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);for(var i=this[e+--t],s=1;t>0&&(s*=256);)i+=this[e+--t]*s;return i},o.prototype.readUInt8=function(e,t){return e>>>=0,t||w(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||w(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||w(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||w(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||w(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);for(var i=this[e],s=1,n=0;++n<t&&(s*=256);)i+=this[e+n]*s;return i>=(s*=128)&&(i-=Math.pow(2,8*t)),i},o.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);for(var i=t,s=1,n=this[e+--i];i>0&&(s*=256);)n+=this[e+--i]*s;return n>=(s*=128)&&(n-=Math.pow(2,8*t)),n},o.prototype.readInt8=function(e,t){return(e>>>=0,t||w(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||w(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},o.prototype.readInt16BE=function(e,t){e>>>=0,t||w(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||w(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||w(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return e>>>=0,t||w(e,4,this.length),s.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||w(e,4,this.length),s.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||w(e,8,this.length),s.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||w(e,8,this.length),s.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,r,i){if(e*=1,t>>>=0,r>>>=0,!i){var s=Math.pow(2,8*r)-1;b(this,e,t,r,s,0)}var n=1,a=0;for(this[t]=255&e;++a<r&&(n*=256);)this[t+a]=e/n&255;return t+r},o.prototype.writeUIntBE=function(e,t,r,i){if(e*=1,t>>>=0,r>>>=0,!i){var s=Math.pow(2,8*r)-1;b(this,e,t,r,s,0)}var n=r-1,a=1;for(this[t+n]=255&e;--n>=0&&(a*=256);)this[t+n]=e/a&255;return t+r},o.prototype.writeUInt8=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUInt16BE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUInt32LE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUInt32BE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeIntLE=function(e,t,r,i){if(e*=1,t>>>=0,!i){var s=Math.pow(2,8*r-1);b(this,e,t,r,s-1,-s)}var n=0,a=1,o=0;for(this[t]=255&e;++n<r&&(a*=256);)e<0&&0===o&&0!==this[t+n-1]&&(o=1),this[t+n]=(e/a|0)-o&255;return t+r},o.prototype.writeIntBE=function(e,t,r,i){if(e*=1,t>>>=0,!i){var s=Math.pow(2,8*r-1);b(this,e,t,r,s-1,-s)}var n=r-1,a=1,o=0;for(this[t+n]=255&e;--n>=0&&(a*=256);)e<0&&0===o&&0!==this[t+n+1]&&(o=1),this[t+n]=(e/a|0)-o&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeFloatLE=function(e,t,r){return x(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return x(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return S(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return S(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,i){if(!o.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(i<0)throw RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var s=i-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,i);else if(this===e&&r<t&&t<i)for(var n=s-1;n>=0;--n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,i),t);return s},o.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw TypeError("encoding must be a string");if("string"==typeof i&&!o.isEncoding(i))throw TypeError("Unknown encoding: "+i);if(1===e.length){var s,n=e.charCodeAt(0);("utf8"===i&&n<128||"latin1"===i)&&(e=n)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{var a=o.isBuffer(e)?e:o.from(e,i),l=a.length;if(0===l)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<r-t;++s)this[s+t]=a[s%l]}return this};var T=/[^+/0-9A-Za-z-_]/g;function E(e,t){t=t||1/0;for(var r,i=e.length,s=null,n=[],a=0;a<i;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!s){if(r>56319||a+1===i){(t-=3)>-1&&n.push(239,191,189);continue}s=r;continue}if(r<56320){(t-=3)>-1&&n.push(239,191,189),s=r;continue}r=(s-55296<<10|r-56320)+65536}else s&&(t-=3)>-1&&n.push(239,191,189);if(s=null,r<128){if((t-=1)<0)break;n.push(r)}else if(r<2048){if((t-=2)<0)break;n.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;n.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;n.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return n}function k(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function A(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(T,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function P(e,t,r,i){for(var s=0;s<i&&!(s+r>=t.length)&&!(s>=e.length);++s)t[s+r]=e[s];return s}function j(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var O=function(){for(var e="0123456789abcdef",t=Array(256),r=0;r<16;++r)for(var i=16*r,s=0;s<16;++s)t[i+s]=e[r]+e[s];return t}()},783:function(e,t){t.read=function(e,t,r,i,s){var n,a,o=8*s-i-1,l=(1<<o)-1,h=l>>1,u=-7,c=r?s-1:0,d=r?-1:1,f=e[t+c];for(c+=d,n=f&(1<<-u)-1,f>>=-u,u+=o;u>0;n=256*n+e[t+c],c+=d,u-=8);for(a=n&(1<<-u)-1,n>>=-u,u+=i;u>0;a=256*a+e[t+c],c+=d,u-=8);if(0===n)n=1-h;else{if(n===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,i),n-=h}return(f?-1:1)*a*Math.pow(2,n-i)},t.write=function(e,t,r,i,s,n){var a,o,l,h=8*n-s-1,u=(1<<h)-1,c=u>>1,d=5960464477539062e-23*(23===s),f=i?0:n-1,p=i?1:-1,m=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(o=+!!isNaN(t),a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+c>=1?t+=d/l:t+=d*Math.pow(2,1-c),t*l>=2&&(a++,l/=2),a+c>=u?(o=0,a=u):a+c>=1?(o=(t*l-1)*Math.pow(2,s),a+=c):(o=t*Math.pow(2,c-1)*Math.pow(2,s),a=0));s>=8;e[r+f]=255&o,f+=p,o/=256,s-=8);for(a=a<<s|o,h+=s;h>0;e[r+f]=255&a,f+=p,a/=256,h-=8);e[r+f-p]|=128*m}}},s={};function n(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}},a=!0;try{i[e](r,r.exports,n),a=!1}finally{a&&delete s[e]}return r.exports}n.ab="/ROOT/Documents/acquired-taste-landing/node_modules/next/dist/compiled/buffer/",t.exports=n(72)},70688,e=>{"use strict";let t,r,i;var s,n,a,o,l,h,u,c,d,f,p,m,g,y,v,w,b,_,x,S,T,E,k,A,P,j=e.i(85606),O=e.i(89023);let C=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],R=new Set(C),I=e=>180*e/Math.PI,$=e=>N(I(Math.atan2(e[1],e[0]))),D={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:$,rotateZ:$,skewX:e=>I(Math.atan(e[1])),skewY:e=>I(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},N=e=>((e%=360)<0&&(e+=360),e),M=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),U=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),L={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:M,scaleY:U,scale:e=>(M(e)+U(e))/2,rotateX:e=>N(I(Math.atan2(e[6],e[5]))),rotateY:e=>N(I(Math.atan2(-e[2],e[0]))),rotateZ:$,rotate:$,skewX:e=>I(Math.atan(e[4])),skewY:e=>I(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function B(e){return+!!e.includes("scale")}function V(e,t){let r,i;if(!e||"none"===e)return B(t);let s=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);if(s)r=L,i=s;else{let t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=D,i=t}if(!i)return B(t);let n=r[t],a=i[1].split(",").map(F);return"function"==typeof n?n(a):a[n]}function F(e){return parseFloat(e.trim())}let W=e=>t=>"string"==typeof t&&t.startsWith(e),q=W("--"),z=W("var(--"),K=e=>!!z(e)&&H.test(e.split("/*")[0].trim()),H=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function G({top:e,left:t,right:r,bottom:i}){return{x:{min:t,max:r},y:{min:e,max:i}}}let J=(e,t,r)=>e+(t-e)*r;function Y(e){return void 0===e||1===e}function X({scale:e,scaleX:t,scaleY:r}){return!Y(e)||!Y(t)||!Y(r)}function Z(e){return X(e)||Q(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Q(e){var t,r;return(t=e.x)&&"0%"!==t||(r=e.y)&&"0%"!==r}function ee(e,t,r,i,s){return void 0!==s&&(e=i+s*(e-i)),i+r*(e-i)+t}function et(e,t=0,r=1,i,s){e.min=ee(e.min,t,r,i,s),e.max=ee(e.max,t,r,i,s)}function er(e,{x:t,y:r}){et(e.x,t.translate,t.scale,t.originPoint),et(e.y,r.translate,r.scale,r.originPoint)}function ei(e,t){e.min=e.min+t,e.max=e.max+t}function es(e,t,r,i,s=.5){let n=J(e.min,e.max,s);et(e,t,r,n,i)}function en(e,t){es(e.x,t.x,t.scaleX,t.scale,t.originX),es(e.y,t.y,t.scaleY,t.scale,t.originY)}function ea(e,t){return G(function(e,t){if(!t)return e;let r=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:i.y,right:i.x}}(e.getBoundingClientRect(),t))}let eo=new Set(["width","height","top","left","right","bottom",...C]),el=(e,t,r)=>r>t?t:r<e?e:r,eh={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},eu={...eh,transform:e=>el(0,1,e)},ec={...eh,default:1},ed=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),ef=ed("deg"),ep=ed("%"),em=ed("px"),eg=ed("vh"),ey=ed("vw"),ev={...ep,parse:e=>ep.parse(e)/100,transform:e=>ep.transform(100*e)},ew=e=>t=>t.test(e),eb=[eh,em,ep,ef,ey,eg,{test:e=>"auto"===e,parse:e=>e}],e_=e=>eb.find(ew(e));var ex=e.i(18276);let eS=()=>{},eT=()=>{},eE=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u,ek=e=>e===eh||e===em,eA=new Set(["x","y","z"]),eP=C.filter(e=>!eA.has(e)),ej={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>V(t,"x"),y:(e,{transform:t})=>V(t,"y")};ej.translateX=ej.x,ej.translateY=ej.y;let eO=e=>e,eC={},eR=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function eI(e,t){let r=!1,i=!0,s={delta:0,timestamp:0,isProcessing:!1},n=()=>r=!0,a=eR.reduce((e,r)=>(e[r]=function(e,t){let r=new Set,i=new Set,s=!1,n=!1,a=new WeakSet,o={delta:0,timestamp:0,isProcessing:!1},l=0;function h(t){a.has(t)&&(u.schedule(t),e()),l++,t(o)}let u={schedule:(e,t=!1,n=!1)=>{let o=n&&s?r:i;return t&&a.add(e),o.has(e)||o.add(e),e},cancel:e=>{i.delete(e),a.delete(e)},process:e=>{if(o=e,s){n=!0;return}s=!0,[r,i]=[i,r],r.forEach(h),t,l=0,r.clear(),s=!1,n&&(n=!1,u.process(e))}};return u}(n,t?r:void 0),e),{}),{setup:o,read:l,resolveKeyframes:h,preUpdate:u,update:c,preRender:d,render:f,postRender:p}=a,m=()=>{let n=eC.useManualTiming?s.timestamp:performance.now();r=!1,eC.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(n-s.timestamp,40),1)),s.timestamp=n,s.isProcessing=!0,o.process(s),l.process(s),h.process(s),u.process(s),c.process(s),d.process(s),f.process(s),p.process(s),s.isProcessing=!1,r&&t&&(i=!1,e(m))};return{schedule:eR.reduce((t,n)=>{let o=a[n];return t[n]=(t,n=!1,a=!1)=>(!r&&(r=!0,i=!0,s.isProcessing||e(m)),o.schedule(t,n,a)),t},{}),cancel:e=>{for(let t=0;t<eR.length;t++)a[eR[t]].cancel(e)},state:s,steps:a}}let{schedule:e$,cancel:eD,state:eN,steps:eM}=eI("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:eO,!0),eU=new Set,eL=!1,eB=!1,eV=!1;function eF(){if(eB){let e=Array.from(eU).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),r=new Map;t.forEach(e=>{let t,i=(t=[],eP.forEach(r=>{let i=e.getValue(r);void 0!==i&&(t.push([r,i.get()]),i.set(+!!r.startsWith("scale")))}),t);i.length&&(r.set(e,i),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();let t=r.get(e);t&&t.forEach(([t,r])=>{e.getValue(t)?.set(r)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}eB=!1,eL=!1,eU.forEach(e=>e.complete(eV)),eU.clear()}function eW(){eU.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(eB=!0)})}class eq{constructor(e,t,r,i,s,n=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=s,this.isAsync=n}scheduleResolve(){this.state="scheduled",this.isAsync?(eU.add(this),eL||(eL=!0,e$.read(eW),e$.resolveKeyframes(eF))):(this.readKeyframes(),this.complete())}readKeyframes(){let{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;if(null===e[0]){let s=i?.get(),n=e[e.length-1];if(void 0!==s)e[0]=s;else if(r&&t){let i=r.readValue(t,n);null!=i&&(e[0]=i)}void 0===e[0]&&(e[0]=n),i&&void 0===s&&i.set(e[0])}for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),eU.delete(this)}cancel(){"scheduled"===this.state&&(eU.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}let ez=e=>Math.round(1e5*e)/1e5,eK=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,eH=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,eG=(e,t)=>r=>!!("string"==typeof r&&eH.test(r)&&r.startsWith(e)||t&&null!=r&&Object.prototype.hasOwnProperty.call(r,t)),eJ=(e,t,r)=>i=>{if("string"!=typeof i)return i;let[s,n,a,o]=i.match(eK);return{[e]:parseFloat(s),[t]:parseFloat(n),[r]:parseFloat(a),alpha:void 0!==o?parseFloat(o):1}},eY={...eh,transform:e=>Math.round(el(0,255,e))},eX={test:eG("rgb","red"),parse:eJ("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:i=1})=>"rgba("+eY.transform(e)+", "+eY.transform(t)+", "+eY.transform(r)+", "+ez(eu.transform(i))+")"},eZ={test:eG("#"),parse:function(e){let t="",r="",i="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),i=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),i=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,i+=i,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}},transform:eX.transform},eQ={test:eG("hsl","hue"),parse:eJ("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:i=1})=>"hsla("+Math.round(e)+", "+ep.transform(ez(t))+", "+ep.transform(ez(r))+", "+ez(eu.transform(i))+")"},e0={test:e=>eX.test(e)||eZ.test(e)||eQ.test(e),parse:e=>eX.test(e)?eX.parse(e):eQ.test(e)?eQ.parse(e):eZ.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?eX.transform(e):eQ.transform(e),getAnimatableNone:e=>{let t=e0.parse(e);return t.alpha=0,e0.transform(t)}},e1=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,e2="number",e3="color",e5=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function e6(e){let t=e.toString(),r=[],i={color:[],number:[],var:[]},s=[],n=0,a=t.replace(e5,e=>(e0.test(e)?(i.color.push(n),s.push(e3),r.push(e0.parse(e))):e.startsWith("var(")?(i.var.push(n),s.push("var"),r.push(e)):(i.number.push(n),s.push(e2),r.push(parseFloat(e))),++n,"${}")).split("${}");return{values:r,split:a,indexes:i,types:s}}function e8(e){return e6(e).values}function e4(e){let{split:t,types:r}=e6(e),i=t.length;return e=>{let s="";for(let n=0;n<i;n++)if(s+=t[n],void 0!==e[n]){let t=r[n];t===e2?s+=ez(e[n]):t===e3?s+=e0.transform(e[n]):s+=e[n]}return s}}let e9=e=>"number"==typeof e?0:e0.test(e)?e0.getAnimatableNone(e):e,e7={test:function(e){return isNaN(e)&&"string"==typeof e&&(e.match(eK)?.length||0)+(e.match(e1)?.length||0)>0},parse:e8,createTransformer:e4,getAnimatableNone:function(e){let t=e8(e);return e4(e)(t.map(e9))}},te=new Set(["brightness","contrast","saturate","opacity"]);function tt(e){let[t,r]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;let[i]=r.match(eK)||[];if(!i)return e;let s=r.replace(i,""),n=+!!te.has(t);return i!==r&&(n*=100),t+"("+n+s+")"}let tr=/\b([a-z-]*)\(.*?\)/gu,ti={...e7,getAnimatableNone:e=>{let t=e.match(tr);return t?t.map(tt).join(" "):e}},ts={...eh,transform:Math.round},tn={borderWidth:em,borderTopWidth:em,borderRightWidth:em,borderBottomWidth:em,borderLeftWidth:em,borderRadius:em,radius:em,borderTopLeftRadius:em,borderTopRightRadius:em,borderBottomRightRadius:em,borderBottomLeftRadius:em,width:em,maxWidth:em,height:em,maxHeight:em,top:em,right:em,bottom:em,left:em,padding:em,paddingTop:em,paddingRight:em,paddingBottom:em,paddingLeft:em,margin:em,marginTop:em,marginRight:em,marginBottom:em,marginLeft:em,backgroundPositionX:em,backgroundPositionY:em,rotate:ef,rotateX:ef,rotateY:ef,rotateZ:ef,scale:ec,scaleX:ec,scaleY:ec,scaleZ:ec,skew:ef,skewX:ef,skewY:ef,distance:em,translateX:em,translateY:em,translateZ:em,x:em,y:em,z:em,perspective:em,transformPerspective:em,opacity:eu,originX:ev,originY:ev,originZ:em,zIndex:ts,fillOpacity:eu,strokeOpacity:eu,numOctaves:ts},ta={...tn,color:e0,backgroundColor:e0,outlineColor:e0,fill:e0,stroke:e0,borderColor:e0,borderTopColor:e0,borderRightColor:e0,borderBottomColor:e0,borderLeftColor:e0,filter:ti,WebkitFilter:ti},to=e=>ta[e];function tl(e,t){let r=to(e);return r!==ti&&(r=e7),r.getAnimatableNone?r.getAnimatableNone(t):void 0}let th=new Set(["auto","none","0"]);class tu extends eq{constructor(e,t,r,i,s){super(e,t,r,i,s,!0)}readKeyframes(){let{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let r=0;r<e.length;r++){let i=e[r];if("string"==typeof i&&K(i=i.trim())){let s=function e(t,r,i=1){eT(i<=4,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`,"max-css-var-depth");let[s,n]=function(e){let t=eE.exec(e);if(!t)return[,];let[,r,i,s]=t;return[`--${r??i}`,s]}(t);if(!s)return;let a=window.getComputedStyle(r).getPropertyValue(s);if(a){let e=a.trim();return/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e)?parseFloat(e):e}return K(n)?e(n,r,i+1):n}(i,t.current);void 0!==s&&(e[r]=s),r===e.length-1&&(this.finalKeyframe=i)}}if(this.resolveNoneKeyframes(),!eo.has(r)||2!==e.length)return;let[i,s]=e,n=e_(i),a=e_(s);if(n!==a)if(ek(n)&&ek(a))for(let t=0;t<e.length;t++){let r=e[t];"string"==typeof r&&(e[t]=parseFloat(r))}else ej[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){let{unresolvedKeyframes:e,name:t}=this,r=[];for(let t=0;t<e.length;t++)(null===e[t]||function(e){if("number"==typeof e)return 0===e;if(null===e)return!0;return"none"===e||"0"===e||/^0[^.\s]+$/u.test(e)}(e[t]))&&r.push(t);r.length&&function(e,t,r){let i,s=0;for(;s<e.length&&!i;){let t=e[s];"string"==typeof t&&!th.has(t)&&e6(t).values.length&&(i=e[s]),s++}if(i&&r)for(let s of t)e[s]=tl(r,i)}(e,r,t)}measureInitialState(){let{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;"height"===r&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ej[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;let i=t[t.length-1];void 0!==i&&e.getValue(r,i).jump(i,!1)}measureEndState(){let{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;let i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);let s=r.length-1,n=r[s];r[s]=ej[t](e.measureViewportBox(),window.getComputedStyle(e.current)),null!==n&&void 0===this.finalKeyframe&&(this.finalKeyframe=n),this.removedTransforms?.length&&this.removedTransforms.forEach(([t,r])=>{e.getValue(t).set(r)}),this.resolveNoneKeyframes()}}let tc=e=>!!(e&&e.getVelocity);function td(){t=void 0}let tf={now:()=>(void 0===t&&tf.set(eN.isProcessing||eC.useManualTiming?eN.timestamp:performance.now()),t),set:e=>{t=e,queueMicrotask(td)}};function tp(e,t){-1===e.indexOf(t)&&e.push(t)}function tm(e,t){let r=e.indexOf(t);r>-1&&e.splice(r,1)}class tg{constructor(){this.subscriptions=[]}add(e){return tp(this.subscriptions,e),()=>tm(this.subscriptions,e)}notify(e,t,r){let i=this.subscriptions.length;if(i)if(1===i)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){let i=this.subscriptions[s];i&&i(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}class ty{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{let t=tf.now();if(this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(let e of this.dependents)e.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=tf.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=!isNaN(parseFloat(this.current)))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new tg);let r=this.events[e].add(t);return"change"===e?()=>{r(),e$.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(let e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return i&&i.push(this),this.current}getPrevious(){return this.prev}getVelocity(){var e;let t=tf.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||t-this.updatedAt>30)return 0;let r=Math.min(this.updatedAt-this.prevUpdatedAt,30);return e=parseFloat(this.current)-parseFloat(this.prevFrameValue),r?1e3/r*e:0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function tv(e,t){return new ty(e,t)}let tw=[...eb,e0,e7],{schedule:tb}=eI(queueMicrotask,!1),t_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},tx={};for(let e in t_)tx[e]={isEnabled:t=>t_[e].some(e=>!!t[e])};let tS=()=>({translate:0,scale:1,origin:0,originPoint:0}),tT=()=>({x:tS(),y:tS()}),tE=()=>({min:0,max:0}),tk=()=>({x:tE(),y:tE()}),tA="undefined"!=typeof window,tP={current:null},tj={current:!1},tO=new WeakMap;function tC(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}function tR(e){return"string"==typeof e||Array.isArray(e)}let tI=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],t$=["initial",...tI];function tD(e){return tC(e.animate)||t$.some(t=>tR(e[t]))}function tN(e){return!!(tD(e)||e.variants)}function tM(e){let t=[{},{}];return e?.values.forEach((e,r)=>{t[0][r]=e.get(),t[1][r]=e.getVelocity()}),t}function tU(e,t,r,i){if("function"==typeof t){let[s,n]=tM(i);t=t(void 0!==r?r:e.custom,s,n)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){let[s,n]=tM(i);t=t(void 0!==r?r:e.custom,s,n)}return t}let tL=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class tB{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:n},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=eq,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{let e=tf.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,e$.render(this.render,!1,!0))};const{latestValues:o,renderState:l}=n;this.latestValues=o,this.baseTarget={...o},this.initialValues=t.initial?{...o}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=tD(t),this.isVariantNode=tN(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...u}=this.scrapeMotionValuesFromProps(t,{},this);for(const e in u){const t=u[e];void 0!==o[e]&&tc(t)&&t.set(o[e])}}mount(e){this.current=e,tO.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),tj.current||function(){if(tj.current=!0,tA)if(window.matchMedia){let e=window.matchMedia("(prefers-reduced-motion)"),t=()=>tP.current=e.matches;e.addEventListener("change",t),t()}else tP.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||tP.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){for(let e in this.projection&&this.projection.unmount(),eD(this.notifyUpdate),eD(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this),this.events)this.events[e].clear();for(let e in this.features){let t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){let r;this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();let i=R.has(e);i&&this.onBindTransform&&this.onBindTransform();let s=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&e$.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),r&&r(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in tx){let t=tx[e];if(!t)continue;let{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){let t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):tk()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let t=0;t<tL.length;t++){let r=tL[t];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);let i=e["on"+r];i&&(this.propEventSubscriptions[r]=this.on(r,i))}this.prevMotionValues=function(e,t,r){for(let i in t){let s=t[i],n=r[i];if(tc(s))e.addValue(i,s);else if(tc(n))e.addValue(i,tv(s,{owner:e}));else if(n!==s)if(e.hasValue(i)){let t=e.getValue(i);!0===t.liveStyle?t.jump(s):t.hasAnimated||t.set(s)}else{let t=e.getStaticValue(i);e.addValue(i,tv(void 0!==t?t:s,{owner:e}))}}for(let i in r)void 0===t[i]&&e.removeValue(i);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){let t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){let r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);let t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return void 0===r&&void 0!==t&&(r=tv(null===t?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=void 0===this.latestValues[e]&&this.current?this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];if(null!=r){let i,s;if("string"==typeof r&&(i=r,/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(i)||(s=r,/^0[^.\s]+$/u.test(s))))r=parseFloat(r);else{let i;i=r,!tw.find(ew(i))&&e7.test(t)&&(r=tl(e,t))}this.setBaseTarget(e,tc(r)?r.get():r)}return tc(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){let t,{initial:r}=this.props;if("string"==typeof r||"object"==typeof r){let i=tU(this.props,r,this.presenceContext?.custom);i&&(t=i[e])}if(r&&void 0!==t)return t;let i=this.getBaseTargetFromProps(this.props,e);return void 0===i||tc(i)?void 0!==this.initialValues[e]&&void 0===t?void 0:this.baseTarget[e]:i}on(e,t){return this.events[e]||(this.events[e]=new tg),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){tb.render(this.render)}}class tV extends tB{constructor(){super(...arguments),this.KeyframeResolver=tu}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:e}=this.props;tc(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}let tF=(e,t)=>t&&"number"==typeof e?t.transform(e):e,tW={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},tq=C.length;function tz(e,t,r){let{style:i,vars:s,transformOrigin:n}=e,a=!1,o=!1;for(let e in t){let r=t[e];if(R.has(e)){a=!0;continue}if(q(e)){s[e]=r;continue}{let t=tF(r,tn[e]);e.startsWith("origin")?(o=!0,n[e]=t):i[e]=t}}if(!t.transform&&(a||r?i.transform=function(e,t,r){let i="",s=!0;for(let n=0;n<tq;n++){let a=C[n],o=e[a];if(void 0===o)continue;let l=!0;if(!(l="number"==typeof o?o===+!!a.startsWith("scale"):0===parseFloat(o))||r){let e=tF(o,tn[a]);if(!l){s=!1;let t=tW[a]||a;i+=`${t}(${e}) `}r&&(t[a]=e)}}return i=i.trim(),r?i=r(t,s?"":i):s&&(i="none"),i}(t,e.transform,r):i.transform&&(i.transform="none")),o){let{originX:e="50%",originY:t="50%",originZ:r=0}=n;i.transformOrigin=`${e} ${t} ${r}`}}function tK(e,{style:t,vars:r},i,s){let n,a=e.style;for(n in t)a[n]=t[n];for(n in s?.applyProjectionStyles(a,i),r)a.setProperty(n,r[n])}let tH={};function tG(e,{layout:t,layoutId:r}){return R.has(e)||e.startsWith("origin")||(t||void 0!==r)&&(!!tH[e]||"opacity"===e)}function tJ(e,t,r){let{style:i}=e,s={};for(let n in i)(tc(i[n])||t.style&&tc(t.style[n])||tG(n,e)||r?.getValue(n)?.liveStyle!==void 0)&&(s[n]=i[n]);return s}class tY extends tV{constructor(){super(...arguments),this.type="html",this.renderInstance=tK}readValueFromInstance(e,t){if(R.has(t))return this.projection?.isProjecting?B(t):((e,t)=>{let{transform:r="none"}=getComputedStyle(e);return V(r,t)})(e,t);{let r=window.getComputedStyle(e),i=(q(t)?r.getPropertyValue(t):r[t])||0;return"string"==typeof i?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return ea(e,t)}build(e,t,r){tz(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return tJ(e,t,r)}}let tX=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),tZ={offset:"stroke-dashoffset",array:"stroke-dasharray"},tQ={offset:"strokeDashoffset",array:"strokeDasharray"};function t0(e,{attrX:t,attrY:r,attrScale:i,pathLength:s,pathSpacing:n=1,pathOffset:a=0,...o},l,h,u){if(tz(e,o,h),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};let{attrs:c,style:d}=e;c.transform&&(d.transform=c.transform,delete c.transform),(d.transform||c.transformOrigin)&&(d.transformOrigin=c.transformOrigin??"50% 50%",delete c.transformOrigin),d.transform&&(d.transformBox=u?.transformBox??"fill-box",delete c.transformBox),void 0!==t&&(c.x=t),void 0!==r&&(c.y=r),void 0!==i&&(c.scale=i),void 0!==s&&function(e,t,r=1,i=0,s=!0){e.pathLength=1;let n=s?tZ:tQ;e[n.offset]=em.transform(-i);let a=em.transform(t),o=em.transform(r);e[n.array]=`${a} ${o}`}(c,s,n,a,!1)}let t1=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),t2=e=>"string"==typeof e&&"svg"===e.toLowerCase();function t3(e,t,r){let i=tJ(e,t,r);for(let r in e)(tc(e[r])||tc(t[r]))&&(i[-1!==C.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]);return i}class t5 extends tV{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=tk}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(R.has(t)){let e=to(t);return e&&e.default||0}return t=t1.has(t)?t:tX(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return t3(e,t,r)}build(e,t,r){t0(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,i){for(let r in tK(e,t,void 0,i),t.attrs)e.setAttribute(t1.has(r)?r:tX(r),t.attrs[r])}mount(e){this.isSVGTag=t2(e.tagName),super.mount(e)}}let t6=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function t8(e){if("string"!=typeof e||e.includes("-"));else if(t6.indexOf(e)>-1||/[A-Z]/u.test(e))return!0;return!1}let t4=(0,O.createContext)({}),t9=(0,O.createContext)({strict:!1}),t7=(0,O.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),re=(0,O.createContext)({});function rt(e){return Array.isArray(e)?e.join(" "):e}let rr=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ri(e,t,r){for(let i in t)tc(t[i])||tG(i,r)||(e[i]=t[i])}let rs=()=>({...rr(),attrs:{}}),rn=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ra(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||rn.has(e)}let ro=e=>!ra(e);try{s=(()=>{let e=Error("Cannot find module '@emotion/is-prop-valid'");throw e.code="MODULE_NOT_FOUND",e})().default,"function"==typeof s&&(ro=e=>e.startsWith("on")?!ra(e):s(e))}catch{}let rl=(0,O.createContext)(null);function rh(e){return tc(e)?e.get():e}let ru=e=>(t,r)=>{let i,s=(0,O.useContext)(re),n=(0,O.useContext)(rl),a=()=>(function({scrapeMotionValuesFromProps:e,createRenderState:t},r,i,s){return{latestValues:function(e,t,r,i){let s={},n=i(e,{});for(let e in n)s[e]=rh(n[e]);let{initial:a,animate:o}=e,l=tD(e),h=tN(e);t&&h&&!l&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===o&&(o=t.animate));let u=!!r&&!1===r.initial,c=(u=u||!1===a)?o:a;if(c&&"boolean"!=typeof c&&!tC(c)){let t=Array.isArray(c)?c:[c];for(let r=0;r<t.length;r++){let i=tU(e,t[r]);if(i){let{transitionEnd:e,transition:t,...r}=i;for(let e in r){let t=r[e];if(Array.isArray(t)){let e=u?t.length-1:0;t=t[e]}null!==t&&(s[e]=t)}for(let t in e)s[t]=e[t]}}}return s}(r,i,s,e),renderState:t()}})(e,t,s,n);return r?a():(null===(i=(0,O.useRef)(null)).current&&(i.current=a()),i.current)},rc=ru({scrapeMotionValuesFromProps:tJ,createRenderState:rr}),rd=ru({scrapeMotionValuesFromProps:t3,createRenderState:rs}),rf=Symbol.for("motionComponentSymbol");function rp(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}let rm="data-"+tX("framerAppearId"),rg=(0,O.createContext)({}),ry=tA?O.useLayoutEffect:O.useEffect;function rv(e,{forwardMotionProps:t=!1}={},r,i){r&&function(e){for(let t in e)tx[t]={...tx[t],...e[t]}}(r);let s=t8(e)?rd:rc;function n(r,n){var a;let o,l={...(0,O.useContext)(t7),...r,layoutId:function({layoutId:e}){let t=(0,O.useContext)(t4).id;return t&&void 0!==e?t+"-"+e:e}(r)},{isStatic:h}=l,u=function(e){let{initial:t,animate:r}=function(e,t){if(tD(e)){let{initial:t,animate:r}=e;return{initial:!1===t||tR(t)?t:void 0,animate:tR(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,(0,O.useContext)(re));return(0,O.useMemo)(()=>({initial:t,animate:r}),[rt(t),rt(r)])}(r),c=s(r,h);if(!h&&tA){(0,O.useContext)(t9).strict;let t=function(e){let{drag:t,layout:r}=tx;if(!t&&!r)return{};let i={...t,...r};return{MeasureLayout:t?.isEnabled(e)||r?.isEnabled(e)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}(l);o=t.MeasureLayout,u.visualElement=function(e,t,r,i,s){let{visualElement:n}=(0,O.useContext)(re),a=(0,O.useContext)(t9),o=(0,O.useContext)(rl),l=(0,O.useContext)(t7).reducedMotion,h=(0,O.useRef)(null);i=i||a.renderer,!h.current&&i&&(h.current=i(e,{visualState:t,parent:n,props:r,presenceContext:o,blockInitialAnimation:!!o&&!1===o.initial,reducedMotionConfig:l}));let u=h.current,c=(0,O.useContext)(rg);u&&!u.projection&&s&&("html"===u.type||"svg"===u.type)&&function(e,t,r,i){let{layoutId:s,layout:n,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:h,layoutCrossfade:u}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:function e(t){if(t)return!1!==t.options.allowProjection?t.projection:e(t.parent)}(e.parent)),e.projection.setOptions({layoutId:s,layout:n,alwaysMeasureLayout:!!a||o&&rp(o),visualElement:e,animationType:"string"==typeof n?n:"both",initialPromotionConfig:i,crossfade:u,layoutScroll:l,layoutRoot:h})}(h.current,r,s,c);let d=(0,O.useRef)(!1);(0,O.useInsertionEffect)(()=>{u&&d.current&&u.update(r,o)});let f=r[rm],p=(0,O.useRef)(!!f&&!window.MotionHandoffIsComplete?.(f)&&window.MotionHasOptimisedAnimation?.(f));return ry(()=>{u&&(d.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),p.current&&u.animationState&&u.animationState.animateChanges())}),(0,O.useEffect)(()=>{u&&(!p.current&&u.animationState&&u.animationState.animateChanges(),p.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(f)}),p.current=!1),u.enteringChildren=void 0)}),u}(e,c,l,i,t.ProjectionNode)}return(0,j.jsxs)(re.Provider,{value:u,children:[o&&u.visualElement?(0,j.jsx)(o,{visualElement:u.visualElement,...l}):null,function(e,t,r,{latestValues:i},s,n=!1){let a=(t8(e)?function(e,t,r,i){let s=(0,O.useMemo)(()=>{let r=rs();return t0(r,t,t2(i),e.transformTemplate,e.style),{...r.attrs,style:{...r.style}}},[t]);if(e.style){let t={};ri(t,e.style,e),s.style={...t,...s.style}}return s}:function(e,t){let r,i,s={},n=(r=e.style||{},ri(i={},r,e),Object.assign(i,function({transformTemplate:e},t){return(0,O.useMemo)(()=>{let r=rr();return tz(r,t,e),Object.assign({},r.vars,r.style)},[t])}(e,t)),i);return e.drag&&!1!==e.dragListener&&(s.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=!0===e.drag?"none":`pan-${"x"===e.drag?"y":"x"}`),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=n,s})(t,i,s,e),o=function(e,t,r){let i={};for(let s in e)("values"!==s||"object"!=typeof e.values)&&(ro(s)||!0===r&&ra(s)||!t&&!ra(s)||e.draggable&&s.startsWith("onDrag"))&&(i[s]=e[s]);return i}(t,"string"==typeof e,n),l=e!==O.Fragment?{...o,...a,ref:r}:{},{children:h}=t,u=(0,O.useMemo)(()=>tc(h)?h.get():h,[h]);return(0,O.createElement)(e,{...l,children:u})}(e,r,(a=u.visualElement,(0,O.useCallback)(e=>{e&&c.onMount&&c.onMount(e),a&&(e?a.mount(e):a.unmount()),n&&("function"==typeof n?n(e):rp(n)&&(n.current=e))},[a])),c,h,t)]})}n.displayName=`motion.${"string"==typeof e?e:`create(${e.displayName??e.name??""})`}`;let a=(0,O.forwardRef)(n);return a[rf]=e,a}function rw(e,t,r){let i=e.getProps();return tU(i,t,void 0!==r?r:i.custom,e)}function rb(e,t){return e?.[t]??e?.default??e}let r_=e=>Array.isArray(e);function rx(e,t){let r=e.getValue("willChange");if(tc(r)&&r.add)return r.add(t);if(!r&&eC.WillChange){let r=new eC.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function rS(e){e.duration=0,e.type="keyframes"}let rT=(e,t)=>r=>t(e(r)),rE=(...e)=>e.reduce(rT),rk=e=>1e3*e,rA={layout:0,mainThread:0,waapi:0};function rP(e,t,r){return(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(t-e)*6*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function rj(e,t){return r=>r>0?t:e}let rO=(e,t,r)=>{let i=e*e,s=r*(t*t-i)+i;return s<0?0:Math.sqrt(s)},rC=[eZ,eX,eQ];function rR(e){let t=rC.find(t=>t.test(e));if(eS(!!t,`'${e}' is not an animatable color. Use the equivalent color code instead.`,"color-not-animatable"),!t)return!1;let r=t.parse(e);return t===eQ&&(r=function({hue:e,saturation:t,lightness:r,alpha:i}){e/=360,r/=100;let s=0,n=0,a=0;if(t/=100){let i=r<.5?r*(1+t):r+t-r*t,o=2*r-i;s=rP(o,i,e+1/3),n=rP(o,i,e),a=rP(o,i,e-1/3)}else s=n=a=r;return{red:Math.round(255*s),green:Math.round(255*n),blue:Math.round(255*a),alpha:i}}(r)),r}let rI=(e,t)=>{let r=rR(e),i=rR(t);if(!r||!i)return rj(e,t);let s={...r};return e=>(s.red=rO(r.red,i.red,e),s.green=rO(r.green,i.green,e),s.blue=rO(r.blue,i.blue,e),s.alpha=J(r.alpha,i.alpha,e),eX.transform(s))},r$=new Set(["none","hidden"]);function rD(e,t){return r=>J(e,t,r)}function rN(e){return"number"==typeof e?rD:"string"==typeof e?K(e)?rj:e0.test(e)?rI:rL:Array.isArray(e)?rM:"object"==typeof e?e0.test(e)?rI:rU:rj}function rM(e,t){let r=[...e],i=r.length,s=e.map((e,r)=>rN(e)(e,t[r]));return e=>{for(let t=0;t<i;t++)r[t]=s[t](e);return r}}function rU(e,t){let r={...e,...t},i={};for(let s in r)void 0!==e[s]&&void 0!==t[s]&&(i[s]=rN(e[s])(e[s],t[s]));return e=>{for(let t in i)r[t]=i[t](e);return r}}let rL=(e,t)=>{let r=e7.createTransformer(t),i=e6(e),s=e6(t);if(!(i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length))return eS(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`,"complex-values-different"),rj(e,t);if(r$.has(e)&&!s.values.length||r$.has(t)&&!i.values.length)return r$.has(e)?r=>r<=0?e:t:r=>r>=1?t:e;return rE(rM(function(e,t){let r=[],i={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){let n=t.types[s],a=e.indexes[n][i[n]],o=e.values[a]??0;r[s]=o,i[n]++}return r}(i,s),s.values),r)};function rB(e,t,r){return"number"==typeof e&&"number"==typeof t&&"number"==typeof r?J(e,t,r):rN(e)(e,t)}let rV=e=>{let t=({timestamp:t})=>e(t);return{start:(e=!0)=>e$.update(t,e),stop:()=>eD(t),now:()=>eN.isProcessing?eN.timestamp:tf.now()}},rF=(e,t,r=10)=>{let i="",s=Math.max(Math.round(t/r),2);for(let t=0;t<s;t++)i+=Math.round(1e4*e(t/(s-1)))/1e4+", ";return`linear(${i.substring(0,i.length-2)})`};function rW(e){let t=0,r=e.next(t);for(;!r.done&&t<2e4;)t+=50,r=e.next(t);return t>=2e4?1/0:t}function rq(e,t,r){var i,s;let n=Math.max(t-5,0);return i=r-e(n),(s=t-n)?1e3/s*i:0}let rz=.01,rK=2,rH=.005,rG=.5;function rJ(e,t){return e*Math.sqrt(1-t*t)}let rY=["duration","bounce"],rX=["stiffness","damping","mass"];function rZ(e,t){return t.some(t=>void 0!==e[t])}function rQ(e=.3,t=.3){let r,i="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e,{restSpeed:s,restDelta:n}=i,a=i.keyframes[0],o=i.keyframes[i.keyframes.length-1],l={done:!1,value:a},{stiffness:h,damping:u,mass:c,duration:d,velocity:f,isResolvedFromDuration:p}=function(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!rZ(e,rX)&&rZ(e,rY))if(e.visualDuration){let r=2*Math.PI/(1.2*e.visualDuration),i=r*r,s=2*el(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:1,stiffness:i,damping:s}}else{let r=function({duration:e=800,bounce:t=.3,velocity:r=0,mass:i=1}){let s,n;eS(e<=rk(10),"Spring duration must be 10 seconds or less","spring-duration-limit");let a=1-t;a=el(.05,1,a),e=el(.01,10,e/1e3),a<1?(s=t=>{let i=t*a,s=i*e;return .001-(i-r)/rJ(t,a)*Math.exp(-s)},n=t=>{let i=t*a*e,n=Math.pow(a,2)*Math.pow(t,2)*e,o=Math.exp(-i),l=rJ(Math.pow(t,2),a);return(i*r+r-n)*o*(-s(t)+.001>0?-1:1)/l}):(s=t=>-.001+Math.exp(-t*e)*((t-r)*e+1),n=t=>e*e*(r-t)*Math.exp(-t*e));let o=function(e,t,r){let i=r;for(let r=1;r<12;r++)i-=e(i)/t(i);return i}(s,n,5/e);if(e=rk(e),isNaN(o))return{stiffness:100,damping:10,duration:e};{let t=Math.pow(o,2)*i;return{stiffness:t,damping:2*a*Math.sqrt(i*t),duration:e}}}(e);(t={...t,...r,mass:1}).isResolvedFromDuration=!0}return t}({...i,velocity:-((i.velocity||0)/1e3)}),m=f||0,g=u/(2*Math.sqrt(h*c)),y=o-a,v=Math.sqrt(h/c)/1e3,w=5>Math.abs(y);if(s||(s=w?rz:rK),n||(n=w?rH:rG),g<1){let e=rJ(v,g);r=t=>o-Math.exp(-g*v*t)*((m+g*v*y)/e*Math.sin(e*t)+y*Math.cos(e*t))}else if(1===g)r=e=>o-Math.exp(-v*e)*(y+(m+v*y)*e);else{let e=v*Math.sqrt(g*g-1);r=t=>{let r=Math.exp(-g*v*t),i=Math.min(e*t,300);return o-r*((m+g*v*y)*Math.sinh(i)+e*y*Math.cosh(i))/e}}let b={calculatedDuration:p&&d||null,next:e=>{let t=r(e);if(p)l.done=e>=d;else{let i=0===e?m:0;g<1&&(i=0===e?rk(m):rq(r,e,t));let a=Math.abs(o-t)<=n;l.done=Math.abs(i)<=s&&a}return l.value=l.done?o:t,l},toString:()=>{let e=Math.min(rW(b),2e4),t=rF(t=>b.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return b}function r0({keyframes:e,velocity:t=0,power:r=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:n=500,modifyTarget:a,min:o,max:l,restDelta:h=.5,restSpeed:u}){let c,d,f=e[0],p={done:!1,value:f},m=r*t,g=f+m,y=void 0===a?g:a(g);y!==g&&(m=y-f);let v=e=>-m*Math.exp(-e/i),w=e=>y+v(e),b=e=>{let t=v(e),r=w(e);p.done=Math.abs(t)<=h,p.value=p.done?y:r},_=e=>{let t;if(t=p.value,void 0!==o&&t<o||void 0!==l&&t>l){var r;c=e,d=rQ({keyframes:[p.value,(r=p.value,void 0===o?l:void 0===l||Math.abs(o-r)<Math.abs(l-r)?o:l)],velocity:rq(w,e,p.value),damping:s,stiffness:n,restDelta:h,restSpeed:u})}};return _(0),{calculatedDuration:null,next:e=>{let t=!1;return(d||void 0!==c||(t=!0,b(e),_(e)),void 0!==c&&e>=c)?d.next(e-c):(t||b(e),p)}}}rQ.applyToOptions=e=>{let t=function(e,t=100,r){let i=r({...e,keyframes:[0,t]}),s=Math.min(rW(i),2e4);return{type:"keyframes",ease:e=>i.next(s*e).value/t,duration:s/1e3}}(e,100,rQ);return e.ease=t.ease,e.duration=rk(t.duration),e.type="keyframes",e};let r1=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e;function r2(e,t,r,i){return e===t&&r===i?eO:s=>0===s||1===s?s:r1(function(e,t,r,i,s){let n,a,o=0;do(n=r1(a=t+(r-t)/2,i,s)-e)>0?r=a:t=a;while(Math.abs(n)>1e-7&&++o<12)return a}(s,0,1,e,r),t,i)}let r3=r2(.42,0,1,1),r5=r2(0,0,.58,1),r6=r2(.42,0,.58,1),r8=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,r4=e=>t=>1-e(1-t),r9=r2(.33,1.53,.69,.99),r7=r4(r9),ie=r8(r7),it=e=>(e*=2)<1?.5*r7(e):.5*(2-Math.pow(2,-10*(e-1))),ir=e=>1-Math.sin(Math.acos(e)),ii=r4(ir),is=r8(ir),ia=e=>Array.isArray(e)&&"number"==typeof e[0],io={linear:eO,easeIn:r3,easeInOut:r6,easeOut:r5,circIn:ir,circInOut:is,circOut:ii,backIn:r7,backInOut:ie,backOut:r9,anticipate:it},il=e=>{if(ia(e)){eT(4===e.length,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");let[t,r,i,s]=e;return r2(t,r,i,s)}return"string"==typeof e?(eT(void 0!==io[e],`Invalid easing type '${e}'`,"invalid-easing-type"),io[e]):e},ih=(e,t,r)=>{let i=t-e;return 0===i?1:(r-e)/i};function iu({duration:e=300,keyframes:t,times:r,ease:i="easeInOut"}){var s;let n,a=Array.isArray(i)&&"number"!=typeof i[0]?i.map(il):il(i),o={done:!1,value:t[0]},l=function(e,t,{clamp:r=!0,ease:i,mixer:s}={}){let n=e.length;if(eT(n===t.length,"Both input and output ranges must be the same length","range-length"),1===n)return()=>t[0];if(2===n&&t[0]===t[1])return()=>t[1];let a=e[0]===e[1];e[0]>e[n-1]&&(e=[...e].reverse(),t=[...t].reverse());let o=function(e,t,r){let i=[],s=r||eC.mix||rB,n=e.length-1;for(let r=0;r<n;r++){let n=s(e[r],e[r+1]);t&&(n=rE(Array.isArray(t)?t[r]||eO:t,n)),i.push(n)}return i}(t,i,s),l=o.length,h=r=>{if(a&&r<e[0])return t[0];let i=0;if(l>1)for(;i<e.length-2&&!(r<e[i+1]);i++);let s=ih(e[i],e[i+1],r);return o[i](s)};return r?t=>h(el(e[0],e[n-1],t)):h}((s=r&&r.length===t.length?r:(!function(e,t){let r=e[e.length-1];for(let i=1;i<=t;i++){let s=ih(0,t,i);e.push(J(r,1,s))}}(n=[0],t.length-1),n),s.map(t=>t*e)),t,{ease:Array.isArray(a)?a:t.map(()=>a||r6).splice(0,t.length-1)});return{calculatedDuration:e,next:t=>(o.value=l(t),o.done=t>=e,o)}}let ic=e=>null!==e;function id(e,{repeat:t,repeatType:r="loop"},i,s=1){let n=e.filter(ic),a=s<0||t&&"loop"!==r&&t%2==1?0:n.length-1;return a&&void 0!==i?i:n[a]}let ip={decay:r0,inertia:r0,tween:iu,keyframes:iu,spring:rQ};function im(e){"string"==typeof e.type&&(e.type=ip[e.type])}class ig{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}let iy=e=>e/100;class iv extends ig{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{let{motionValue:e}=this.options;e&&e.updatedAt!==tf.now()&&this.tick(tf.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),this.options.onStop?.())},rA.mainThread++,this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){let{options:e}=this;im(e);let{type:t=iu,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:n=0}=e,{keyframes:a}=e,o=t||iu;o!==iu&&"number"!=typeof a[0]&&(this.mixKeyframes=rE(iy,rB(a[0],a[1])),a=[0,100]);let l=o({...e,keyframes:a});"mirror"===s&&(this.mirroredGenerator=o({...e,keyframes:[...a].reverse(),velocity:-n})),null===l.calculatedDuration&&(l.calculatedDuration=rW(l));let{calculatedDuration:h}=l;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=l}updateTime(e){let t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){let{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:n,resolvedDuration:a,calculatedDuration:o}=this;if(null===this.startTime)return r.next(0);let{delay:l=0,keyframes:h,repeat:u,repeatType:c,repeatDelay:d,type:f,onUpdate:p,finalKeyframe:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);let g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?g<0:g>i;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=i);let v=this.currentTime,w=r;if(u){let e=Math.min(this.currentTime,i)/a,t=Math.floor(e),r=e%1;!r&&e>=1&&(r=1),1===r&&t--,(t=Math.min(t,u+1))%2&&("reverse"===c?(r=1-r,d&&(r-=d/a)):"mirror"===c&&(w=n)),v=el(0,1,r)*a}let b=y?{done:!1,value:h[0]}:w.next(v);s&&(b.value=s(b.value));let{done:_}=b;y||null===o||(_=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);let x=null===this.holdTime&&("finished"===this.state||"running"===this.state&&_);return x&&f!==r0&&(b.value=id(h,this.options,m,this.speed)),p&&p(b.value),x&&this.finish(),b}then(e,t){return this.finished.then(e,t)}get duration(){return this.calculatedDuration/1e3}get iterationDuration(){let{delay:e=0}=this.options||{};return this.duration+e/1e3}get time(){return this.currentTime/1e3}set time(e){e=rk(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(tf.now());let t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=this.currentTime/1e3)}play(){if(this.isStopped)return;let{driver:e=rV,startTime:t}=this.options;this.driver||(this.driver=e(e=>this.tick(e))),this.options.onPlay?.();let r=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=r):null!==this.holdTime?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(tf.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,rA.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function iw(e){let t;return()=>(void 0===t&&(t=e()),t)}let ib=iw(()=>void 0!==window.ScrollTimeline),i_={},ix=(r=iw(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0}),()=>i_.linearEasing??r()),iS=([e,t,r,i])=>`cubic-bezier(${e}, ${t}, ${r}, ${i})`,iT={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:iS([0,.65,.55,1]),circOut:iS([.55,0,1,.45]),backIn:iS([.31,.01,.66,-.59]),backOut:iS([.33,1.53,.69,.99])};function iE(e){return"function"==typeof e&&"applyToOptions"in e}class ik extends ig{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:i,pseudoElement:s,allowFlatten:n=!1,finalKeyframe:a,onComplete:o}=e;this.isPseudoElement=!!s,this.allowFlatten=n,this.options=e,eT("string"!=typeof e.type,'Mini animate() doesn\'t support "type" as a string.',"mini-spring");const l=function({type:e,...t}){return iE(e)&&ix()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}(e);this.animation=function(e,t,r,{delay:i=0,duration:s=300,repeat:n=0,repeatType:a="loop",ease:o="easeOut",times:l}={},h){let u={[t]:r};l&&(u.offset=l);let c=function e(t,r){if(t)return"function"==typeof t?ix()?rF(t,r):"ease-out":ia(t)?iS(t):Array.isArray(t)?t.map(t=>e(t,r)||iT.easeOut):iT[t]}(o,s);Array.isArray(c)&&(u.easing=c);let d={delay:i,duration:s,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:n+1,direction:"reverse"===a?"alternate":"normal"};h&&(d.pseudoElement=h);let f=e.animate(u,d);return f}(t,r,i,l,s),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){let e=id(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(e):r.startsWith("--")?t.style.setProperty(r,e):t.style[r]=e,this.animation.cancel()}o?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch(e){}}stop(){if(this.isStopped)return;this.isStopped=!0;let{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){return Number(this.animation.effect?.getComputedTiming?.().duration||0)/1e3}get iterationDuration(){let{delay:e=0}=this.options||{};return this.duration+e/1e3}get time(){return(Number(this.animation.currentTime)||0)/1e3}set time(e){this.finishedTime=null,this.animation.currentTime=rk(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return(this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&ib())?(this.animation.timeline=e,eO):t(this)}}let iA={anticipate:it,backInOut:ie,circInOut:is};class iP extends ik{constructor(e){!function(e){"string"==typeof e.ease&&e.ease in iA&&(e.ease=iA[e.ease])}(e),im(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){let{motionValue:t,onUpdate:r,onComplete:i,element:s,...n}=this.options;if(!t)return;if(void 0!==e)return void t.set(e);let a=new iv({...n,autoplay:!1}),o=rk(this.finishedTime??this.time);t.setWithVelocity(a.sample(o-10).value,a.sample(o).value,10),a.stop()}}let ij=(e,t)=>"zIndex"!==t&&!!("number"==typeof e||Array.isArray(e)||"string"==typeof e&&(e7.test(e)||"0"===e)&&!e.startsWith("url(")),iO=new Set(["opacity","clipPath","filter","transform"]),iC=iw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class iR extends ig{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:n="loop",keyframes:a,name:o,motionValue:l,element:h,...u}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=tf.now();const c={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:s,repeatType:n,name:o,motionValue:l,element:h,...u},d=h?.KeyframeResolver||eq;this.keyframeResolver=new d(a,(e,t,r)=>this.onKeyframesResolved(e,t,c,!r),o,l,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,r,i){this.keyframeResolver=void 0;let{name:s,type:n,velocity:a,delay:o,isHandoff:l,onUpdate:h}=r;this.resolvedAt=tf.now(),!function(e,t,r,i){let s=e[0];if(null===s)return!1;if("display"===t||"visibility"===t)return!0;let n=e[e.length-1],a=ij(s,t),o=ij(n,t);return eS(a===o,`You are trying to animate ${t} from "${s}" to "${n}". "${a?n:s}" is not an animatable value.`,"value-not-animatable"),!!a&&!!o&&(function(e){let t=e[0];if(1===e.length)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}(e)||("spring"===r||iE(r))&&i)}(e,s,n,a)&&((eC.instantAnimations||!o)&&h?.(id(e,r,t)),e[0]=e[e.length-1],rS(r),r.repeat=0);let u={startTime:i?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},c=!l&&function(e){let{motionValue:t,name:r,repeatDelay:i,repeatType:s,damping:n,type:a}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;let{onUpdate:o,transformTemplate:l}=t.owner.getProps();return iC()&&r&&iO.has(r)&&("transform"!==r||!l)&&!o&&!i&&"mirror"!==s&&0!==n&&"inertia"!==a}(u)?new iP({...u,element:u.motionValue.owner.current}):new iv(u);c.finished.then(()=>this.notifyFinished()).catch(eO),this.pendingTimeline&&(this.stopTimeline=c.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=c}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),eV=!0,eW(),eF(),eV=!1),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}let iI=e=>null!==e,i$={type:"spring",stiffness:500,damping:25,restSpeed:10},iD={type:"keyframes",duration:.8},iN={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},iM=(e,t,r,i={},s,n)=>a=>{let o=rb(i,e)||{},l=o.delay||i.delay||0,{elapsed:h=0}=i;h-=rk(l);let u={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-h,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:n?void 0:s};!function({when:e,delay:t,delayChildren:r,staggerChildren:i,staggerDirection:s,repeat:n,repeatType:a,repeatDelay:o,from:l,elapsed:h,...u}){return!!Object.keys(u).length}(o)&&Object.assign(u,((e,{keyframes:t})=>t.length>2?iD:R.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:i$:iN)(e,u)),u.duration&&(u.duration=rk(u.duration)),u.repeatDelay&&(u.repeatDelay=rk(u.repeatDelay)),void 0!==u.from&&(u.keyframes[0]=u.from);let c=!1;if(!1!==u.type&&(0!==u.duration||u.repeatDelay)||(rS(u),0===u.delay&&(c=!0)),(eC.instantAnimations||eC.skipAnimations)&&(c=!0,rS(u),u.delay=0),u.allowFlatten=!o.type&&!o.ease,c&&!n&&void 0!==t.get()){let e=function(e,{repeat:t,repeatType:r="loop"},i){let s=e.filter(iI),n=t&&"loop"!==r&&t%2==1?0:s.length-1;return s[n]}(u.keyframes,o);if(void 0!==e)return void e$.update(()=>{u.onUpdate(e),u.onComplete()})}return o.isSync?new iv(u):new iR(u)};function iU(e,t,{delay:r=0,transitionOverride:i,type:s}={}){let{transition:n=e.getDefaultTransition(),transitionEnd:a,...o}=t;i&&(n=i);let l=[],h=s&&e.animationState&&e.animationState.getState()[s];for(let t in o){let i=e.getValue(t,e.latestValues[t]??null),s=o[t];if(void 0===s||h&&function({protectedKeys:e,needsAnimating:t},r){let i=e.hasOwnProperty(r)&&!0!==t[r];return t[r]=!1,i}(h,t))continue;let a={delay:r,...rb(n||{},t)},u=i.get();if(void 0!==u&&!i.isAnimating&&!Array.isArray(s)&&s===u&&!a.velocity)continue;let c=!1;if(window.MotionHandoffAnimation){let r=e.props[rm];if(r){let e=window.MotionHandoffAnimation(r,t,e$);null!==e&&(a.startTime=e,c=!0)}}rx(e,t),i.start(iM(t,i,s,e.shouldReduceMotion&&eo.has(t)?{type:!1}:a,e,c));let d=i.animation;d&&l.push(d)}return a&&Promise.all(l).then(()=>{e$.update(()=>{a&&function(e,t){let{transitionEnd:r={},transition:i={},...s}=rw(e,t)||{};for(let t in s={...s,...r}){var n;let r=r_(n=s[t])?n[n.length-1]||0:n;e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,tv(r))}}(e,a)})}),l}function iL(e,t,r,i=0,s=1){let n=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),a=e.size,o=(a-1)*i;return"function"==typeof r?r(n,a):1===s?n*i:o-n*i}function iB(e,t,r={}){let i=rw(e,t,"exit"===r.type?e.presenceContext?.custom:void 0),{transition:s=e.getDefaultTransition()||{}}=i||{};r.transitionOverride&&(s=r.transitionOverride);let n=i?()=>Promise.all(iU(e,i,r)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(i=0)=>{let{delayChildren:n=0,staggerChildren:a,staggerDirection:o}=s;return function(e,t,r=0,i=0,s=0,n=1,a){let o=[];for(let l of e.variantChildren)l.notify("AnimationStart",t),o.push(iB(l,t,{...a,delay:r+("function"==typeof i?0:i)+iL(e.variantChildren,l,i,s,n)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}(e,t,i,n,a,o,r)}:()=>Promise.resolve(),{when:o}=s;if(!o)return Promise.all([n(),a(r.delay)]);{let[e,t]="beforeChildren"===o?[n,a]:[a,n];return e().then(()=>t())}}function iV(e,t){if(!Array.isArray(t))return!1;let r=t.length;if(r!==e.length)return!1;for(let i=0;i<r;i++)if(t[i]!==e[i])return!1;return!0}let iF=t$.length,iW=[...tI].reverse(),iq=tI.length;function iz(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function iK(){return{animate:iz(!0),whileInView:iz(),whileHover:iz(),whileTap:iz(),whileDrag:iz(),whileFocus:iz(),exit:iz()}}class iH{constructor(e){this.isMounted=!1,this.node=e}update(){}}let iG=0,iJ={x:!1,y:!1};function iY(e,t,r,i={passive:!0}){return e.addEventListener(t,r,i),()=>e.removeEventListener(t,r)}let iX=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary;function iZ(e){return{point:{x:e.pageX,y:e.pageY}}}function iQ(e,t,r,i){return iY(e,t,e=>iX(e)&&r(e,iZ(e)),i)}function i0(e){return e.max-e.min}function i1(e,t,r,i=.5){e.origin=i,e.originPoint=J(t.min,t.max,e.origin),e.scale=i0(r)/i0(t),e.translate=J(r.min,r.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function i2(e,t,r,i){i1(e.x,t.x,r.x,i?i.originX:void 0),i1(e.y,t.y,r.y,i?i.originY:void 0)}function i3(e,t,r){e.min=r.min+t.min,e.max=e.min+i0(t)}function i5(e,t,r){e.min=t.min-r.min,e.max=e.min+i0(t)}function i6(e,t,r){i5(e.x,t.x,r.x),i5(e.y,t.y,r.y)}function i8(e){return[e("x"),e("y")]}let i4=({current:e})=>e?e.ownerDocument.defaultView:null,i9=(e,t)=>Math.abs(e-t);class i7{constructor(e,t,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:n=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{var e,t;if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let r=sr(this.lastMoveEventInfo,this.history),i=null!==this.startEvent,s=(e=r.offset,t={x:0,y:0},Math.sqrt(i9(e.x,t.x)**2+i9(e.y,t.y)**2)>=this.distanceThreshold);if(!i&&!s)return;let{point:n}=r,{timestamp:a}=eN;this.history.push({...n,timestamp:a});let{onStart:o,onMove:l}=this.handlers;i||(o&&o(this.lastMoveEvent,r),this.startEvent=this.lastMoveEvent),l&&l(this.lastMoveEvent,r)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=se(t,this.transformPagePoint),e$.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();let{onEnd:r,onSessionEnd:i,resumeAnimation:s}=this.handlers;if(this.dragSnapToOrigin&&s&&s(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let n=sr("pointercancel"===e.type?this.lastMoveEventInfo:se(t,this.transformPagePoint),this.history);this.startEvent&&r&&r(e,n),i&&i(e,n)},!iX(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=n,this.contextWindow=i||window;const a=se(iZ(e),this.transformPagePoint),{point:o}=a,{timestamp:l}=eN;this.history=[{...o,timestamp:l}];const{onSessionStart:h}=t;h&&h(e,sr(a,this.history)),this.removeListeners=rE(iQ(this.contextWindow,"pointermove",this.handlePointerMove),iQ(this.contextWindow,"pointerup",this.handlePointerUp),iQ(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),eD(this.updatePoint)}}function se(e,t){return t?{point:t(e.point)}:e}function st(e,t){return{x:e.x-t.x,y:e.y-t.y}}function sr({point:e},t){return{point:e,delta:st(e,si(t)),offset:st(e,t[0]),velocity:function(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,i=null,s=si(e);for(;r>=0&&(i=e[r],!(s.timestamp-i.timestamp>rk(.1)));)r--;if(!i)return{x:0,y:0};let n=(s.timestamp-i.timestamp)/1e3;if(0===n)return{x:0,y:0};let a={x:(s.x-i.x)/n,y:(s.y-i.y)/n};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}(t,.1)}}function si(e){return e[e.length-1]}function ss(e,t,r){return{min:void 0!==t?e.min+t:void 0,max:void 0!==r?e.max+r-(e.max-e.min):void 0}}function sn(e,t){let r=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,i]=[i,r]),{min:r,max:i}}function sa(e,t,r){return{min:so(e,t),max:so(e,r)}}function so(e,t){return"number"==typeof e?e:e[t]||0}let sl=new WeakMap;class sh{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=tk(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){let{presenceContext:i}=this.visualElement;if(i&&!1===i.isPresent)return;let s=e=>{let{dragSnapToOrigin:r}=this.getProps();r?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(iZ(e).point)},n=(e,t)=>{let{drag:r,dragPropagation:i,onDragStart:s}=this.getProps();if(r&&!i&&(this.openDragLock&&this.openDragLock(),this.openDragLock=function(e){if("x"===e||"y"===e)if(iJ[e])return null;else return iJ[e]=!0,()=>{iJ[e]=!1};return iJ.x||iJ.y?null:(iJ.x=iJ.y=!0,()=>{iJ.x=iJ.y=!1})}(r),!this.openDragLock))return;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),i8(e=>{let t=this.getAxisMotionValue(e).get()||0;if(ep.test(t)){let{projection:r}=this.visualElement;if(r&&r.layout){let i=r.layout.layoutBox[e];i&&(t=i0(i)*(parseFloat(t)/100))}}this.originPoint[e]=t}),s&&e$.postRender(()=>s(e,t)),rx(this.visualElement,"transform");let{animationState:n}=this.visualElement;n&&n.setActive("whileDrag",!0)},a=(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;let{dragPropagation:r,dragDirectionLock:i,onDirectionLock:s,onDrag:n}=this.getProps();if(!r&&!this.openDragLock)return;let{offset:a}=t;if(i&&null===this.currentDirection){this.currentDirection=function(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}(a),null!==this.currentDirection&&s&&s(this.currentDirection);return}this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),n&&n(e,t)},o=(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},l=()=>i8(e=>"paused"===this.getAnimationState(e)&&this.getAxisMotionValue(e).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new i7(e,{onSessionStart:s,onStart:n,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:i4(this.visualElement)})}stop(e,t){let r=e||this.latestPointerEvent,i=t||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;let{velocity:n}=i;this.startAnimation(n);let{onDragEnd:a}=this.getProps();a&&e$.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;let{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;let{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){let{drag:i}=this.getProps();if(!r||!su(e,i,this.currentDirection))return;let s=this.getAxisMotionValue(e),n=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(n=function(e,{min:t,max:r},i){return void 0!==t&&e<t?e=i?J(t,e,i.min):Math.max(e,t):void 0!==r&&e>r&&(e=i?J(r,e,i.max):Math.min(e,r)),e}(n,this.constraints[e],this.elastic[e])),s.set(n)}resolveConstraints(){let{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&rp(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=function(e,{top:t,left:r,bottom:i,right:s}){return{x:ss(e.x,r,s),y:ss(e.y,t,i)}}(r.layoutBox,e):this.constraints=!1,this.elastic=function(e=.35){return!1===e?e=0:!0===e&&(e=.35),{x:sa(e,"left","right"),y:sa(e,"top","bottom")}}(t),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&i8(e=>{var t,i;let s;!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=(t=r.layoutBox[e],i=this.constraints[e],s={},void 0!==i.min&&(s.min=i.min-t.min),void 0!==i.max&&(s.max=i.max-t.min),s))})}resolveRefConstraints(){var e;let{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!rp(t))return!1;let i=t.current;eT(null!==i,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");let{projection:s}=this.visualElement;if(!s||!s.layout)return!1;let n=function(e,t,r){let i=ea(e,r),{scroll:s}=t;return s&&(ei(i.x,s.offset.x),ei(i.y,s.offset.y)),i}(i,s.root,this.visualElement.getTransformPagePoint()),a=(e=s.layout.layoutBox,{x:sn(e.x,n.x),y:sn(e.y,n.y)});if(r){let e=r(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(a));this.hasMutatedConstraints=!!e,e&&(a=G(e))}return a}startAnimation(e){let{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:n,onDragTransitionEnd:a}=this.getProps(),o=this.constraints||{};return Promise.all(i8(a=>{if(!su(a,t,this.currentDirection))return;let l=o&&o[a]||{};n&&(l={min:0,max:0});let h={type:"inertia",velocity:r?e[a]:0,bounceStiffness:i?200:1e6,bounceDamping:i?40:1e7,timeConstant:750,restDelta:1,restSpeed:10,...s,...l};return this.startAxisValueAnimation(a,h)})).then(a)}startAxisValueAnimation(e,t){let r=this.getAxisMotionValue(e);return rx(this.visualElement,e),r.start(iM(e,r,0,t,this.visualElement,!1))}stopAnimation(){i8(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){i8(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){let t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps();return r[t]||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){i8(t=>{let{drag:r}=this.getProps();if(!su(t,r,this.currentDirection))return;let{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){let{min:r,max:n}=i.layout.layoutBox[t];s.set(e[t]-J(r,n,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!rp(t)||!r||!this.constraints)return;this.stopAnimation();let i={x:0,y:0};i8(e=>{let t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){var r,s;let n,a,o,l=t.get();i[e]=(r={min:l,max:l},s=this.constraints[e],n=.5,a=i0(r),(o=i0(s))>a?n=ih(s.min,s.max-a,r.min):a>o&&(n=ih(r.min,r.max-o,s.min)),el(0,1,n))}});let{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),i8(t=>{if(!su(t,e,null))return;let r=this.getAxisMotionValue(t),{min:s,max:n}=this.constraints[t];r.set(J(s,n,i[t]))})}addListeners(){if(!this.visualElement.current)return;sl.set(this.visualElement,this);let e=iQ(this.visualElement.current,"pointerdown",e=>{let{drag:t,dragListener:r=!0}=this.getProps();t&&r&&this.start(e)}),t=()=>{let{dragConstraints:e}=this.getProps();rp(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",t);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),e$.read(t);let s=iY(window,"resize",()=>this.scalePositionWithinConstraints()),n=r.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(i8(t=>{let r=this.getAxisMotionValue(t);r&&(this.originPoint[t]+=e[t].translate,r.set(r.get()+e[t].translate))}),this.visualElement.render())});return()=>{s(),e(),i(),n&&n()}}getProps(){let e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:n=.35,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:n,dragMomentum:a}}}function su(e,t,r){return(!0===t||t===e)&&(null===r||r===e)}let sc=e=>(t,r)=>{e&&e$.postRender(()=>e(t,r))};var sd=O;let sf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function sp(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}let sm={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e)if(!em.test(e))return e;else e=parseFloat(e);let r=sp(e,t.target.x),i=sp(e,t.target.y);return`${r}% ${i}%`}},sg=!1;class sy extends sd.Component{componentDidMount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;for(let e in sw)tH[e]=sw[e],q(e)&&(tH[e].isCSSVariable=!0);s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),sg&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),sf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){let{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,{projection:n}=r;return n&&(n.isPresent=s,sg=!0,i||e.layoutDependency!==t||void 0===t||e.isPresent!==s?n.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?n.promote():n.relegate()||e$.postRender(()=>{let e=n.getStack();e&&e.members.length||this.safeToRemove()}))),null}componentDidUpdate(){let{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),tb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;sg=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){let{safeToRemove:e}=this.props;e&&e()}render(){return null}}function sv(e){let[t,r]=function(e=!0){let t=(0,O.useContext)(rl);if(null===t)return[!0,null];let{isPresent:r,onExitComplete:i,register:s}=t,n=(0,O.useId)();(0,O.useEffect)(()=>{if(e)return s(n)},[e]);let a=(0,O.useCallback)(()=>e&&i&&i(n),[n,i,e]);return!r&&i?[!1,a]:[!0]}(),i=(0,sd.useContext)(t4);return(0,j.jsx)(sy,{...e,layoutGroup:i,switchLayoutGroup:(0,sd.useContext)(rg),isPresent:t,safeToRemove:r})}let sw={borderRadius:{...sm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:sm,borderTopRightRadius:sm,borderBottomLeftRadius:sm,borderBottomRightRadius:sm,boxShadow:{correct:(e,{treeScale:t,projectionDelta:r})=>{let i=e7.parse(e);if(i.length>5)return e;let s=e7.createTransformer(e),n=+("number"!=typeof i[0]),a=r.x.scale*t.x,o=r.y.scale*t.y;i[0+n]/=a,i[1+n]/=o;let l=J(a,o,.5);return"number"==typeof i[2+n]&&(i[2+n]/=l),"number"==typeof i[3+n]&&(i[3+n]/=l),s(i)}}};function sb(e){return"object"==typeof e&&null!==e}function s_(e){return sb(e)&&"ownerSVGElement"in e}let sx=(e,t)=>e.depth-t.depth;class sS{constructor(){this.children=[],this.isDirty=!1}add(e){tp(this.children,e),this.isDirty=!0}remove(e){tm(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(sx),this.isDirty=!1,this.children.forEach(e)}}let sT=["TopLeft","TopRight","BottomLeft","BottomRight"],sE=sT.length,sk=e=>"string"==typeof e?parseFloat(e):e,sA=e=>"number"==typeof e||em.test(e);function sP(e,t){return void 0!==e[t]?e[t]:e.borderRadius}let sj=sC(0,.5,ii),sO=sC(.5,.95,eO);function sC(e,t,r){return i=>i<e?0:i>t?1:r(ih(e,t,i))}function sR(e,t){e.min=t.min,e.max=t.max}function sI(e,t){sR(e.x,t.x),sR(e.y,t.y)}function s$(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function sD(e,t,r,i,s){return e-=t,e=i+1/r*(e-i),void 0!==s&&(e=i+1/s*(e-i)),e}function sN(e,t,[r,i,s],n,a){!function(e,t=0,r=1,i=.5,s,n=e,a=e){if(ep.test(t)&&(t=parseFloat(t),t=J(a.min,a.max,t/100)-a.min),"number"!=typeof t)return;let o=J(n.min,n.max,i);e===n&&(o-=t),e.min=sD(e.min,t,r,o,s),e.max=sD(e.max,t,r,o,s)}(e,t[r],t[i],t[s],t.scale,n,a)}let sM=["x","scaleX","originX"],sU=["y","scaleY","originY"];function sL(e,t,r,i){sN(e.x,t,sM,r?r.x:void 0,i?i.x:void 0),sN(e.y,t,sU,r?r.y:void 0,i?i.y:void 0)}function sB(e){return 0===e.translate&&1===e.scale}function sV(e){return sB(e.x)&&sB(e.y)}function sF(e,t){return e.min===t.min&&e.max===t.max}function sW(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function sq(e,t){return sW(e.x,t.x)&&sW(e.y,t.y)}function sz(e){return i0(e.x)/i0(e.y)}function sK(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class sH{constructor(){this.members=[]}add(e){tp(this.members,e),e.scheduleRender()}remove(e){if(tm(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){let e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){let t,r=this.members.findIndex(t=>e===t);if(0===r)return!1;for(let e=r;e>=0;e--){let r=this.members[e];if(!1!==r.isPresent){t=r;break}}return!!t&&(this.promote(t),!0)}promote(e,t){let r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);let{crossfade:i}=e.options;!1===i&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{let{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}let sG=["","X","Y","Z"],sJ=0;function sY(e,t,r,i){let{latestValues:s}=t;s[e]&&(r[e]=s[e],t.setStaticValue(e,0),i&&(i[e]=0))}function sX({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(e={},r=t?.()){this.id=sJ++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(s0),this.nodes.forEach(s4),this.nodes.forEach(s9),this.nodes.forEach(s1)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=r?r.root||r:this,this.path=r?[...r.path,r]:[],this.parent=r,this.depth=r?r.depth+1:0;for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new sS)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new tg),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){let r=this.eventHandlers.get(e);r&&r.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t){if(this.instance)return;this.isSVG=s_(t)&&!(s_(t)&&"svg"===t.tagName),this.instance=t;let{layoutId:r,layout:i,visualElement:s}=this.options;if(s&&!s.current&&s.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(i||r)&&(this.isLayoutDirty=!0),e){let r,i=0,s=()=>this.root.updateBlockedByResize=!1;e$.read(()=>{i=window.innerWidth}),e(t,()=>{let e=window.innerWidth;if(e!==i){let t,n;i=e,this.root.updateBlockedByResize=!0,r&&r(),t=tf.now(),n=({timestamp:e})=>{let r=e-t;r>=250&&(eD(n),s(r-250))},e$.setup(n,!0),r=()=>eD(n),sf.hasAnimatedSinceResize&&(sf.hasAnimatedSinceResize=!1,this.nodes.forEach(s8))}})}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&s&&(r||i)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeLayoutChanged:r,layout:i})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let n=this.options.transition||s.getDefaultTransition()||ns,{onLayoutAnimationStart:a,onLayoutAnimationComplete:o}=s.getProps(),l=!this.targetLayout||!sq(this.targetLayout,i),h=!t&&r;if(this.options.layoutRoot||this.resumeFrom||h||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);let t={...rb(n,"layout"),onPlay:a,onComplete:o};(s.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t),this.setAnimationOrigin(e,h)}else t||s8(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=i})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),eD(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){!this.isUpdateBlocked()&&(this.isUpdating=!0,this.nodes&&this.nodes.forEach(s7),this.animationId++)}getTransformTemplate(){let{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&function e(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;let{visualElement:r}=t.options;if(!r)return;let i=r.props[rm];if(window.MotionHasOptimisedAnimation(i,"transform")){let{layout:e,layoutId:r}=t.options;window.MotionCancelOptimisedAnimation(i,"transform",e$,!(e||r))}let{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&e(s)}(this),this.root.isUpdating||this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let e=0;e<this.path.length;e++){let t=this.path[e];t.shouldResetTransform=!0,t.updateScroll("snapshot"),t.options.layoutRoot&&t.willUpdate(!1)}let{layoutId:t,layout:r}=this.options;if(void 0===t&&!r)return;let i=this.getTransformTemplate();this.prevTransformTemplateValue=i?i(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(s3);return}if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(s5);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(s6),this.nodes.forEach(sZ),this.nodes.forEach(sQ)):this.nodes.forEach(s5),this.clearAllSnapshots();let e=tf.now();eN.delta=el(0,1e3/60,e-eN.timestamp),eN.timestamp=e,eN.isProcessing=!0,eM.update.process(eN),eM.preRender.process(eN),eM.render.process(eN),eN.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,tb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(s2),this.sharedNodes.forEach(ne)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,e$.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){e$.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||i0(this.snapshot.measuredBox.x)||i0(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let e=0;e<this.path.length;e++)this.path[e].updateScroll();let e=this.layout;this.layout=this.measure(!1),this.layoutCorrected=tk(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);let{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){let t=i(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!s)return;let e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!sV(this.projectionDelta),r=this.getTransformTemplate(),i=r?r(this.latestValues,""):void 0,n=i!==this.prevTransformTemplateValue;e&&this.instance&&(t||Z(this.latestValues)||n)&&(s(this.instance,i),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){var t;let r=this.measurePageBox(),i=this.removeElementScroll(r);return e&&(i=this.removeTransform(i)),no((t=i).x),no(t.y),{animationId:this.root.animationId,measuredBox:r,layoutBox:i,latestValues:{},source:this.id}}measurePageBox(){let{visualElement:e}=this.options;if(!e)return tk();let t=e.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(nh))){let{scroll:e}=this.root;e&&(ei(t.x,e.offset.x),ei(t.y,e.offset.y))}return t}removeElementScroll(e){let t=tk();if(sI(t,e),this.scroll?.wasRoot)return t;for(let r=0;r<this.path.length;r++){let i=this.path[r],{scroll:s,options:n}=i;i!==this.root&&s&&n.layoutScroll&&(s.wasRoot&&sI(t,e),ei(t.x,s.offset.x),ei(t.y,s.offset.y))}return t}applyTransform(e,t=!1){let r=tk();sI(r,e);for(let e=0;e<this.path.length;e++){let i=this.path[e];!t&&i.options.layoutScroll&&i.scroll&&i!==i.root&&en(r,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),Z(i.latestValues)&&en(r,i.latestValues)}return Z(this.latestValues)&&en(r,this.latestValues),r}removeTransform(e){let t=tk();sI(t,e);for(let e=0;e<this.path.length;e++){let r=this.path[e];if(!r.instance||!Z(r.latestValues))continue;X(r.latestValues)&&r.updateSnapshot();let i=tk();sI(i,r.measurePageBox()),sL(t,r.latestValues,r.snapshot?r.snapshot.layoutBox:void 0,i)}return Z(this.latestValues)&&sL(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==eN.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){let t=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=t.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=t.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=t.isSharedProjectionDirty);let r=!!this.resumingFrom||this!==t;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;let{layout:i,layoutId:s}=this.options;if(this.layout&&(i||s)){if(this.resolvedRelativeTargetAt=eN.timestamp,!this.targetDelta&&!this.relativeTarget){let e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tk(),this.relativeTargetOrigin=tk(),i6(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),sI(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){if(this.target||(this.target=tk(),this.targetWithTransforms=tk()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target){var n,a,o;this.forceRelativeParentToResolveTarget(),n=this.target,a=this.relativeTarget,o=this.relativeParent.target,i3(n.x,a.x,o.x),i3(n.y,a.y,o.y)}else this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):sI(this.target,this.layout.layoutBox),er(this.target,this.targetDelta)):sI(this.target,this.layout.layoutBox);if(this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;let e=this.getClosestProjectingParent();e&&!!e.resumingFrom==!!this.resumingFrom&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tk(),this.relativeTargetOrigin=tk(),i6(this.relativeTargetOrigin,this.target,e.target),sI(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}}getClosestProjectingParent(){if(!(!this.parent||X(this.parent.latestValues)||Q(this.parent.latestValues)))if(this.parent.isProjecting())return this.parent;else return this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){let e=this.getLead(),t=!!this.resumingFrom||this!==e,r=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(r=!1),t&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===eN.timestamp&&(r=!1),r)return;let{layout:i,layoutId:s}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(i||s))return;sI(this.layoutCorrected,this.layout.layoutBox);let n=this.treeScale.x,a=this.treeScale.y;!function(e,t,r,i=!1){let s,n,a=r.length;if(a){t.x=t.y=1;for(let o=0;o<a;o++){n=(s=r[o]).projectionDelta;let{visualElement:a}=s.options;(!a||!a.props.style||"contents"!==a.props.style.display)&&(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&en(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),n&&(t.x*=n.x.scale,t.y*=n.y.scale,er(e,n)),i&&Z(s.latestValues)&&en(e,s.latestValues))}t.x<1.0000000000001&&t.x>.999999999999&&(t.x=1),t.y<1.0000000000001&&t.y>.999999999999&&(t.y=1)}}(this.layoutCorrected,this.treeScale,this.path,t),e.layout&&!e.target&&(1!==this.treeScale.x||1!==this.treeScale.y)&&(e.target=e.layout.layoutBox,e.targetWithTransforms=tk());let{target:o}=e;if(!o){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}this.projectionDelta&&this.prevProjectionDelta?(s$(this.prevProjectionDelta.x,this.projectionDelta.x),s$(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),i2(this.projectionDelta,this.layoutCorrected,o,this.latestValues),this.treeScale.x===n&&this.treeScale.y===a&&sK(this.projectionDelta.x,this.prevProjectionDelta.x)&&sK(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",o))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){if(this.options.visualElement?.scheduleRender(),e){let e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=tT(),this.projectionDelta=tT(),this.projectionDeltaWithTransform=tT()}setAnimationOrigin(e,t=!1){let r,i=this.snapshot,s=i?i.latestValues:{},n={...this.latestValues},a=tT();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;let o=tk(),l=(i?i.source:void 0)!==(this.layout?this.layout.source:void 0),h=this.getStack(),u=!h||h.members.length<=1,c=!!(l&&!u&&!0===this.options.crossfade&&!this.path.some(ni));this.animationProgress=0,this.mixTargetDelta=t=>{let i=t/1e3;if(nt(a.x,e.x,i),nt(a.y,e.y,i),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout){var h,d,f,p,m,g;i6(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),f=this.relativeTarget,p=this.relativeTargetOrigin,m=o,g=i,nr(f.x,p.x,m.x,g),nr(f.y,p.y,m.y,g),r&&(h=this.relativeTarget,d=r,sF(h.x,d.x)&&sF(h.y,d.y))&&(this.isProjectionDirty=!1),r||(r=tk()),sI(r,this.relativeTarget)}l&&(this.animationValues=n,function(e,t,r,i,s,n){s?(e.opacity=J(0,r.opacity??1,sj(i)),e.opacityExit=J(t.opacity??1,0,sO(i))):n&&(e.opacity=J(t.opacity??1,r.opacity??1,i));for(let s=0;s<sE;s++){let n=`border${sT[s]}Radius`,a=sP(t,n),o=sP(r,n);(void 0!==a||void 0!==o)&&(a||(a=0),o||(o=0),0===a||0===o||sA(a)===sA(o)?(e[n]=Math.max(J(sk(a),sk(o),i),0),(ep.test(o)||ep.test(a))&&(e[n]+="%")):e[n]=o)}(t.rotate||r.rotate)&&(e.rotate=J(t.rotate||0,r.rotate||0,i))}(n,s,this.latestValues,i,c,u)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=i},this.mixTargetDelta(1e3*!!this.options.layoutRoot)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(eD(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=e$.update(()=>{var t,r,i;let s;sf.hasAnimatedSinceResize=!0,rA.layout++,this.motionValue||(this.motionValue=tv(0)),this.currentAnimation=(t=this.motionValue,r=[0,1e3],i={...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{rA.layout--},onComplete:()=>{rA.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}},(s=tc(t)?t:tv(t)).start(iM("",s,r,i)),s.animation),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let e=this.getLead(),{targetWithTransforms:t,target:r,layout:i,latestValues:s}=e;if(t&&r&&i){if(this!==e&&this.layout&&i&&nl(this.options.animationType,this.layout.layoutBox,i.layoutBox)){r=this.target||tk();let t=i0(this.layout.layoutBox.x);r.x.min=e.target.x.min,r.x.max=r.x.min+t;let i=i0(this.layout.layoutBox.y);r.y.min=e.target.y.min,r.y.max=r.y.min+i}sI(t,r),en(t,s),i2(this.projectionDeltaWithTransform,this.layoutCorrected,t,s)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new sH),this.sharedNodes.get(e).add(t);let r=t.options.initialPromotionConfig;t.promote({transition:r?r.transition:void 0,preserveFollowOpacity:r&&r.shouldPreserveFollowOpacity?r.shouldPreserveFollowOpacity(t):void 0})}isLead(){let e=this.getStack();return!e||e.lead===this}getLead(){let{layoutId:e}=this.options;return e&&this.getStack()?.lead||this}getPrevLead(){let{layoutId:e}=this.options;return e?this.getStack()?.prevLead:void 0}getStack(){let{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:r}={}){let i=this.getStack();i&&i.promote(this,r),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){let e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){let{visualElement:e}=this.options;if(!e)return;let t=!1,{latestValues:r}=e;if((r.z||r.rotate||r.rotateX||r.rotateY||r.rotateZ||r.skewX||r.skewY)&&(t=!0),!t)return;let i={};r.z&&sY("z",e,i,this.animationValues);for(let t=0;t<sG.length;t++)sY(`rotate${sG[t]}`,e,i,this.animationValues),sY(`skew${sG[t]}`,e,i,this.animationValues);for(let t in e.render(),i)e.setStaticValue(t,i[t]),this.animationValues&&(this.animationValues[t]=i[t]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible){e.visibility="hidden";return}let r=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=rh(t?.pointerEvents)||"",e.transform=r?r(this.latestValues,""):"none";return}let i=this.getLead();if(!this.projectionDelta||!this.layout||!i.target){this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=rh(t?.pointerEvents)||""),this.hasProjected&&!Z(this.latestValues)&&(e.transform=r?r({},""):"none",this.hasProjected=!1);return}e.visibility="";let s=i.animationValues||i.latestValues;this.applyTransformsToTarget();let n=function(e,t,r){let i="",s=e.x.translate/t.x,n=e.y.translate/t.y,a=r?.z||0;if((s||n||a)&&(i=`translate3d(${s}px, ${n}px, ${a}px) `),(1!==t.x||1!==t.y)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),r){let{transformPerspective:e,rotate:t,rotateX:s,rotateY:n,skewX:a,skewY:o}=r;e&&(i=`perspective(${e}px) ${i}`),t&&(i+=`rotate(${t}deg) `),s&&(i+=`rotateX(${s}deg) `),n&&(i+=`rotateY(${n}deg) `),a&&(i+=`skewX(${a}deg) `),o&&(i+=`skewY(${o}deg) `)}let o=e.x.scale*t.x,l=e.y.scale*t.y;return(1!==o||1!==l)&&(i+=`scale(${o}, ${l})`),i||"none"}(this.projectionDeltaWithTransform,this.treeScale,s);r&&(n=r(s,n)),e.transform=n;let{x:a,y:o}=this.projectionDelta;for(let t in e.transformOrigin=`${100*a.origin}% ${100*o.origin}% 0`,i.animationValues?e.opacity=i===this?s.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:e.opacity=i===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0,tH){if(void 0===s[t])continue;let{correct:r,applyTo:a,isCSSVariable:o}=tH[t],l="none"===n?s[t]:r(s[t],i);if(a){let t=a.length;for(let r=0;r<t;r++)e[a[r]]=l}else o?this.options.visualElement.renderState.vars[t]=l:e[t]=l}this.options.layoutId&&(e.pointerEvents=i===this?rh(t?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>e.currentAnimation?.stop()),this.root.nodes.forEach(s3),this.root.sharedNodes.clear()}}}function sZ(e){e.updateLayout()}function sQ(e){let t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){let{layoutBox:r,measuredBox:i}=e.layout,{animationType:s}=e.options,n=t.source!==e.layout.source;"size"===s?i8(e=>{let i=n?t.measuredBox[e]:t.layoutBox[e],s=i0(i);i.min=r[e].min,i.max=i.min+s}):nl(s,t.layoutBox,r)&&i8(i=>{let s=n?t.measuredBox[i]:t.layoutBox[i],a=i0(r[i]);s.max=s.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[i].max=e.relativeTarget[i].min+a)});let a=tT();i2(a,r,t.layoutBox);let o=tT();n?i2(o,e.applyTransform(i,!0),t.measuredBox):i2(o,r,t.layoutBox);let l=!sV(a),h=!1;if(!e.resumeFrom){let i=e.getClosestProjectingParent();if(i&&!i.resumeFrom){let{snapshot:s,layout:n}=i;if(s&&n){let a=tk();i6(a,t.layoutBox,s.layoutBox);let o=tk();i6(o,r,n.layoutBox),sq(a,o)||(h=!0),i.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=a,e.relativeParent=i)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:o,layoutDelta:a,hasLayoutChanged:l,hasRelativeLayoutChanged:h})}else if(e.isLead()){let{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function s0(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function s1(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function s2(e){e.clearSnapshot()}function s3(e){e.clearMeasurements()}function s5(e){e.isLayoutDirty=!1}function s6(e){let{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function s8(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function s4(e){e.resolveTargetDelta()}function s9(e){e.calcProjection()}function s7(e){e.resetSkewAndRotation()}function ne(e){e.removeLeadSnapshot()}function nt(e,t,r){e.translate=J(t.translate,0,r),e.scale=J(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function nr(e,t,r,i){e.min=J(t.min,r.min,i),e.max=J(t.max,r.max,i)}function ni(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}let ns={duration:.45,ease:[.4,0,.1,1]},nn=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),na=nn("applewebkit/")&&!nn("chrome/")?Math.round:eO;function no(e){e.min=na(e.min),e.max=na(e.max)}function nl(e,t,r){return"position"===e||"preserve-aspect"===e&&!(.2>=Math.abs(sz(t)-sz(r)))}function nh(e){return e!==e.root&&e.scroll?.wasRoot}let nu=sX({attachResizeListener:(e,t)=>iY(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),nc={current:void 0},nd=sX({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!nc.current){let e=new nu({});e.mount(window),e.setOptions({layoutScroll:!0}),nc.current=e}return nc.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>"fixed"===window.getComputedStyle(e).position});function nf(e,t){let r=function(e,t,r){if(e instanceof EventTarget)return[e];if("string"==typeof e){let t=document,r=(void 0)??t.querySelectorAll(e);return r?Array.from(r):[]}return Array.from(e)}(e),i=new AbortController;return[r,{passive:!0,...t,signal:i.signal},()=>i.abort()]}function np(e){return!("touch"===e.pointerType||iJ.x||iJ.y)}function nm(e,t,r){let{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover","Start"===r);let s=i["onHover"+r];s&&e$.postRender(()=>s(t,iZ(t)))}let ng=(e,t)=>!!t&&(e===t||ng(e,t.parentElement)),ny=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]),nv=new WeakSet;function nw(e){return t=>{"Enter"===t.key&&e(t)}}function nb(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function n_(e){return iX(e)&&!(iJ.x||iJ.y)}function nx(e,t,r){let{props:i}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap","Start"===r);let s=i["onTap"+("End"===r?"":r)];s&&e$.postRender(()=>s(t,iZ(t)))}let nS=new WeakMap,nT=new WeakMap,nE=e=>{let t=nS.get(e.target);t&&t(e)},nk=e=>{e.forEach(nE)},nA={some:0,all:1},nP=function(e,t){if("undefined"==typeof Proxy)return rv;let r=new Map,i=(r,i)=>rv(r,i,e,t);return new Proxy((e,t)=>i(e,t),{get:(s,n)=>"create"===n?i:(r.has(n)||r.set(n,rv(n,void 0,e,t)),r.get(n))})}({animation:{Feature:class extends iH{constructor(e){super(e),e.animationState||(e.animationState=function(e){let t=t=>Promise.all(t.map(({animation:t,options:r})=>(function(e,t,r={}){let i;if(e.notify("AnimationStart",t),Array.isArray(t))i=Promise.all(t.map(t=>iB(e,t,r)));else if("string"==typeof t)i=iB(e,t,r);else{let s="function"==typeof t?rw(e,t,r.custom):t;i=Promise.all(iU(e,s,r))}return i.then(()=>{e.notify("AnimationComplete",t)})})(e,t,r))),r=iK(),i=!0,s=t=>(r,i)=>{let s=rw(e,i,"exit"===t?e.presenceContext?.custom:void 0);if(s){let{transition:e,transitionEnd:t,...i}=s;r={...r,...i,...t}}return r};function n(n){let{props:a}=e,o=function e(t){if(!t)return;if(!t.isControllingVariants){let r=t.parent&&e(t.parent)||{};return void 0!==t.props.initial&&(r.initial=t.props.initial),r}let r={};for(let e=0;e<iF;e++){let i=t$[e],s=t.props[i];(tR(s)||!1===s)&&(r[i]=s)}return r}(e.parent)||{},l=[],h=new Set,u={},c=1/0;for(let t=0;t<iq;t++){var d,f;let p=iW[t],m=r[p],g=void 0!==a[p]?a[p]:o[p],y=tR(g),v=p===n?m.isActive:null;!1===v&&(c=t);let w=g===o[p]&&g!==a[p]&&y;if(w&&i&&e.manuallyAnimateOnMount&&(w=!1),m.protectedKeys={...u},!m.isActive&&null===v||!g&&!m.prevProp||tC(g)||"boolean"==typeof g)continue;let b=(d=m.prevProp,"string"==typeof(f=g)?f!==d:!!Array.isArray(f)&&!iV(f,d)),_=b||p===n&&m.isActive&&!w&&y||t>c&&y,x=!1,S=Array.isArray(g)?g:[g],T=S.reduce(s(p),{});!1===v&&(T={});let{prevResolvedValues:E={}}=m,k={...E,...T},A=t=>{_=!0,h.has(t)&&(x=!0,h.delete(t)),m.needsAnimating[t]=!0;let r=e.getValue(t);r&&(r.liveStyle=!1)};for(let e in k){let t=T[e],r=E[e];if(!u.hasOwnProperty(e))(r_(t)&&r_(r)?iV(t,r):t===r)?void 0!==t&&h.has(e)?A(e):m.protectedKeys[e]=!0:null!=t?A(e):h.add(e)}m.prevProp=g,m.prevResolvedValues=T,m.isActive&&(u={...u,...T}),i&&e.blockInitialAnimation&&(_=!1);let P=w&&b,j=!P||x;_&&j&&l.push(...S.map(t=>{let r={type:p};if("string"==typeof t&&i&&!P&&e.manuallyAnimateOnMount&&e.parent){let{parent:i}=e,s=rw(i,t);if(i.enteringChildren&&s){let{delayChildren:t}=s.transition||{};r.delay=iL(i.enteringChildren,e,t)}}return{animation:t,options:r}}))}if(h.size){let t={};if("boolean"!=typeof a.initial){let r=rw(e,Array.isArray(a.initial)?a.initial[0]:a.initial);r&&r.transition&&(t.transition=r.transition)}h.forEach(r=>{let i=e.getBaseTarget(r),s=e.getValue(r);s&&(s.liveStyle=!0),t[r]=i??null}),l.push({animation:t})}let p=!!l.length;return i&&(!1===a.initial||a.initial===a.animate)&&!e.manuallyAnimateOnMount&&(p=!1),i=!1,p?t(l):Promise.resolve()}return{animateChanges:n,setActive:function(t,i){if(r[t].isActive===i)return Promise.resolve();e.variantChildren?.forEach(e=>e.animationState?.setActive(t,i)),r[t].isActive=i;let s=n(t);for(let e in r)r[e].protectedKeys={};return s},setAnimateFunction:function(r){t=r(e)},getState:()=>r,reset:()=>{r=iK()}}}(e))}updateAnimationControlsSubscription(){let{animate:e}=this.node.getProps();tC(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}},exit:{Feature:class extends iH{constructor(){super(...arguments),this.id=iG++}update(){if(!this.node.presenceContext)return;let{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;let i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){let{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}},inView:{Feature:class extends iH{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){var e;let t;this.unmount();let{viewport:r={}}=this.node.getProps(),{root:i,margin:s,amount:n="some",once:a}=r,o={root:i?i.current:void 0,rootMargin:s,threshold:"number"==typeof n?n:nA[n]},l=e=>{let{isIntersecting:t}=e;if(this.isInView===t||(this.isInView=t,a&&!t&&this.hasEnteredView))return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);let{onViewportEnter:r,onViewportLeave:i}=this.node.getProps(),s=t?r:i;s&&s(e)};return e=this.node.current,t=function({root:e,...t}){let r=e||document;nT.has(r)||nT.set(r,{});let i=nT.get(r),s=JSON.stringify(t);return i[s]||(i[s]=new IntersectionObserver(nk,{root:e,...t})),i[s]}(o),nS.set(e,l),t.observe(e),()=>{nS.delete(e),t.unobserve(e)}}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;let{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}(e,t))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends iH{mount(){let{current:e}=this.node;e&&(this.unmount=function(e,t,r={}){let[i,s,n]=nf(e,r),a=e=>{let i=e.currentTarget;if(!n_(e))return;nv.add(i);let n=t(i,e),a=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),nv.has(i)&&nv.delete(i),n_(e)&&"function"==typeof n&&n(e,{success:t})},o=e=>{a(e,i===window||i===document||r.useGlobalTarget||ng(i,e.target))},l=e=>{a(e,!1)};window.addEventListener("pointerup",o,s),window.addEventListener("pointercancel",l,s)};return i.forEach(e=>{(r.useGlobalTarget?window:e).addEventListener("pointerdown",a,s),sb(e)&&"offsetHeight"in e&&(e.addEventListener("focus",e=>((e,t)=>{let r=e.currentTarget;if(!r)return;let i=nw(()=>{if(nv.has(r))return;nb(r,"down");let e=nw(()=>{nb(r,"up")});r.addEventListener("keyup",e,t),r.addEventListener("blur",()=>nb(r,"cancel"),t)});r.addEventListener("keydown",i,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",i),t)})(e,s)),ny.has(e.tagName)||-1!==e.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))}),n}(e,(e,t)=>(nx(this.node,t,"Start"),(e,{success:t})=>nx(this.node,e,t?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends iH{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=rE(iY(this.node.current,"focus",()=>this.onFocus()),iY(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends iH{mount(){let{current:e}=this.node;e&&(this.unmount=function(e,t,r={}){let[i,s,n]=nf(e,r),a=e=>{if(!np(e))return;let{target:r}=e,i=t(r,e);if("function"!=typeof i||!r)return;let n=e=>{np(e)&&(i(e),r.removeEventListener("pointerleave",n))};r.addEventListener("pointerleave",n,s)};return i.forEach(e=>{e.addEventListener("pointerenter",a,s)}),n}(e,(e,t)=>(nm(this.node,t,"Start"),e=>nm(this.node,e,"End"))))}unmount(){}}},pan:{Feature:class extends iH{constructor(){super(...arguments),this.removePointerDownListener=eO}onPointerDown(e){this.session=new i7(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:i4(this.node)})}createPanHandlers(){let{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:sc(e),onStart:sc(t),onMove:r,onEnd:(e,t)=>{delete this.session,i&&e$.postRender(()=>i(e,t))}}}mount(){this.removePointerDownListener=iQ(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends iH{constructor(e){super(e),this.removeGroupControls=eO,this.removeListeners=eO,this.controls=new sh(e)}mount(){let{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||eO}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:nd,MeasureLayout:sv},layout:{ProjectionNode:nd,MeasureLayout:sv}},(e,t)=>t8(e)?new t5(t):new tY(t,{allowProjection:e!==O.Fragment})),nj=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},nO=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var nC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let nR=(0,O.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:s="",children:n,iconNode:a,...o},l)=>(0,O.createElement)("svg",{ref:l,...nC,width:t,height:t,stroke:e,strokeWidth:i?24*Number(r)/Number(t):r,className:nO("lucide",s),...!n&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(o)&&{"aria-hidden":"true"},...o},[...a.map(([e,t])=>(0,O.createElement)(e,t)),...Array.isArray(n)?n:[n]])),nI=(e,t)=>{let r=(0,O.forwardRef)(({className:r,...i},s)=>(0,O.createElement)(nR,{ref:s,iconNode:t,className:nO(`lucide-${nj(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...i}));return r.displayName=nj(e),r},n$=nI("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),nD=nI("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),nN=nI("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),nM=nI("map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);var nU=e.i(11458);class nL extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class nB extends nL{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class nV extends nL{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class nF extends nL{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}(n=g||(g={})).Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2";class nW{constructor(t,{headers:r={},customFetch:i,region:s=g.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=(t=>{let r;return r=t||("undefined"==typeof fetch?(...t)=>e.A(64044).then(({default:e})=>e(...t)):fetch),(...e)=>r(...e)})(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return(0,nU.__awaiter)(this,arguments,void 0,function*(e,t={}){var r;try{let i,{headers:s,method:n,body:a,signal:o}=t,l={},{region:h}=t;h||(h=this.region);let u=new URL(`${this.url}/${e}`);h&&"any"!==h&&(l["x-region"]=h,u.searchParams.set("forceFunctionRegion",h)),a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?"undefined"!=typeof Blob&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",i=a):"string"==typeof a?(l["Content-Type"]="text/plain",i=a):"undefined"!=typeof FormData&&a instanceof FormData?i=a:(l["Content-Type"]="application/json",i=JSON.stringify(a)):i=a;let c=yield this.fetch(u.toString(),{method:n||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:i,signal:o}).catch(e=>{if("AbortError"===e.name)throw e;throw new nB(e)}),d=c.headers.get("x-relay-error");if(d&&"true"===d)throw new nV(c);if(!c.ok)throw new nF(c);let f=(null!=(r=c.headers.get("Content-Type"))?r:"text/plain").split(";")[0].trim();return{data:"application/json"===f?yield c.json():"application/octet-stream"===f||"application/pdf"===f?yield c.blob():"text/event-stream"===f?c:"multipart/form-data"===f?yield c.formData():yield c.text(),error:null,response:c}}catch(e){if(e instanceof Error&&"AbortError"===e.name)return{data:null,error:new nB(e)};return{data:null,error:e,response:e instanceof nF||e instanceof nV?e.context:void 0}}})}}var nq=e.i(97367);let{PostgrestClient:nz,PostgrestQueryBuilder:nK,PostgrestFilterBuilder:nH,PostgrestTransformBuilder:nG,PostgrestBuilder:nJ,PostgrestError:nY}=nq.default||nq,nX=class{static detectEnvironment(){var t;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if(void 0!==e.g.WebSocket)return{type:"native",constructor:e.g.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null==(t=navigator.userAgent)?void 0:t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(void 0!==ex.default){let e=ex.default.versions;if(e&&e.node){let t=parseInt(e.node.replace(/^v/,"").split(".")[0]);return t>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{let e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}};(a=y||(y={}))[a.connecting=0]="connecting",a[a.open=1]="open",a[a.closing=2]="closing",a[a.closed=3]="closed",(o=v||(v={})).closed="closed",o.errored="errored",o.joined="joined",o.joining="joining",o.leaving="leaving",(l=w||(w={})).close="phx_close",l.error="phx_error",l.join="phx_join",l.reply="phx_reply",l.leave="phx_leave",l.access_token="access_token",(b||(b={})).websocket="websocket",(h=_||(_={})).Connecting="connecting",h.Open="open",h.Closing="closing",h.Closed="closed";class nZ{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):"string"==typeof e?t(JSON.parse(e)):t({})}_binaryDecode(e){let t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){let i=t.getUint8(1),s=t.getUint8(2),n=this.HEADER_LENGTH+2,a=r.decode(e.slice(n,n+i));n+=i;let o=r.decode(e.slice(n,n+s));return n+=s,{ref:null,topic:a,event:o,payload:JSON.parse(r.decode(e.slice(n,e.byteLength)))}}}class nQ{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(u=x||(x={})).abstime="abstime",u.bool="bool",u.date="date",u.daterange="daterange",u.float4="float4",u.float8="float8",u.int2="int2",u.int4="int4",u.int4range="int4range",u.int8="int8",u.int8range="int8range",u.json="json",u.jsonb="jsonb",u.money="money",u.numeric="numeric",u.oid="oid",u.reltime="reltime",u.text="text",u.time="time",u.timestamp="timestamp",u.timestamptz="timestamptz",u.timetz="timetz",u.tsrange="tsrange",u.tstzrange="tstzrange";let n0=(e,t,r={})=>{var i;let s=null!=(i=r.skipTypes)?i:[];return t?Object.keys(t).reduce((r,i)=>(r[i]=n1(i,e,t,s),r),{}):{}},n1=(e,t,r,i)=>{let s=t.find(t=>t.name===e),n=null==s?void 0:s.type,a=r[e];return n&&!i.includes(n)?n2(n,a):n3(a)},n2=(e,t)=>{if("_"===e.charAt(0))return n4(t,e.slice(1,e.length));switch(e){case x.bool:return n5(t);case x.float4:case x.float8:case x.int2:case x.int4:case x.int8:case x.numeric:case x.oid:return n6(t);case x.json:case x.jsonb:return n8(t);case x.timestamp:return n9(t);case x.abstime:case x.date:case x.daterange:case x.int4range:case x.int8range:case x.money:case x.reltime:case x.text:case x.time:case x.timestamptz:case x.timetz:case x.tsrange:case x.tstzrange:default:return n3(t)}},n3=e=>e,n5=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},n6=e=>{if("string"==typeof e){let t=parseFloat(e);if(!Number.isNaN(t))return t}return e},n8=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(e){console.log(`JSON parse error: ${e}`)}return e},n4=(e,t)=>{if("string"!=typeof e)return e;let r=e.length-1,i=e[r];if("{"===e[0]&&"}"===i){let i,s=e.slice(1,r);try{i=JSON.parse("["+s+"]")}catch(e){i=s?s.split(","):[]}return i.map(e=>n2(t,e))}return e},n9=e=>"string"==typeof e?e.replace(" ","T"):e,n7=e=>{let t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===t.pathname||"/"===t.pathname?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class ae{constructor(e,t,r={},i=1e4){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null==(r=this.receivedResp)?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let e=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}(c=S||(S={})).SYNC="sync",c.JOIN="join",c.LEAVE="leave";class at{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{let{onJoin:t,onLeave:r,onSync:i}=this.caller;this.joinRef=this.channel._joinRef(),this.state=at.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=at.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],i()}),this.channel._on(r.diff,{},e=>{let{onJoin:t,onLeave:r,onSync:i}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=at.syncDiff(this.state,e,t,r),i())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){let s=this.cloneDeep(e),n=this.transformState(t),a={},o={};return this.map(s,(e,t)=>{n[e]||(o[e]=t)}),this.map(n,(e,t)=>{let r=s[e];if(r){let i=t.map(e=>e.presence_ref),s=r.map(e=>e.presence_ref),n=t.filter(e=>0>s.indexOf(e.presence_ref)),l=r.filter(e=>0>i.indexOf(e.presence_ref));n.length>0&&(a[e]=n),l.length>0&&(o[e]=l)}else a[e]=t}),this.syncDiff(s,{joins:a,leaves:o},r,i)}static syncDiff(e,t,r,i){let{joins:s,leaves:n}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(t,i)=>{var s;let n=null!=(s=e[t])?s:[];if(e[t]=this.cloneDeep(i),n.length>0){let r=e[t].map(e=>e.presence_ref),i=n.filter(e=>0>r.indexOf(e.presence_ref));e[t].unshift(...i)}r(t,n,i)}),this.map(n,(t,r)=>{let s=e[t];if(!s)return;let n=r.map(e=>e.presence_ref);s=s.filter(e=>0>n.indexOf(e.presence_ref)),e[t]=s,i(t,s,r),0===s.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return Object.getOwnPropertyNames(e=this.cloneDeep(e)).reduce((t,r)=>{let i=e[r];return"metas"in i?t[r]=i.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(d=T||(T={})).ALL="*",d.INSERT="INSERT",d.UPDATE="UPDATE",d.DELETE="DELETE",(f=E||(E={})).BROADCAST="broadcast",f.PRESENCE="presence",f.POSTGRES_CHANGES="postgres_changes",f.SYSTEM="system",(p=k||(k={})).SUBSCRIBED="SUBSCRIBED",p.TIMED_OUT="TIMED_OUT",p.CLOSED="CLOSED",p.CHANNEL_ERROR="CHANNEL_ERROR";class ar{constructor(e,t={config:{}},r){var i,s;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=v.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new ae(this,w.join,this.params,this.timeout),this.rejoinTimer=new nQ(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=v.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=v.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=v.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=v.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=v.errored,this.rejoinTimer.scheduleTimeout())}),this._on(w.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new at(this),this.broadcastEndpointURL=n7(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null==(s=null==(i=this.params.config)?void 0:i.broadcast)?void 0:s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==v.closed){let{config:{broadcast:n,presence:a,private:o}}=this.params,l=null!=(i=null==(r=this.bindings.postgres_changes)?void 0:r.map(e=>e.filter))?i:[],h=!!this.bindings[E.PRESENCE]&&this.bindings[E.PRESENCE].length>0||(null==(s=this.params.config.presence)?void 0:s.enabled)===!0,u={},c={broadcast:n,presence:Object.assign(Object.assign({},a),{enabled:h}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(k.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(k.CLOSED)),this.updateJoinPayload(Object.assign({config:c},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var r;if(this.socket.setAuth(),void 0===t){null==e||e(k.SUBSCRIBED);return}{let i=this.bindings.postgres_changes,s=null!=(r=null==i?void 0:i.length)?r:0,n=[];for(let r=0;r<s;r++){let s=i[r],{filter:{event:a,schema:o,table:l,filter:h}}=s,u=t&&t[r];if(u&&u.event===a&&u.schema===o&&u.table===l&&u.filter===h)n.push(Object.assign(Object.assign({},s),{id:u.id}));else{this.unsubscribe(),this.state=v.errored,null==e||e(k.CHANNEL_ERROR,Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=n,e&&e(k.SUBSCRIBED);return}}).receive("error",t=>{this.state=v.errored,null==e||e(k.CHANNEL_ERROR,Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(k.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===v.joined&&e===E.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var i;let s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(null==t)return Promise.reject("Payload is required for httpSend()");let n={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,n,null!=(i=r.timeout)?i:this.timeout);if(202===a.status)return{success:!0};let o=a.statusText;try{let e=await a.json();o=e.error||e.message||o}catch(e){}return Promise.reject(Error(o))}async send(e,t={}){var r,i;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var i,s,n;let a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null==(n=null==(s=null==(i=this.params)?void 0:i.config)?void 0:s.broadcast)?void 0:n.ack)||r("ok"),a.receive("ok",()=>r("ok")),a.receive("error",()=>r("error")),a.receive("timeout",()=>r("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:s,payload:n}=e,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:n,private:this.private}]})};try{let e=await this._fetchWithTimeout(this.broadcastEndpointURL,a,null!=(r=t.timeout)?r:this.timeout);return await (null==(i=e.body)?void 0:i.cancel()),e.ok?"ok":"error"}catch(e){if("AbortError"===e.name)return"timed out";return"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=v.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(w.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{(r=new ae(this,w.leave,{},e)).receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{null==r||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=v.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){let i=new AbortController,s=setTimeout(()=>i.abort(),r),n=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),n}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new ae(this,e,t,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){let e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;let n=e.toLocaleLowerCase(),{close:a,error:o,leave:l,join:h}=w;if(r&&[a,o,l,h].indexOf(n)>=0&&r!==this._joinRef())return;let u=this._onMessage(n,t,r);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(n)?null==(i=this.bindings.postgres_changes)||i.filter(e=>{var t,r,i;return(null==(t=e.filter)?void 0:t.event)==="*"||(null==(i=null==(r=e.filter)?void 0:r.event)?void 0:i.toLocaleLowerCase())===n}).map(e=>e.callback(u,r)):null==(s=this.bindings[n])||s.filter(e=>{var r,i,s,a,o,l;if(!["broadcast","presence","postgres_changes"].includes(n))return e.type.toLocaleLowerCase()===n;if("id"in e){let n=e.id,a=null==(r=e.filter)?void 0:r.event;return n&&(null==(i=t.ids)?void 0:i.includes(n))&&("*"===a||(null==a?void 0:a.toLocaleLowerCase())===(null==(s=t.data)?void 0:s.type.toLocaleLowerCase()))}{let r=null==(o=null==(a=null==e?void 0:e.filter)?void 0:a.event)?void 0:o.toLocaleLowerCase();return"*"===r||r===(null==(l=null==t?void 0:t.event)?void 0:l.toLocaleLowerCase())}}).map(e=>{if("object"==typeof u&&"ids"in u){let e=u.data,{schema:t,table:r,commit_timestamp:i,type:s,errors:n}=e;u=Object.assign(Object.assign({},{schema:t,table:r,commit_timestamp:i,eventType:s,new:{},old:{},errors:n}),this._getPayloadRecords(e))}e.callback(u,r)})}_isClosed(){return this.state===v.closed}_isJoined(){return this.state===v.joined}_isJoining(){return this.state===v.joining}_isLeaving(){return this.state===v.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){let i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){let r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(e=>{var i;return!((null==(i=e.type)?void 0:i.toLocaleLowerCase())===r&&ar.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(w.close,{},e)}_onError(e){this._on(w.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=v.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let t={new:{},old:{}};return("INSERT"===e.type||"UPDATE"===e.type)&&(t.new=n0(e.columns,e.record)),("UPDATE"===e.type||"DELETE"===e.type)&&(t.old=n0(e.columns,e.old_record)),t}}let ai=()=>{},as=[1e3,2e3,5e3,1e4],an=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class aa{constructor(t,r){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.transport=null,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ai,this.ref=0,this.reconnectTimer=null,this.logger=ai,this.conn=null,this.sendBuffer=[],this.serializer=new nZ,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=t=>{let r;return r=t||("undefined"==typeof fetch?(...t)=>e.A(64044).then(({default:e})=>e(...t)).catch(e=>{throw Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...e)=>r(...e)},!(null==(i=null==r?void 0:r.params)?void 0:i.apikey))throw Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${b.websocket}`,this.httpEndpoint=n7(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==r?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=nX.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");let e=t.message;if(e.includes("Node.js"))throw Error(`${e}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`);throw Error(`WebSocket not available: ${e}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){let t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){let e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case y.connecting:return _.Connecting;case y.open:return _.Open;case y.closing:return _.Closing;default:return _.Closed}}isConnected(){return this.connectionState()===_.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){let r=`realtime:${e}`,i=this.getChannels().find(e=>e.topic===r);if(i)return i;{let r=new ar(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){let{topic:t,event:r,payload:i,ref:s}=e,n=()=>{this.encode(e,e=>{var t;null==(t=this.conn)||t.send(e)})};this.log("push",`${t} ${r} (${s})`,i),this.isConnected()?n():this.sendBuffer.push(n)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(e){this.log("error","error in heartbeat callback",e)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(e){this.log("error","error in heartbeat callback",e)}this._wasManualDisconnect=!1,null==(e=this.conn)||e.close(1e3,"heartbeat timeout"),setTimeout(()=>{var e;this.isConnected()||null==(e=this.reconnectTimer)||e.scheduleTimeout()},100);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(e){this.log("error","error in heartbeat callback",e)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(e){this.log("error","error in heartbeat callback",e)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);let{topic:t,event:r,payload:i,ref:s}=e,n=s?`(${s})`:"",a=i.status||"";this.log("receive",`${a} ${t} ${r} ${n}`.trim(),i),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,i,s)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null==(t=this.reconnectTimer)||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null==(t=this.reconnectTimer)||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(w.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;let r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{let e=new Blob([an],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;t=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{t&&e.updateJoinPayload({access_token:t,version:"realtime-js/2.78.0"}),e.joinedOnce&&e._isJoined()&&e._push(w.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(t){this.log("error",`error in ${e} callback`,t)}})}catch(t){this.log("error",`error triggering ${e} callbacks`,t)}}_setupReconnectionTimer(){this.reconnectTimer=new nQ(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},10)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,i,s,n,a,o,l,h;if(this.transport=null!=(t=null==e?void 0:e.transport)?t:null,this.timeout=null!=(r=null==e?void 0:e.timeout)?r:1e4,this.heartbeatIntervalMs=null!=(i=null==e?void 0:e.heartbeatIntervalMs)?i:25e3,this.worker=null!=(s=null==e?void 0:e.worker)&&s,this.accessToken=null!=(n=null==e?void 0:e.accessToken)?n:null,this.heartbeatCallback=null!=(a=null==e?void 0:e.heartbeatCallback)?a:ai,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!=(o=null==e?void 0:e.reconnectAfterMs)?o:e=>as[e-1]||1e4,this.encode=null!=(l=null==e?void 0:e.encode)?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!=(h=null==e?void 0:e.decode)?h:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!=typeof window&&!window.Worker)throw Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}var ao=e.i(87122);class al extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ah(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class au extends al{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ac extends al{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}let ad=t=>{let r;return r=t||("undefined"==typeof fetch?(...t)=>e.A(64044).then(({default:e})=>e(...t)):fetch),(...e)=>r(...e)},af=e=>{if(Array.isArray(e))return e.map(e=>af(e));if("function"==typeof e||e!==Object(e))return e;let t={};return Object.entries(e).forEach(([e,r])=>{t[e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""))]=af(r)}),t},ap=e=>{var t;return e.msg||e.message||e.error_description||("string"==typeof e.error?e.error:null==(t=e.error)?void 0:t.message)||JSON.stringify(e)};function am(t,r,i,s,n,a){return(0,nU.__awaiter)(this,void 0,void 0,function*(){return new Promise((o,l)=>{let h;t(i,(h={method:r,headers:(null==s?void 0:s.headers)||{}},"GET"===r||!a?h:((e=>{if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(a)?(h.headers=Object.assign({"Content-Type":"application/json"},null==s?void 0:s.headers),h.body=JSON.stringify(a)):h.body=a,(null==s?void 0:s.duplex)&&(h.duplex=s.duplex),Object.assign(Object.assign({},h),n)))).then(e=>{if(!e.ok)throw e;return(null==s?void 0:s.noResolveJson)?e:e.json()}).then(e=>o(e)).catch(t=>(0,nU.__awaiter)(void 0,void 0,void 0,function*(){t instanceof(yield(0,nU.__awaiter)(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield e.A(64044)).Response:Response}))&&!(null==s?void 0:s.noResolveJson)?t.json().then(e=>{let r=t.status||500,i=(null==e?void 0:e.statusCode)||r+"";l(new au(ap(e),r,i))}).catch(e=>{l(new ac(ap(e),e))}):l(new ac(ap(t),t))}))})})}function ag(e,t,r,i){return(0,nU.__awaiter)(this,void 0,void 0,function*(){return am(e,"GET",t,r,i)})}function ay(e,t,r,i,s){return(0,nU.__awaiter)(this,void 0,void 0,function*(){return am(e,"POST",t,i,s,r)})}function av(e,t,r,i,s){return(0,nU.__awaiter)(this,void 0,void 0,function*(){return am(e,"PUT",t,i,s,r)})}function aw(e,t,r,i,s){return(0,nU.__awaiter)(this,void 0,void 0,function*(){return am(e,"DELETE",t,i,s,r)})}class ab{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ah(e))return{data:null,error:e};throw e}})}}A=Symbol.toStringTag;let a_=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[A]="BlobDownloadBuilder",this.promise=null}asStream(){return new ab(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{let e=yield this.downloadFn();return{data:yield e.blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ah(e))return{data:null,error:e};throw e}})}},ax={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},aS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class aT{constructor(e,t={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=ad(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,i){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{let s,n=Object.assign(Object.assign({},aS),i),a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(n.upsert)}),o=n.metadata;"undefined"!=typeof Blob&&r instanceof Blob?((s=new FormData).append("cacheControl",n.cacheControl),o&&s.append("metadata",this.encodeMetadata(o)),s.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?((s=r).append("cacheControl",n.cacheControl),o&&s.append("metadata",this.encodeMetadata(o))):(s=r,a["cache-control"]=`max-age=${n.cacheControl}`,a["content-type"]=n.contentType,o&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null==i?void 0:i.headers)&&(a=Object.assign(Object.assign({},a),i.headers));let l=this._removeEmptyFolders(t),h=this._getFinalPath(l),u=yield("PUT"==e?av:ay)(this.fetch,`${this.url}/object/${h}`,s,Object.assign({headers:a},(null==n?void 0:n.duplex)?{duplex:n.duplex}:{}));return{data:{path:l,id:u.Id,fullPath:u.Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ah(e))return{data:null,error:e};throw e}})}upload(e,t,r){return(0,nU.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return(0,nU.__awaiter)(this,void 0,void 0,function*(){let s=this._removeEmptyFolders(e),n=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${n}`);a.searchParams.set("token",t);try{let e,t=Object.assign({upsert:aS.upsert},i),n=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&r instanceof Blob?((e=new FormData).append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(e=r).append("cacheControl",t.cacheControl):(e=r,n["cache-control"]=`max-age=${t.cacheControl}`,n["content-type"]=t.contentType);let o=yield av(this.fetch,a.toString(),e,{headers:n});return{data:{path:s,fullPath:o.Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ah(e))return{data:null,error:e};throw e}})}createSignedUploadUrl(e,t){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(i["x-upsert"]="true");let s=yield ay(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),n=new URL(this.url+s.url),a=n.searchParams.get("token");if(!a)throw new al("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:a},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ah(e))return{data:null,error:e};throw e}})}update(e,t,r){return(0,nU.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield ay(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ah(e))return{data:null,error:e};throw e}})}copy(e,t,r){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{return{data:{path:(yield ay(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ah(e))return{data:null,error:e};throw e}})}createSignedUrl(e,t,r){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield ay(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},(null==r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers}),n=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:s={signedUrl:encodeURI(`${this.url}${s.signedURL}${n}`)},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ah(e))return{data:null,error:e};throw e}})}createSignedUrls(e,t,r){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{let i=yield ay(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:i.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${s}`):null})),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ah(e))return{data:null,error:e};throw e}})}download(e,t){let r=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",i=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),s=i?`?${i}`:"",n=this._getFinalPath(e);return new a_(()=>ag(this.fetch,`${this.url}/${r}/${n}${s}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return(0,nU.__awaiter)(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{let e=yield ag(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:af(e),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ah(e))return{data:null,error:e};throw e}})}exists(e){return(0,nU.__awaiter)(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{return yield function(e,t,r,i){return(0,nU.__awaiter)(this,void 0,void 0,function*(){return am(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),void 0)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ah(e)&&e instanceof ac){let t=e.originalError;if([400,404].includes(null==t?void 0:t.status))return{data:!1,error:e}}throw e}})}getPublicUrl(e,t){let r=this._getFinalPath(e),i=[],s=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==s&&i.push(s);let n=void 0!==(null==t?void 0:t.transform),a=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==a&&i.push(a);let o=i.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${n?"render/image":"object"}/public/${r}${o}`)}}}remove(e){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield aw(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ah(e))return{data:null,error:e};throw e}})}list(e,t,r){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{let i=Object.assign(Object.assign(Object.assign({},ax),t),{prefix:e||""});return{data:yield ay(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ah(e))return{data:null,error:e};throw e}})}listV2(e,t){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{let r=Object.assign({},e);return{data:yield ay(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ah(e))return{data:null,error:e};throw e}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return void 0!==ao.Buffer?ao.Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}let aE="2.78.0",ak={"X-Client-Info":`storage-js/${aE}`};class aA{constructor(e,t={},r,i){this.shouldThrowOnError=!1;const s=new URL(e);(null==i?void 0:i.useNewHostname)&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ak),t),this.fetch=ad(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{let t=this.listBucketOptionsToQueryString(e);return{data:yield ag(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ah(e))return{data:null,error:e};throw e}})}getBucket(e){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield ag(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ah(e))return{data:null,error:e};throw e}})}createBucket(e){return(0,nU.__awaiter)(this,arguments,void 0,function*(e,t={public:!1}){try{return{data:yield ay(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ah(e))return{data:null,error:e};throw e}})}updateBucket(e,t){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield av(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ah(e))return{data:null,error:e};throw e}})}emptyBucket(e){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield ay(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ah(e))return{data:null,error:e};throw e}})}deleteBucket(e){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield aw(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ah(e))return{data:null,error:e};throw e}})}listBucketOptionsToQueryString(e){let t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}class aP{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ak),t),this.fetch=ad(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield ay(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ah(e))return{data:null,error:e};throw e}})}listBuckets(e){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{let t=new URLSearchParams;(null==e?void 0:e.limit)!==void 0&&t.set("limit",e.limit.toString()),(null==e?void 0:e.offset)!==void 0&&t.set("offset",e.offset.toString()),(null==e?void 0:e.sortColumn)&&t.set("sortColumn",e.sortColumn),(null==e?void 0:e.sortOrder)&&t.set("sortOrder",e.sortOrder),(null==e?void 0:e.search)&&t.set("search",e.search);let r=t.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield ag(this.fetch,i,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ah(e))return{data:null,error:e};throw e}})}deleteBucket(e){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield aw(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ah(e))return{data:null,error:e};throw e}})}}let aj={"X-Client-Info":`storage-js/${aE}`,"Content-Type":"application/json"};class aO extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function aC(e){return"object"==typeof e&&null!==e&&"__isStorageVectorsError"in e}class aR extends aO{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class aI extends aO{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}(m=P||(P={})).InternalError="InternalError",m.S3VectorConflictException="S3VectorConflictException",m.S3VectorNotFoundException="S3VectorNotFoundException",m.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",m.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",m.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded";let a$=t=>{let r;return r=t||("undefined"==typeof fetch?(...t)=>e.A(64044).then(({default:e})=>e(...t)):fetch),(...e)=>r(...e)},aD=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e);function aN(e,t,r,i,s){return(0,nU.__awaiter)(this,void 0,void 0,function*(){return function(e,t,r,i,s,n){return(0,nU.__awaiter)(this,void 0,void 0,function*(){return new Promise((a,o)=>{let l;e(r,(l={method:t,headers:(null==i?void 0:i.headers)||{}},"GET"===t||!n?l:((e=>{if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(n)?(l.headers=Object.assign({"Content-Type":"application/json"},null==i?void 0:i.headers),l.body=JSON.stringify(n)):l.body=n,Object.assign(Object.assign({},l),s)))).then(e=>{if(!e.ok)throw e;if(null==i?void 0:i.noResolveJson)return e;let t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():{}}).then(e=>a(e)).catch(e=>(0,nU.__awaiter)(void 0,void 0,void 0,function*(){if(!(e&&"object"==typeof e&&"status"in e&&"ok"in e&&"number"==typeof e.status)||(null==i?void 0:i.noResolveJson))o(new aI(aD(e),e));else{let t=e.status||500;"function"==typeof e.json?e.json().then(e=>{let r=(null==e?void 0:e.statusCode)||(null==e?void 0:e.code)||t+"";o(new aR(aD(e),t,r))}).catch(()=>{o(new aR(e.statusText||`HTTP ${t} error`,t,t+""))}):o(new aR(e.statusText||`HTTP ${t} error`,t,t+""))}}))})})}(e,"POST",t,i,s,r)})}class aM{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},aj),t),this.fetch=a$(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield aN(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aC(e))return{data:null,error:e};throw e}})}getIndex(e,t){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield aN(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aC(e))return{data:null,error:e};throw e}})}listIndexes(e){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield aN(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aC(e))return{data:null,error:e};throw e}})}deleteIndex(e,t){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield aN(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aC(e))return{data:null,error:e};throw e}})}}class aU{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},aj),t),this.fetch=a$(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw Error("Vector batch size must be between 1 and 500 items");return{data:(yield aN(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aC(e))return{data:null,error:e};throw e}})}getVectors(e){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield aN(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aC(e))return{data:null,error:e};throw e}})}listVectors(e){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield aN(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aC(e))return{data:null,error:e};throw e}})}queryVectors(e){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield aN(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aC(e))return{data:null,error:e};throw e}})}deleteVectors(e){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw Error("Keys batch size must be between 1 and 500 items");return{data:(yield aN(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aC(e))return{data:null,error:e};throw e}})}}class aL{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},aj),t),this.fetch=a$(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield aN(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aC(e))return{data:null,error:e};throw e}})}getBucket(e){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield aN(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aC(e))return{data:null,error:e};throw e}})}listBuckets(){return(0,nU.__awaiter)(this,arguments,void 0,function*(e={}){try{return{data:yield aN(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aC(e))return{data:null,error:e};throw e}})}deleteBucket(e){return(0,nU.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield aN(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aC(e))return{data:null,error:e};throw e}})}}class aB extends aL{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new aV(this.url,this.headers,e,this.fetch)}}class aV extends aM{constructor(e,t,r,i){super(e,t,i),this.vectorBucketName=r}createIndex(e){let t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return(0,nU.__awaiter)(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){let e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return(0,nU.__awaiter)(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){let t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return(0,nU.__awaiter)(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){let t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return(0,nU.__awaiter)(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new aF(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class aF extends aU{constructor(e,t,r,i,s){super(e,t,s),this.vectorBucketName=r,this.indexName=i}putVectors(e){let t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return(0,nU.__awaiter)(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){let t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return(0,nU.__awaiter)(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){let e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return(0,nU.__awaiter)(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){let t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return(0,nU.__awaiter)(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){let t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return(0,nU.__awaiter)(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class aW extends aA{constructor(e,t={},r,i){super(e,t,r,i)}from(e){return new aT(this.url,this.headers,e,this.fetch)}get vectors(){return new aB(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new aP(this.url+"/iceberg",this.headers,this.fetch)}}let aq="";aq="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";let az={headers:{"X-Client-Info":`supabase-js-${aq}/2.78.0`}},aK={schema:"public"},aH={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},aG={};var aJ=e.i(2699);let aY="2.78.0",aX={"X-Client-Info":`gotrue-js/${aY}`},aZ="X-Supabase-Api-Version",aQ={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},a0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class a1 extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function a2(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class a3 extends a1{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class a5 extends a1{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class a6 extends a1{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class a8 extends a6{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class a4 extends a6{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class a9 extends a6{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class a7 extends a6{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class oe extends a6{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ot extends a6{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function or(e){return a2(e)&&"AuthRetryableFetchError"===e.name}class oi extends a6{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class os extends a6{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}let on="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),oa=" 	\n\r=".split(""),oo=(()=>{let e=Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<oa.length;t+=1)e[oa[t].charCodeAt(0)]=-2;for(let t=0;t<on.length;t+=1)e[on[t].charCodeAt(0)]=t;return e})();function ol(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;)r(on[t.queue>>t.queuedBits-6&63]),t.queuedBits-=6;else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;)r(on[t.queue>>t.queuedBits-6&63]),t.queuedBits-=6}function oh(e,t,r){let i=oo[e];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else if(-2===i)return;else throw Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}function ou(e){let t=[],r=e=>{t.push(String.fromCodePoint(e))},i={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},n=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return r(e);for(let r=1;r<6;r+=1)if((e>>7-r&1)==0){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else if(4===t.utf8seq)t.codepoint=7&e;else throw Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,i,r)};for(let t=0;t<e.length;t+=1)oh(e.charCodeAt(t),s,n);return t.join("")}function oc(e){let t=[],r={queue:0,queuedBits:0},i=e=>{t.push(e)};for(let t=0;t<e.length;t+=1)oh(e.charCodeAt(t),r,i);return new Uint8Array(t)}function od(e){let t=[],r={queue:0,queuedBits:0},i=e=>{t.push(e)};return e.forEach(e=>ol(e,r,i)),ol(null,r,i),t.join("")}let of=()=>"undefined"!=typeof window&&"undefined"!=typeof document,op={tested:!1,writable:!1},om=()=>{if(!of())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(e){return!1}if(op.tested)return op.writable;let e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),op.tested=!0,op.writable=!0}catch(e){op.tested=!0,op.writable=!1}return op.writable},og=t=>{let r;return r=t||("undefined"==typeof fetch?(...t)=>e.A(64044).then(({default:e})=>e(...t)):fetch),(...e)=>r(...e)},oy=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},ov=async(e,t)=>{let r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(e){return r}},ow=async(e,t)=>{await e.removeItem(t)};class ob{constructor(){this.promise=new ob.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function o_(e){let t=e.split(".");if(3!==t.length)throw new os("Invalid JWT structure");for(let e=0;e<t.length;e++)if(!a0.test(t[e]))throw new os("JWT not in base64url format");return{header:JSON.parse(ou(t[0])),payload:JSON.parse(ou(t[1])),signature:oc(t[2]),raw:{header:t[0],payload:t[1]}}}async function ox(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function oS(e){return("0"+e.toString(16)).substr(-2)}async function oT(e){let t=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>String.fromCharCode(e)).join("")}async function oE(e){return"undefined"==typeof crypto||void 0===crypto.subtle||"undefined"==typeof TextEncoder?(console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e):btoa(await oT(e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ok(e,t,r=!1){let i=function(){let e=new Uint32Array(56);if("undefined"==typeof crypto){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length,r="";for(let i=0;i<56;i++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,oS).join("")}(),s=i;r&&(s+="/PASSWORD_RECOVERY"),await oy(e,`${t}-code-verifier`,s);let n=await oE(i),a=i===n?"plain":"s256";return[n,a]}ob.promiseConstructor=Promise;let oA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,oP=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function oj(e){if(!oP.test(e))throw Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function oO(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){let e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function oC(e){return JSON.parse(JSON.stringify(e))}let oR=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),oI=[502,503,504];async function o$(e){var t;let r,i;if(!("object"==typeof e&&null!==e&&"status"in e&&"ok"in e&&"json"in e&&"function"==typeof e.json))throw new ot(oR(e),0);if(oI.includes(e.status))throw new ot(oR(e),e.status);try{r=await e.json()}catch(e){throw new a5(oR(e),e)}let s=function(e){let t=e.headers.get(aZ);if(!t||!t.match(oA))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(e){return null}}(e);if(s&&s.getTime()>=aQ["2024-01-01"].timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?i=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(i=r.error_code),i){if("weak_password"===i)throw new oi(oR(r),e.status,(null==(t=r.weak_password)?void 0:t.reasons)||[]);else if("session_not_found"===i)throw new a8}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new oi(oR(r),e.status,r.weak_password.reasons);throw new a3(oR(r),e.status||500,i)}async function oD(e,t,r,i){var s;let n=Object.assign({},null==i?void 0:i.headers);n[aZ]||(n[aZ]=aQ["2024-01-01"].name),(null==i?void 0:i.jwt)&&(n.Authorization=`Bearer ${i.jwt}`);let a=null!=(s=null==i?void 0:i.query)?s:{};(null==i?void 0:i.redirectTo)&&(a.redirect_to=i.redirectTo);let o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await oN(e,t,r+o,{headers:n,noResolveJson:null==i?void 0:i.noResolveJson},{},null==i?void 0:i.body);return(null==i?void 0:i.xform)?null==i?void 0:i.xform(l):{data:Object.assign({},l),error:null}}async function oN(e,t,r,i,s,n){let a,o,l=(o={method:t,headers:(null==i?void 0:i.headers)||{}},"GET"===t?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==i?void 0:i.headers),o.body=JSON.stringify(n),Object.assign(Object.assign({},o),s)));try{a=await e(r,Object.assign({},l))}catch(e){throw console.error(e),new ot(oR(e),0)}if(a.ok||await o$(a),null==i?void 0:i.noResolveJson)return a;try{return await a.json()}catch(e){await o$(e)}}function oM(e){var t,r,i;let s=null;(i=e).access_token&&i.refresh_token&&i.expires_in&&(s=Object.assign({},e),e.expires_at||(s.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:s,user:null!=(t=e.user)?t:e},error:null}}function oU(e){let t=oM(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function oL(e){var t;return{data:{user:null!=(t=e.user)?t:e},error:null}}function oB(e){return{data:e,error:null}}function oV(e){let{action_link:t,email_otp:r,hashed_token:i,redirect_to:s,verification_type:n}=e;return{data:{properties:{action_link:t,email_otp:r,hashed_token:i,redirect_to:s,verification_type:n},user:Object.assign({},(0,nU.__rest)(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]))},error:null}}function oF(e){return e}let oW=["global","local","others"];class oq{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=og(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=oW[0]){if(0>oW.indexOf(t))throw Error(`@supabase/auth-js: Parameter scope must be one of ${oW.join(", ")}`);try{return await oD(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(e){if(a2(e))return{data:null,error:e};throw e}}async inviteUserByEmail(e,t={}){try{return await oD(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:oL})}catch(e){if(a2(e))return{data:{user:null},error:e};throw e}}async generateLink(e){try{let{options:t}=e,r=(0,nU.__rest)(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=null==r?void 0:r.newEmail,delete i.newEmail),await oD(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:oV,redirectTo:null==t?void 0:t.redirectTo})}catch(e){if(a2(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(e){try{return await oD(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:oL})}catch(e){if(a2(e))return{data:{user:null},error:e};throw e}}async listUsers(e){var t,r,i,s,n,a,o;try{let l={nextPage:null,lastPage:0,total:0},h=await oD(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!=(r=null==(t=null==e?void 0:e.page)?void 0:t.toString())?r:"",per_page:null!=(s=null==(i=null==e?void 0:e.perPage)?void 0:i.toString())?s:""},xform:oF});if(h.error)throw h.error;let u=await h.json(),c=null!=(n=h.headers.get("x-total-count"))?n:0,d=null!=(o=null==(a=h.headers.get("link"))?void 0:a.split(","))?o:[];return d.length>0&&(d.forEach(e=>{let t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(c)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(e){if(a2(e))return{data:{users:[]},error:e};throw e}}async getUserById(e){oj(e);try{return await oD(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:oL})}catch(e){if(a2(e))return{data:{user:null},error:e};throw e}}async updateUserById(e,t){oj(e);try{return await oD(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:oL})}catch(e){if(a2(e))return{data:{user:null},error:e};throw e}}async deleteUser(e,t=!1){oj(e);try{return await oD(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:oL})}catch(e){if(a2(e))return{data:{user:null},error:e};throw e}}async _listFactors(e){oj(e.userId);try{let{data:t,error:r}=await oD(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(e){if(a2(e))return{data:null,error:e};throw e}}async _deleteFactor(e){oj(e.userId),oj(e.id);try{return{data:await oD(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(e){if(a2(e))return{data:null,error:e};throw e}}async _listOAuthClients(e){var t,r,i,s,n,a,o;try{let l={nextPage:null,lastPage:0,total:0},h=await oD(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:null!=(r=null==(t=null==e?void 0:e.page)?void 0:t.toString())?r:"",per_page:null!=(s=null==(i=null==e?void 0:e.perPage)?void 0:i.toString())?s:""},xform:oF});if(h.error)throw h.error;let u=await h.json(),c=null!=(n=h.headers.get("x-total-count"))?n:0,d=null!=(o=null==(a=h.headers.get("link"))?void 0:a.split(","))?o:[];return d.length>0&&(d.forEach(e=>{let t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(c)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(e){if(a2(e))return{data:{clients:[]},error:e};throw e}}async _createOAuthClient(e){try{return await oD(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(a2(e))return{data:null,error:e};throw e}}async _getOAuthClient(e){try{return await oD(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(a2(e))return{data:null,error:e};throw e}}async _updateOAuthClient(e,t){try{return await oD(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(a2(e))return{data:null,error:e};throw e}}async _deleteOAuthClient(e){try{return await oD(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(e){if(a2(e))return{data:null,error:e};throw e}}async _regenerateOAuthClientSecret(e){try{return await oD(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(a2(e))return{data:null,error:e};throw e}}}function oz(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}let oK={debug:!!(globalThis&&om()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))};class oH extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class oG extends oH{}async function oJ(e,t,r){oK.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);let i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),oK.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async i=>{if(i){oK.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await r()}finally{oK.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}if(0===t)throw oK.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new oG(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(oK.debug)try{let e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(e){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",e)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}))}function oY(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}class oX extends Error{constructor({message:e,code:t,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=null!=(s=null!=i?i:r instanceof Error?r.name:void 0)?s:"Unknown Error",this.code=t}}class oZ extends oX{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}let oQ=new class{createNewAbortSignal(){if(this.controller){let e=Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}let e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){let e=Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function o0(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function o1(){var e,t;return!!(of()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null==(e=null==navigator?void 0:navigator.credentials)?void 0:e.create)&&"function"==typeof(null==(t=null==navigator?void 0:navigator.credentials)?void 0:t.get))}async function o2(e){try{let t=await navigator.credentials.create(e);if(!t)return{data:null,error:new oZ("Empty credential response",t)};if(!(t instanceof PublicKeyCredential))return{data:null,error:new oZ("Browser returned unexpected credential type",t)};return{data:t,error:null}}catch(t){return{data:null,error:function({error:e,options:t}){var r,i,s;let{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new oX({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("ConstraintError"===e.name){if((null==(r=n.authenticatorSelection)?void 0:r.requireResidentKey)===!0)return new oX({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});else if("conditional"===t.mediation&&(null==(i=n.authenticatorSelection)?void 0:i.userVerification)==="required")return new oX({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});else if((null==(s=n.authenticatorSelection)?void 0:s.userVerification)==="required")return new oX({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else if("InvalidStateError"===e.name)return new oX({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});else if("NotAllowedError"===e.name)return new oX({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});else if("NotSupportedError"===e.name)return new oX(0===n.pubKeyCredParams.filter(e=>"public-key"===e.type).length?{message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}:{message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});else if("SecurityError"===e.name){let t=window.location.hostname;if(!o0(t))return new oX({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(n.rp.id!==t)return new oX({message:`The RP ID "${n.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("TypeError"===e.name){if(n.user.id.byteLength<1||n.user.id.byteLength>64)return new oX({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if("UnknownError"===e.name)return new oX({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e});return new oX({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}({error:t,options:e})}}}async function o3(e){try{let t=await navigator.credentials.get(e);if(!t)return{data:null,error:new oZ("Empty credential response",t)};if(!(t instanceof PublicKeyCredential))return{data:null,error:new oZ("Browser returned unexpected credential type",t)};return{data:t,error:null}}catch(t){return{data:null,error:function({error:e,options:t}){let{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new oX({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("NotAllowedError"===e.name)return new oX({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});else if("SecurityError"===e.name){let t=window.location.hostname;if(!o0(t))return new oX({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(r.rpId!==t)return new oX({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("UnknownError"===e.name)return new oX({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e});return new oX({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}({error:t,options:e})}}}let o5={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},o6={userVerification:"preferred",hints:["security-key"]};function o8(...e){let t=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),r=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),i={};for(let s of e)if(s)for(let e in s){let n=s[e];if(void 0!==n)if(Array.isArray(n))i[e]=n;else if(r(n))i[e]=n;else if(t(n)){let r=i[e];t(r)?i[e]=o8(r,n):i[e]=o8(n)}else i[e]=n}return i}class o4{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:i},s){try{var n,a,o,l;let{data:h,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!h)return{data:null,error:u};let c=null!=i?i:oQ.createNewAbortSignal();if("create"===h.webauthn.type){let{user:e}=h.webauthn.credential_options.publicKey;e.name||(e.name=`${e.id}:${r}`),e.displayName||(e.displayName=e.name)}switch(h.webauthn.type){case"create":{let t=(n=h.webauthn.credential_options.publicKey,a=null==s?void 0:s.create,o8(o5,n,a||{})),{data:r,error:i}=await o2({publicKey:t,signal:c});if(r)return{data:{factorId:e,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:r}},error:null};return{data:null,error:i}}case"request":{let t=(o=h.webauthn.credential_options.publicKey,l=null==s?void 0:s.request,o8(o6,o,l||{})),{data:r,error:i}=await o3(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:t,signal:c}));if(r)return{data:{factorId:e,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:r}},error:null};return{data:null,error:i}}}}catch(e){if(a2(e))return{data:null,error:e};return{data:null,error:new a5("Unexpected error in challenge",e)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t="undefined"!=typeof window?window.location.hostname:void 0,rpOrigins:r="undefined"!=typeof window?[window.location.origin]:void 0,signal:i}},s){if(!t)return{data:null,error:new a1("rpId is required for WebAuthn authentication")};try{if(!o1())return{data:null,error:new a5("Browser does not support WebAuthn",null)};let{data:n,error:a}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:i},{request:s});if(!n)return{data:null,error:a};let{webauthn:o}=n;return this._verify({factorId:e,challengeId:n.challengeId,webauthn:{type:o.type,rpId:t,rpOrigins:r,credential_response:o.credential_response}})}catch(e){if(a2(e))return{data:null,error:e};return{data:null,error:new a5("Unexpected error in authenticate",e)}}}async _register({friendlyName:e,rpId:t="undefined"!=typeof window?window.location.hostname:void 0,rpOrigins:r="undefined"!=typeof window?[window.location.origin]:void 0,signal:i},s){if(!t)return{data:null,error:new a1("rpId is required for WebAuthn registration")};try{if(!o1())return{data:null,error:new a5("Browser does not support WebAuthn",null)};let{data:n,error:a}=await this._enroll({friendlyName:e});if(!n)return await this.client.mfa.listFactors().then(t=>{var r;return null==(r=t.data)?void 0:r.all.find(t=>"webauthn"===t.factor_type&&t.friendly_name===e&&"unverified"!==t.status)}).then(e=>e?this.client.mfa.unenroll({factorId:null==e?void 0:e.id}):void 0),{data:null,error:a};let{data:o,error:l}=await this._challenge({factorId:n.id,friendlyName:n.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:i},{create:s});if(!o)return{data:null,error:l};return this._verify({factorId:n.id,challengeId:o.challengeId,webauthn:{rpId:t,rpOrigins:r,type:o.webauthn.type,credential_response:o.webauthn.credential_response}})}catch(e){if(a2(e))return{data:null,error:e};return{data:null,error:new a5("Unexpected error in register",e)}}}}if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}let o9={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:aX,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function o7(e,t,r){return await r()}let le={};class lt{get jwks(){var e,t;return null!=(t=null==(e=le[this.storageKey])?void 0:e.jwks)?t:{keys:[]}}set jwks(e){le[this.storageKey]=Object.assign(Object.assign({},le[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!=(t=null==(e=le[this.storageKey])?void 0:e.cachedAt)?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){le[this.storageKey]=Object.assign(Object.assign({},le[this.storageKey]),{cachedAt:e})}constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=lt.nextInstanceID,lt.nextInstanceID+=1,this.instanceID>0&&of()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},o9),e);if(this.logDebugMessages=!!i.debug,"function"==typeof i.debug&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new oq({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=og(i.fetch),this.lock=i.lock||o7,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:of()&&(null==(t=null==globalThis?void 0:globalThis.navigator)?void 0:t.locks)?this.lock=oJ:this.lock=o7,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new o4(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:om()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=oz(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=oz(this.memoryStorage)),of()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(e){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",e)}null==(r=this.broadcastChannel)||r.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${aY}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{let t=function(e){let t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(e){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href),r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),of()&&this.detectSessionInUrl&&"none"!==r){let{data:i,error:s}=await this._getSessionFromURL(t,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),a2(s)&&"AuthImplicitGrantRedirectError"===s.name){let t=null==(e=s.details)?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:s}}return await this._removeSession(),{error:s}}let{session:n,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",n,"redirect type",a),await this._saveSession(n),setTimeout(async()=>{"recovery"===a?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){if(a2(e))return{error:e};return{error:new a5("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{let{data:s,error:n}=await oD(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!=(r=null==(t=null==e?void 0:e.options)?void 0:t.data)?r:{},gotrue_meta_security:{captcha_token:null==(i=null==e?void 0:e.options)?void 0:i.captchaToken}},xform:oM});if(n||!s)return{data:{user:null,session:null},error:n};let a=s.session,o=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:o,session:a},error:null}}catch(e){if(a2(e))return{data:{user:null,session:null},error:e};throw e}}async signUp(e){var t,r,i;try{let s;if("email"in e){let{email:r,password:i,options:n}=e,a=null,o=null;"pkce"===this.flowType&&([a,o]=await ok(this.storage,this.storageKey)),s=await oD(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==n?void 0:n.emailRedirectTo,body:{email:r,password:i,data:null!=(t=null==n?void 0:n.data)?t:{},gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},code_challenge:a,code_challenge_method:o},xform:oM})}else if("phone"in e){let{phone:t,password:n,options:a}=e;s=await oD(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:n,data:null!=(r=null==a?void 0:a.data)?r:{},channel:null!=(i=null==a?void 0:a.channel)?i:"sms",gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:oM})}else throw new a9("You must provide either an email or phone number and a password");let{data:n,error:a}=s;if(a||!n)return{data:{user:null,session:null},error:a};let o=n.session,l=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(e){if(a2(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithPassword(e){try{let t;if("email"in e){let{email:r,password:i,options:s}=e;t=await oD(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:i,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:oU})}else if("phone"in e){let{phone:r,password:i,options:s}=e;t=await oD(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:i,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:oU})}else throw new a9("You must provide either an email or phone number and a password");let{data:r,error:i}=t;if(i)return{data:{user:null,session:null},error:i};if(!r||!r.session||!r.user)return{data:{user:null,session:null},error:new a4};return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i}}catch(e){if(a2(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOAuth(e){var t,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:null==(t=e.options)?void 0:t.redirectTo,scopes:null==(r=e.options)?void 0:r.scopes,queryParams:null==(i=e.options)?void 0:i.queryParams,skipBrowserRedirect:null==(s=e.options)?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){let{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,i,s,n,a,o,l,h,u,c,d;let f,p;if("message"in e)f=e.message,p=e.signature;else{let u,{chain:c,wallet:m,statement:g,options:y}=e;if(of())if("object"==typeof m)u=m;else{let e=window;if("ethereum"in e&&"object"==typeof e.ethereum&&"request"in e.ethereum&&"function"==typeof e.ethereum.request)u=e.ethereum;else throw Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if("object"!=typeof m||!(null==y?void 0:y.url))throw Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");u=m}let v=new URL(null!=(t=null==y?void 0:y.url)?t:window.location.href),w=await u.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!w||0===w.length)throw Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let b=oY(w[0]),_=null==(r=null==y?void 0:y.signInWithEthereum)?void 0:r.chainId;_||(_=parseInt(await u.request({method:"eth_chainId"}),16)),f=function(e){var t;let{chainId:r,domain:i,expirationTime:s,issuedAt:n=new Date,nonce:a,notBefore:o,requestId:l,resources:h,scheme:u,uri:c,version:d}=e;if(!Number.isInteger(r))throw Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!i)throw Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!c)throw Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==d)throw Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${d}`);if(null==(t=e.statement)?void 0:t.includes("\n"))throw Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`);let f=oY(e.address),p=u?`${u}://${i}`:i,m=e.statement?`${e.statement}
`:"",g=`${p} wants you to sign in with your Ethereum account:
${f}

${m}`,y=`URI: ${c}
Version: ${d}
Chain ID: ${r}${a?`
Nonce: ${a}`:""}
Issued At: ${n.toISOString()}`;if(s&&(y+=`
Expiration Time: ${s.toISOString()}`),o&&(y+=`
Not Before: ${o.toISOString()}`),l&&(y+=`
Request ID: ${l}`),h){let e="\nResources:";for(let t of h){if(!t||"string"!=typeof t)throw Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${t}`);e+=`
- ${t}`}y+=e}return`${g}
${y}`}({domain:v.host,address:b,statement:g,uri:v.href,version:"1",chainId:_,nonce:null==(i=null==y?void 0:y.signInWithEthereum)?void 0:i.nonce,issuedAt:null!=(n=null==(s=null==y?void 0:y.signInWithEthereum)?void 0:s.issuedAt)?n:new Date,expirationTime:null==(a=null==y?void 0:y.signInWithEthereum)?void 0:a.expirationTime,notBefore:null==(o=null==y?void 0:y.signInWithEthereum)?void 0:o.notBefore,requestId:null==(l=null==y?void 0:y.signInWithEthereum)?void 0:l.requestId,resources:null==(h=null==y?void 0:y.signInWithEthereum)?void 0:h.resources}),p=await u.request({method:"personal_sign",params:[(d=f,"0x"+Array.from(new TextEncoder().encode(d),e=>e.toString(16).padStart(2,"0")).join("")),b]})}try{let{data:t,error:r}=await oD(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:p},(null==(u=e.options)?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null==(c=e.options)?void 0:c.captchaToken}}:null),xform:oM});if(r)throw r;if(!t||!t.session||!t.user)return{data:{user:null,session:null},error:new a4};return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:r}}catch(e){if(a2(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithSolana(e){var t,r,i,s,n,a,o,l,h,u,c,d;let f,p;if("message"in e)f=e.message,p=e.signature;else{let c,{chain:d,wallet:m,statement:g,options:y}=e;if(of())if("object"==typeof m)c=m;else{let e=window;if("solana"in e&&"object"==typeof e.solana&&("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))c=e.solana;else throw Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if("object"!=typeof m||!(null==y?void 0:y.url))throw Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");c=m}let v=new URL(null!=(t=null==y?void 0:y.url)?t:window.location.href);if("signIn"in c&&c.signIn){let e,t=await c.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},null==y?void 0:y.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),g?{statement:g}:null));if(Array.isArray(t)&&t[0]&&"object"==typeof t[0])e=t[0];else if(t&&"object"==typeof t&&"signedMessage"in t&&"signature"in t)e=t;else throw Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in e&&"signature"in e&&("string"==typeof e.signedMessage||e.signedMessage instanceof Uint8Array)&&e.signature instanceof Uint8Array)f="string"==typeof e.signedMessage?e.signedMessage:new TextDecoder().decode(e.signedMessage),p=e.signature;else throw Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in c)||"function"!=typeof c.signMessage||!("publicKey"in c)||"object"!=typeof c||!c.publicKey||!("toBase58"in c.publicKey)||"function"!=typeof c.publicKey.toBase58)throw Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=[`${v.host} wants you to sign in with your Solana account:`,c.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${v.href}`,`Issued At: ${null!=(i=null==(r=null==y?void 0:y.signInWithSolana)?void 0:r.issuedAt)?i:new Date().toISOString()}`,...(null==(s=null==y?void 0:y.signInWithSolana)?void 0:s.notBefore)?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...(null==(n=null==y?void 0:y.signInWithSolana)?void 0:n.expirationTime)?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...(null==(a=null==y?void 0:y.signInWithSolana)?void 0:a.chainId)?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...(null==(o=null==y?void 0:y.signInWithSolana)?void 0:o.nonce)?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...(null==(l=null==y?void 0:y.signInWithSolana)?void 0:l.requestId)?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...(null==(u=null==(h=null==y?void 0:y.signInWithSolana)?void 0:h.resources)?void 0:u.length)?["Resources",...y.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");let e=await c.signMessage(new TextEncoder().encode(f),"utf8");if(!e||!(e instanceof Uint8Array))throw Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{let{data:t,error:r}=await oD(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:od(p)},(null==(c=e.options)?void 0:c.captchaToken)?{gotrue_meta_security:{captcha_token:null==(d=e.options)?void 0:d.captchaToken}}:null),xform:oM});if(r)throw r;if(!t||!t.session||!t.user)return{data:{user:null,session:null},error:new a4};return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:r}}catch(e){if(a2(e))return{data:{user:null,session:null},error:e};throw e}}async _exchangeCodeForSession(e){let t=await ov(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(null!=t?t:"").split("/");try{let{data:t,error:s}=await oD(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:oM});if(await ow(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!t||!t.session||!t.user)return{data:{user:null,session:null,redirectType:null},error:new a4};return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=i?i:null}),error:s}}catch(e){if(a2(e))return{data:{user:null,session:null,redirectType:null},error:e};throw e}}async signInWithIdToken(e){try{let{options:t,provider:r,token:i,access_token:s,nonce:n}=e,{data:a,error:o}=await oD(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:n,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:oM});if(o)return{data:{user:null,session:null},error:o};if(!a||!a.session||!a.user)return{data:{user:null,session:null},error:new a4};return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:o}}catch(e){if(a2(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOtp(e){var t,r,i,s,n;try{if("email"in e){let{email:i,options:s}=e,n=null,a=null;"pkce"===this.flowType&&([n,a]=await ok(this.storage,this.storageKey));let{error:o}=await oD(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:i,data:null!=(t=null==s?void 0:s.data)?t:{},create_user:null==(r=null==s?void 0:s.shouldCreateUser)||r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},code_challenge:n,code_challenge_method:a},redirectTo:null==s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){let{phone:t,options:r}=e,{data:a,error:o}=await oD(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!=(i=null==r?void 0:r.data)?i:{},create_user:null==(s=null==r?void 0:r.shouldCreateUser)||s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},channel:null!=(n=null==r?void 0:r.channel)?n:"sms"}});return{data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:o}}throw new a9("You must provide either an email or phone number.")}catch(e){if(a2(e))return{data:{user:null,session:null},error:e};throw e}}async verifyOtp(e){var t,r;try{let i,s;"options"in e&&(i=null==(t=e.options)?void 0:t.redirectTo,s=null==(r=e.options)?void 0:r.captchaToken);let{data:n,error:a}=await oD(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:oM});if(a)throw a;if(!n)throw Error("An error occurred on token verification.");let o=n.session,l=n.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(e){if(a2(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithSSO(e){var t,r,i;try{let s=null,n=null;return"pkce"===this.flowType&&([s,n]=await ok(this.storage,this.storageKey)),await oD(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!=(r=null==(t=e.options)?void 0:t.redirectTo)?r:void 0}),(null==(i=null==e?void 0:e.options)?void 0:i.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:n}),headers:this.headers,xform:oB})}catch(e){if(a2(e))return{data:null,error:e};throw e}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{let{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new a8;let{error:i}=await oD(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(a2(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{let t=`${this.url}/resend`;if("email"in e){let{email:r,type:i,options:s}=e,{error:n}=await oD(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},redirectTo:null==s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:n}}if("phone"in e){let{phone:r,type:i,options:s}=e,{data:n,error:a}=await oD(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:null==n?void 0:n.message_id},error:a}}throw new a9("You must provide either an email or phone number and a type")}catch(e){if(a2(e))return{data:{user:null,session:null},error:e};throw e}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(e){}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(e){}})()),await e;this.pendingInLock.length;){let e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{let t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",Error().stack);try{let t=null,r=await ov(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),null!==r&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};let i=!!t.expires_at&&1e3*t.expires_at-Date.now()<9e4;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){let e=await ov(this.userStorage,this.storageKey+"-user");(null==e?void 0:e.user)?t.user=e.user:t.user=oO()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){var e;let r={value:this.suppressGetSessionWarning};t.user=(e=t.user,new Proxy(e,{get:(e,t,i)=>{if("__isInsecureUserWarningProxy"===t)return!0;if("symbol"==typeof t){let r=t.toString();if("Symbol(Symbol.toPrimitive)"===r||"Symbol(Symbol.toStringTag)"===r||"Symbol(util.inspect.custom)"===r||"Symbol(nodejs.util.inspect.custom)"===r)return Reflect.get(e,t,i)}return r.value||"string"!=typeof t||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(e,t,i)}})),r.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}let{data:s,error:n}=await this._callRefreshToken(t.refresh_token);if(n)return{data:{session:null},error:n};return{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{if(e)return await oD(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:oL});return await this._useSession(async e=>{var t,r,i;let{data:s,error:n}=e;if(n)throw n;return(null==(t=s.session)?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await oD(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!=(i=null==(r=s.session)?void 0:r.access_token)?i:void 0,xform:oL}):{data:{user:null},error:new a8}})}catch(e){if(a2(e))return a2(e)&&"AuthSessionMissingError"===e.name&&(await this._removeSession(),await ow(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:e};throw e}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{let{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new a8;let n=i.session,a=null,o=null;"pkce"===this.flowType&&null!=e.email&&([a,o]=await ok(this.storage,this.storageKey));let{data:l,error:h}=await oD(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:o}),jwt:n.access_token,xform:oL});if(h)throw h;return n.user=l.user,await this._saveSession(n),await this._notifyAllSubscribers("USER_UPDATED",n),{data:{user:n.user},error:null}})}catch(e){if(a2(e))return{data:{user:null},error:e};throw e}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new a8;let t=Date.now()/1e3,r=t,i=!0,s=null,{payload:n}=o_(e.access_token);if(n.exp&&(i=(r=n.exp)<=t),i){let{data:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return{data:{user:null,session:null},error:r};if(!t)return{data:{user:null,session:null},error:null};s=t}else{let{data:i,error:n}=await this._getUser(e.access_token);if(n)throw n;s={access_token:e.access_token,refresh_token:e.refresh_token,user:i.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(e){if(a2(e))return{data:{session:null,user:null},error:e};throw e}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){let{data:i,error:s}=t;if(s)throw s;e=null!=(r=i.session)?r:void 0}if(!(null==e?void 0:e.refresh_token))throw new a8;let{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(e){if(a2(e))return{data:{user:null,session:null},error:e};throw e}}async _getSessionFromURL(e,t){try{if(!of())throw new a7("No browser detected.");if(e.error||e.error_description||e.error_code)throw new a7(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new oe("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new a7("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new oe("No code detected.");let{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;let i=new URL(window.location.href);return i.searchParams.delete("code"),window.history.replaceState(window.history.state,"",i.toString()),{data:{session:t.session,redirectType:null},error:null}}let{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:n,expires_in:a,expires_at:o,token_type:l}=e;if(!s||!a||!n||!l)throw new a7("No session defined in URL");let h=Math.round(Date.now()/1e3),u=parseInt(a),c=h+u;o&&(c=parseInt(o));let d=c-h;1e3*d<=3e4&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${d}s, should have been closer to ${u}s`);let f=c-u;h-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,c,h):h-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,c,h);let{data:p,error:m}=await this._getUser(s);if(m)throw m;let g={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:u,expires_at:c,refresh_token:n,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(e){if(a2(e))return{data:{session:null,redirectType:null},error:e};throw e}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){let t=await ov(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;let{data:i,error:s}=t;if(s)return{error:s};let n=null==(r=i.session)?void 0:r.access_token;if(n){let{error:t}=await this.admin.signOut(n,e);if(t&&!(a2(t)&&"AuthApiError"===t.name&&(404===t.status||401===t.status||403===t.status)))return{error:t}}return"others"!==e&&(await this._removeSession(),await ow(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){let t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{let{data:{session:i},error:s}=t;if(s)throw s;await (null==(r=this.stateChangeEmitters.get(e))?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(t){await (null==(i=this.stateChangeEmitters.get(e))?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",t),console.error(t)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;"pkce"===this.flowType&&([r,i]=await ok(this.storage,this.storageKey,!0));try{return await oD(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(e){if(a2(e))return{data:null,error:e};throw e}}async getUserIdentities(){var e;try{let{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:null!=(e=t.user.identities)?e:[]},error:null}}catch(e){if(a2(e))return{data:null,error:e};throw e}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{let{data:r,error:i}=await this._useSession(async t=>{var r,i,s,n,a;let{data:o,error:l}=t;if(l)throw l;let h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null==(r=e.options)?void 0:r.redirectTo,scopes:null==(i=e.options)?void 0:i.scopes,queryParams:null==(s=e.options)?void 0:s.queryParams,skipBrowserRedirect:!0});return await oD(this.fetch,"GET",h,{headers:this.headers,jwt:null!=(a=null==(n=o.session)?void 0:n.access_token)?a:void 0})});if(i)throw i;return!of()||(null==(t=e.options)?void 0:t.skipBrowserRedirect)||window.location.assign(null==r?void 0:r.url),{data:{provider:e.provider,url:null==r?void 0:r.url},error:null}}catch(t){if(a2(t))return{data:{provider:e.provider,url:null},error:t};throw t}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{let{error:i,data:{session:s}}=t;if(i)throw i;let{options:n,provider:a,token:o,access_token:l,nonce:h}=e,{data:u,error:c}=await oD(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:null!=(r=null==s?void 0:s.access_token)?r:void 0,body:{provider:a,id_token:o,access_token:l,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}},xform:oM});if(c)return{data:{user:null,session:null},error:c};if(!u||!u.session||!u.user)return{data:{user:null,session:null},error:new a4};return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("USER_UPDATED",u.session)),{data:u,error:c}}catch(e){if(a2(e))return{data:{user:null,session:null},error:e};throw e}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;let{data:s,error:n}=t;if(n)throw n;return await oD(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!=(i=null==(r=s.session)?void 0:r.access_token)?i:void 0})})}catch(e){if(a2(e))return{data:null,error:e};throw e}}async _refreshAccessToken(e){let t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{var r,i;let s=Date.now();return await (r=async r=>(r>0&&await ox(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await oD(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:oM})),i=(e,t)=>{let r=200*Math.pow(2,e);return t&&or(t)&&Date.now()+r-s<3e4},new Promise((e,t)=>{(async()=>{for(let s=0;s<1/0;s++)try{let t=await r(s);if(!i(s,null,t))return void e(t)}catch(e){if(!i(s,e))return void t(e)}})()}))}catch(e){if(this._debug(t,"error",e),a2(e))return{data:{session:null,user:null},error:e};throw e}finally{this._debug(t,"end")}}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){let r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),of()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;let r="#_recoverAndRefresh()";this._debug(r,"begin");try{let i=await ov(this.storage,this.storageKey);if(i&&this.userStorage){let t=await ov(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!t&&(t={user:i.user},await oy(this.userStorage,this.storageKey+"-user",t)),i.user=null!=(e=null==t?void 0:t.user)?e:oO()}else if(i&&!i.user&&!i.user){let e=await ov(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(i.user=e.user,await ow(this.storage,this.storageKey+"-user"),await oy(this.storage,this.storageKey,i)):i.user=oO()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),null!==i&&await this._removeSession();return}let s=(null!=(t=i.expires_at)?t:1/0)*1e3-Date.now()<9e4;if(this._debug(r,`session has${s?"":" not"} expired with margin of 90000s`),s){if(this.autoRefreshToken&&i.refresh_token){let{error:e}=await this._callRefreshToken(i.refresh_token);e&&(console.error(e),or(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(i.user&&!0===i.user.__isUserNotAvailableProxy)try{let{data:e,error:t}=await this._getUser(i.access_token);!t&&(null==e?void 0:e.user)?(i.user=e.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(e){console.error("Error getting user data:",e),this._debug(r,"error getting user data, skipping SIGNED_IN notification",e)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(e){this._debug(r,"error",e),console.error(e);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new a8;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new ob;let{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new a8;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);let i={data:t.session,error:null};return this.refreshingDeferred.resolve(i),i}catch(e){if(this._debug(i,"error",e),a2(e)){let r={data:null,error:e};return or(e)||await this._removeSession(),null==(t=this.refreshingDeferred)||t.resolve(r),r}throw null==(r=this.refreshingDeferred)||r.reject(e),e}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){let i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});let i=[],s=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(e){i.push(e)}});if(await Promise.all(s),i.length>0){for(let e=0;e<i.length;e+=1)console.error(i[e]);throw i[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;let t=Object.assign({},e),r=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!r&&t.user&&await oy(this.userStorage,this.storageKey+"-user",{user:t.user});let e=Object.assign({},t);delete e.user;let i=oC(e);await oy(this.storage,this.storageKey,i)}else{let e=oC(t);await oy(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await ow(this.storage,this.storageKey),await ow(this.storage,this.storageKey+"-code-verifier"),await ow(this.storage,this.storageKey+"-user"),this.userStorage&&await ow(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&of()&&(null==window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),3e4);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let e=Date.now();try{return await this._useSession(async t=>{let{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");let i=Math.floor((1e3*r.expires_at-e)/3e4);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),i<=3&&await this._callRefreshToken(r.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof oH)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!of()||!(null==window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null==window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){let t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"!==document.visibilityState?this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting"):await this._recoverAndRefresh()}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){let i=[`provider=${encodeURIComponent(t)}`];if((null==r?void 0:r.redirectTo)&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),(null==r?void 0:r.scopes)&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),"pkce"===this.flowType){let[e,t]=await ok(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});i.push(r.toString())}if(null==r?void 0:r.queryParams){let e=new URLSearchParams(r.queryParams);i.push(e.toString())}return(null==r?void 0:r.skipBrowserRedirect)&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;let{data:i,error:s}=t;return s?{data:null,error:s}:await oD(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null==(r=null==i?void 0:i.session)?void 0:r.access_token})})}catch(e){if(a2(e))return{data:null,error:e};throw e}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;let{data:s,error:n}=t;if(n)return{data:null,error:n};let a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:o,error:l}=await oD(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:null==(r=null==s?void 0:s.session)?void 0:r.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&"totp"===o.type&&(null==(i=null==o?void 0:o.totp)?void 0:i.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(e){if(a2(e))return{data:null,error:e};throw e}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r,i,s;let{data:n,error:a}=t;if(a)return{data:null,error:a};let o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?(i=e.webauthn.credential_response,"toJSON"in i&&"function"==typeof i.toJSON?i.toJSON():{id:i.id,rawId:i.id,response:{attestationObject:od(new Uint8Array(i.response.attestationObject)),clientDataJSON:od(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:null!=(s=i.authenticatorAttachment)?s:void 0}):function(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();let r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:od(new Uint8Array(i.authenticatorData)),clientDataJSON:od(new Uint8Array(i.clientDataJSON)),signature:od(new Uint8Array(i.signature)),userHandle:i.userHandle?od(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!=(t=e.authenticatorAttachment)?t:void 0}}(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:h}=await oD(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:null==(r=null==n?void 0:n.session)?void 0:r.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:h})})}catch(e){if(a2(e))return{data:null,error:e};throw e}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;let{data:i,error:s}=t;if(s)return{data:null,error:s};let n=await oD(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:null==(r=null==i?void 0:i.session)?void 0:r.access_token});if(n.error)return n;let{data:a}=n;if("webauthn"!==a.type)return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:function(e){if(!e)throw Error("Credential creation options are required");if("undefined"!=typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);let{challenge:t,user:r,excludeCredentials:i}=e,s=(0,nU.__rest)(e,["challenge","user","excludeCredentials"]),n=oc(t).buffer,a=Object.assign(Object.assign({},r),{id:oc(r.id).buffer}),o=Object.assign(Object.assign({},s),{challenge:n,user:a});if(i&&i.length>0){o.excludeCredentials=Array(i.length);for(let e=0;e<i.length;e++){let t=i[e];o.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:oc(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return o}(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:function(e){if(!e)throw Error("Credential request options are required");if("undefined"!=typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);let{challenge:t,allowCredentials:r}=e,i=(0,nU.__rest)(e,["challenge","allowCredentials"]),s=oc(t).buffer,n=Object.assign(Object.assign({},i),{challenge:s});if(r&&r.length>0){n.allowCredentials=Array(r.length);for(let e=0;e<r.length;e++){let t=r[e];n.allowCredentials[e]=Object.assign(Object.assign({},t),{id:oc(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return n}(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(e){if(a2(e))return{data:null,error:e};throw e}})}async _challengeAndVerify(e){let{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;let{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};let i={all:[],phone:[],totp:[],webauthn:[]};for(let r of null!=(e=null==t?void 0:t.factors)?e:[])i.all.push(r),"verified"===r.status&&i[r.factor_type].push(r);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;let{data:{session:r},error:i}=await this.getSession();if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:s}=o_(r.access_token),n=null;s.aal&&(n=s.aal);let a=n;return(null!=(t=null==(e=r.user.factors)?void 0:e.filter(e=>"verified"===e.status))?t:[]).length>0&&(a="aal2"),{data:{currentLevel:n,nextLevel:a,currentAuthenticationMethods:s.amr||[]},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{let{data:{session:r},error:i}=t;return i?{data:null,error:i}:r?await oD(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:e=>({data:e,error:null})}):{data:null,error:new a8}})}catch(e){if(a2(e))return{data:null,error:e};throw e}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{let{data:{session:i},error:s}=r;if(s)return{data:null,error:s};if(!i)return{data:null,error:new a8};let n=await oD(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:e=>({data:e,error:null})});return n.data&&n.data.redirect_url&&of()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(n.data.redirect_url),n})}catch(e){if(a2(e))return{data:null,error:e};throw e}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{let{data:{session:i},error:s}=r;if(s)return{data:null,error:s};if(!i)return{data:null,error:new a8};let n=await oD(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:e=>({data:e,error:null})});return n.data&&n.data.redirect_url&&of()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(n.data.redirect_url),n})}catch(e){if(a2(e))return{data:null,error:e};throw e}}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(t=>t.kid===e);if(r)return r;let i=Date.now();if((r=this.jwks.keys.find(t=>t.kid===e))&&this.jwks_cached_at+6e5>i)return r;let{data:s,error:n}=await oD(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(n)throw n;return s.keys&&0!==s.keys.length&&(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(t=>t.kid===e))?r:null}async getClaims(e,t={}){try{var r;let i,s=e;if(!s){let{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};s=e.session.access_token}let{header:n,payload:a,signature:o,raw:{header:l,payload:h}}=o_(s);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw Error("JWT has expired")}(a.exp);let u=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks);if(!u){let{error:e}=await this.getUser(s);if(e)throw e;return{data:{claims:a,header:n,signature:o},error:null}}let c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw Error("Invalid alg claim")}}(n.alg),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,o,(r=`${l}.${h}`,i=[],!function(e,t){for(let r=0;r<e.length;r+=1){let i=e.charCodeAt(r);if(i>55295&&i<=56319){let t=(i-55296)*1024&65535;i=(e.charCodeAt(r+1)-56320&65535|t)+65536,r+=1}!function(e,t){if(e<=127)return t(e);if(e<=2047){t(192|e>>6),t(128|63&e);return}if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|63&e);return}if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|63&e);return}throw Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}(i,t)}}(r,e=>i.push(e)),new Uint8Array(i))))throw new os("Invalid JWT signature");return{data:{claims:a,header:n,signature:o},error:null}}catch(e){if(a2(e))return{data:null,error:e};throw e}}}lt.nextInstanceID=0;let lr=lt;class li extends lr{constructor(e){super(e)}}(function(){if("undefined"!=typeof window||void 0===ex.default)return!1;let e=ex.default.version;if(null==e)return!1;let t=e.match(/^v(\d+)\./);return!!t&&18>=parseInt(t[1],10)})()&&console.warn(`  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217`);let ls=new class e{constructor(e,t,r){var i,s,n;this.supabaseUrl=e,this.supabaseKey=t;const a=function(e){let t=null==e?void 0:e.trim();if(!t)throw Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(t.endsWith("/")?t:t+"/")}catch(e){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}(e);if(!t)throw Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const o=`sb-${a.hostname.split(".")[0]}-auth-token`,l=function(e,t){var r,i;let{db:s,auth:n,realtime:a,global:o}=e,{db:l,auth:h,realtime:u,global:c}=t,d={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},h),n),realtime:Object.assign(Object.assign({},u),a),storage:{},global:Object.assign(Object.assign(Object.assign({},c),o),{headers:Object.assign(Object.assign({},null!=(r=null==c?void 0:c.headers)?r:{}),null!=(i=null==o?void 0:o.headers)?i:{})}),accessToken:async()=>""};return e.accessToken?d.accessToken=e.accessToken:delete d.accessToken,d}(null!=r?r:{},{db:aK,realtime:aG,auth:Object.assign(Object.assign({},aH),{storageKey:o}),global:az});this.storageKey=null!=(i=l.auth.storageKey)?i:"",this.headers=null!=(s=l.global.headers)?s:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!=(n=l.auth)?n:{},this.headers,l.global.fetch),this.fetch=((e,t,r)=>{let i,s=(i=r||("undefined"==typeof fetch?aJ.default:fetch),(...e)=>i(...e)),n="undefined"==typeof Headers?aJ.Headers:Headers;return async(r,i)=>{var a;let o=null!=(a=await t())?a:e,l=new n(null==i?void 0:i.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),s(r,Object.assign(Object.assign({},i),{headers:l}))}})(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new nz(new URL("rest/v1",a).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new aW(this.storageUrl.href,this.headers,this.fetch,null==r?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new nW(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();let{data:r}=await this.auth.getSession();return null!=(t=null==(e=r.session)?void 0:e.access_token)?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:n,flowType:a,lock:o,debug:l},h,u){let c={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new li({url:this.authUrl.href,headers:Object.assign(Object.assign({},c),h),storageKey:n,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:s,flowType:a,lock:o,debug:l,fetch:u,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new aa(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){("TOKEN_REFRESHED"===e||"SIGNED_IN"===e)&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0)}}("https://yiccjijuhnyjmfihawcc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlpY2NqaWp1aG55am1maWhhd2NjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE5MTEwODMsImV4cCI6MjA3NzQ4NzA4M30.OqwVK_tgSq7qPRc-VqziSh9JIgOg6M_xmB2xExUVgd8",void 0);function ln(){let[e,t]=(0,O.useState)(""),[r,i]=(0,O.useState)(""),[s,n]=(0,O.useState)(!1),a=async s=>{if(s.preventDefault(),!e||!e.includes("@")||!r)return;let{error:a}=await ls.from("signups").insert([{email:e,first_name:r}]);if(a){console.error("Signup error:",a.message),alert("Something went wrong. Please try again.");return}n(!0),t(""),i("")};return(0,j.jsxs)("main",{className:"min-h-screen flex flex-col items-center justify-between bg-gradient-to-b from-orange-50 to-amber-100 text-gray-900",children:[(0,j.jsxs)("section",{className:"flex flex-col items-center justify-center px-6 pt-20 pb-16 text-center w-full max-w-7xl flex-grow",children:[(0,j.jsxs)(nP.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,j.jsx)("h1",{className:"text-6xl md:text-8xl font-black text-amber-900 leading-tight mb-4 tracking-widest uppercase",children:"ACQUIRED TASTE"}),(0,j.jsxs)("h2",{className:"text-3xl font-bold text-amber-800 mb-2",children:["Taste the World.",(0,j.jsx)("span",{className:"text-amber-600",children:" Learn the Culture. "}),(0,j.jsx)("span",{className:"text-amber-800",children:"Collect the Memory."})]}),(0,j.jsxs)("p",{className:"mt-4 text-xl max-w-4xl text-gray-700 mx-auto",children:["The ",(0,j.jsx)("strong",{children:"Gamified Cultural Passport"})," that transforms every dish into a global discovery, a personal story, and a powerful memory."]}),(0,j.jsx)("p",{className:"mt-6 max-w-3xl mx-auto text-lg text-gray-800 border-t border-b border-amber-200 py-4 px-4",children:"Acquired Taste is your new best friend for food adventure! We're here to help you get culturally fluent, one delicious bite at a time. Find out about upcoming global holidays and traditions, and discover the awesome dishes served to celebrate them. Food is the universal party starter! Break out of your comfort zone, try new cuisines, and turn every single meal into a fun, rewarding, educational quest."}),(0,j.jsx)("p",{className:"mt-8 text-sm font-semibold text-amber-700 uppercase tracking-widest",children:"Are you a foodie ready to explore the world?"})]}),(0,j.jsxs)("div",{className:"mt-8 w-full max-w-xl",children:[s?(0,j.jsxs)(nP.div,{className:"flex flex-col items-center justify-center p-8 bg-white/50 backdrop-blur-sm rounded-xl w-full max-w-md mx-auto",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:[(0,j.jsx)(n$,{className:"w-10 h-10 mb-2 text-green-600"}),(0,j.jsx)("p",{className:"font-medium text-lg",children:"You're on the list! Well be in touch soon "})]}):(0,j.jsxs)(nP.form,{onSubmit:a,className:"flex flex-col sm:flex-row gap-3 w-full max-w-md mx-auto",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5},children:[(0,j.jsx)("input",{type:"text",placeholder:"First name",value:r,onChange:e=>i(e.target.value),className:"flex-1 px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-amber-500 text-gray-800",required:!0}),(0,j.jsx)("input",{type:"email",placeholder:"Email address",value:e,onChange:e=>t(e.target.value),className:"flex-1 px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-amber-500 text-gray-800",required:!0}),(0,j.jsx)("button",{type:"submit",className:"px-6 py-3 bg-amber-600 hover:bg-amber-700 text-white rounded-xl transition font-medium text-lg flex-shrink-0",children:" Get My Passport"})]}),(0,j.jsx)("p",{className:"text-xs text-gray-600 mt-2",children:"No spam. Just an invite to your first culinary quest."})]})]}),(0,j.jsx)("div",{className:"relative w-full max-w-xl mx-auto mb-8",children:(0,j.jsx)("img",{src:"img/hero-palau.png",alt:"Palau Island Food Discovery",className:"rounded-3xl shadow-2xl border-4 border-amber-300 transform hover:scale-[1.01] transition duration-500"})}),(0,j.jsx)("section",{className:"w-full py-20 bg-white shadow-inner",children:(0,j.jsxs)("div",{className:"max-w-6xl mx-auto px-6",children:[(0,j.jsxs)("h2",{className:"text-4xl font-bold text-center text-amber-900 mb-12",children:[(0,j.jsx)("span",{className:"text-amber-600",children:"T"}),"he ",(0,j.jsx)("span",{className:"text-amber-600",children:"A"}),"dventure, ",(0,j.jsx)("span",{className:"text-amber-600",children:"S"}),"tory, ",(0,j.jsx)("span",{className:"text-amber-600",children:"T"}),"radition, & ",(0,j.jsx)("span",{className:"text-amber-600",children:"E"}),"xperience"]}),(0,j.jsxs)("div",{className:"grid md:grid-cols-3 gap-10",children:[(0,j.jsxs)(nP.div,{className:"p-8 bg-amber-50 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border-t-4 border-amber-600",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:{duration:.5,delay:.3},children:[(0,j.jsx)(nM,{className:"w-10 h-10 text-amber-600 mb-3"}),(0,j.jsx)("h3",{className:"text-2xl font-semibold text-gray-800",children:"Your Cultural Guide to Global Flavor"}),(0,j.jsx)("p",{className:"mt-2 text-gray-600",children:"Explore beyond your normal diet and find your next craving. Learn the Story with global holidays, food traditions, and insights that will drive your culinary adventure. Check out our rotating Cultural Carousels for inspiration!"})]}),(0,j.jsxs)(nP.div,{className:"p-8 bg-amber-50 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border-t-4 border-amber-600",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:{duration:.5,delay:.1},children:[(0,j.jsx)(nD,{className:"w-10 h-10 text-amber-600 mb-3"}),(0,j.jsx)("h3",{className:"text-2xl font-semibold text-gray-800",children:"Stamp Your Digital Passport"}),(0,j.jsx)("p",{className:"mt-2 text-gray-600",children:"Explore the world's cuisines in the most fun way possible. Every dish you taste and log earns you a country stamp, turning your exploration into a rewarding game of learning, discovery, and culinary achievement."})]}),(0,j.jsxs)(nP.div,{className:"p-8 bg-amber-50 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border-t-4 border-amber-600",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:{duration:.5,delay:.2},children:[(0,j.jsx)(nN,{className:"w-10 h-10 text-amber-600 mb-3"}),(0,j.jsx)("h3",{className:"text-2xl font-semibold text-gray-800",children:"Log Memories, Not Macros."}),(0,j.jsx)("p",{className:"mt-2 text-gray-600",children:"Forget calorie tracking. Acquired Taste is a journal built for cultural context and emotional reflection. Capture the story, feel the moment, and experience the world, one meaningful meal at a time."})]})]})]})}),(0,j.jsxs)("section",{className:"w-full py-16 px-6 text-center",children:[(0,j.jsx)("h2",{className:"text-3xl font-bold text-amber-900",children:"The World is Waiting. Are You Ready to Taste It?"}),(0,j.jsx)("p",{className:"mt-3 text-lg max-w-3xl mx-auto text-gray-700",children:"Don't let another amazing meal fade away. Join the movement of cultural explorers who document their journey."}),(0,j.jsx)("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"mt-6 px-10 py-4 bg-amber-600 hover:bg-amber-700 text-white rounded-xl transition font-bold text-xl shadow-lg hover:shadow-xl",children:"Secure My Spot at the Top (Sign Up!)"})]}),(0,j.jsx)("footer",{className:"w-full py-8 bg-amber-900 text-gray-200",children:(0,j.jsx)("div",{className:"max-w-6xl mx-auto px-6 text-center text-sm",children:(0,j.jsxs)("p",{children:[" ",new Date().getFullYear()," Acquired Taste. Connecting the world through food."]})})})]})}e.s(["default",()=>ln],70688)}]);